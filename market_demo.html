<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hyperscaler Memory & Infrastructure Insights Dashboard - Data & AI Enablement Hub</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #1a202c 0%, #2d3748 100%);
            min-height: 100vh;
            padding: 20px;
            padding-top: 80px;
            color: #e2e8f0;
        }

        /* Draft Banner */
        .draft-banner {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: linear-gradient(135deg, #ed8936 0%, #dd6b20 100%);
            color: white;
            text-align: center;
            padding: 12px 20px;
            font-weight: 700;
            font-size: 0.95rem;
            letter-spacing: 0.5px;
            z-index: 10000;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            border-bottom: 2px solid #c05621;
        }


        .container {
            max-width: 1800px;
            margin: 0 auto;
            background: #2d3748;
            border-radius: 15px;
            padding: 40px 40px 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 2px solid #4a5568;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            color: #e2e8f0;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2rem;
            color: #a0aec0;
        }

        /* Module Navigation */
        .module-nav {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .module-btn {
            padding: 12px 24px;
            background: #1a202c;
            border: 2px solid #4a5568;
            border-radius: 8px;
            color: #a0aec0;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .module-btn:hover, .module-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-color: #667eea;
            color: white;
            transform: translateY(-2px);
        }

        /* Dashboard Sections */
        .dashboard-section {
            margin-bottom: 35px;
            display: none;
        }

        .dashboard-section.active {
            display: block;
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid #4a5568;
        }

        /* Stats Grid */
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: #1a202c;
            border: 2px solid #4a5568;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            border-color: #667eea;
            transform: translateY(-3px);
        }

        .stat-value {
            font-size: 2.2rem;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.85rem;
            color: #a0aec0;
        }

        /* Alerts Panel */
        .alerts-panel {
            background: rgba(229, 62, 62, 0.1);
            border: 2px solid #e53e3e;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .alert-item {
            padding: 12px;
            margin-bottom: 10px;
            background: #1a202c;
            border-radius: 8px;
            border-left: 4px solid #e53e3e;
        }

        .alert-item.warning {
            border-left-color: #ed8936;
        }

        .alert-item.info {
            border-left-color: #667eea;
        }

        .alert-title {
            font-weight: 700;
            color: #e2e8f0;
            margin-bottom: 5px;
        }

        .alert-message {
            color: #a0aec0;
            font-size: 0.9rem;
        }

        /* Card Grids */
        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .metric-card {
            background: #1a202c;
            border: 2px solid #4a5568;
            border-radius: 12px;
            padding: 25px;
            transition: all 0.3s ease;
        }

        .metric-card:hover {
            border-color: #667eea;
            transform: translateY(-5px);
            box-shadow: 0 8px 24px rgba(102, 126, 234, 0.3);
        }

        .metric-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .metric-name {
            font-size: 1.1rem;
            font-weight: 700;
            color: #e2e8f0;
        }

        .metric-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: #667eea;
        }

        .metric-description {
            color: #a0aec0;
            font-size: 0.9rem;
            line-height: 1.6;
        }

        /* Chart Containers */
        .chart-container {
            background: #1a202c;
            border: 2px solid #4a5568;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            min-height: 400px;
            position: relative;
            overflow: visible;
        }

        .chart-title {
            font-size: 1.05rem;
            font-weight: 700;
            color: #e2e8f0;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 10px;
            flex-wrap: wrap;
        }

        .chart-title-secondary {
            font-size: 0.8rem;
            font-weight: 500;
            color: #a0aec0;
        }

        .chart-legend {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #4a5568;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 4px;
        }

        .legend-text {
            font-size: 0.85rem;
            color: #a0aec0;
        }

        /* Tooltip */
        .tooltip {
            position: absolute;
            background: rgba(26, 32, 44, 0.98);
            border: 2px solid #667eea;
            border-radius: 8px;
            padding: 12px;
            pointer-events: auto;
            z-index: 1000;
            min-width: 200px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
            overflow-y: auto;
            overflow-x: hidden;
        }
        
        /* Custom scrollbar for tooltip */
        .tooltip div::-webkit-scrollbar {
            width: 8px;
        }
        
        .tooltip div::-webkit-scrollbar-track {
            background: rgba(45, 55, 72, 0.5);
            border-radius: 4px;
        }
        
        .tooltip div::-webkit-scrollbar-thumb {
            background: rgba(102, 126, 234, 0.6);
            border-radius: 4px;
        }
        
        .tooltip div::-webkit-scrollbar-thumb:hover {
            background: rgba(102, 126, 234, 0.8);
        }

        .tooltip-title {
            font-weight: 700;
            color: #e2e8f0;
            margin-bottom: 8px;
            font-size: 1rem;
        }

        .tooltip-item {
            color: #a0aec0;
            font-size: 0.85rem;
            margin: 4px 0;
            line-height: 1.5;
        }

        .tooltip-item strong {
            color: #e2e8f0;
        }

        /* Annotations */
        .annotation {
            position: absolute;
            background: rgba(102, 126, 234, 0.1);
            border: 2px solid #667eea;
            border-radius: 8px;
            padding: 8px 12px;
            font-size: 0.75rem;
            color: #e2e8f0;
            pointer-events: none;
            z-index: 100;
        }

        /* Chart Info Panel */
        .chart-info {
            background: rgba(102, 126, 234, 0.05);
            border: 1px solid #667eea;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            font-size: 0.9rem;
            color: #a0aec0;
            line-height: 1.6;
        }

        /* Purpose / So What Statements */
        .chart-purpose {
            background: rgba(102, 126, 234, 0.1);
            border-left: 3px solid #667eea;
            border-radius: 6px;
            padding: 12px 15px;
            margin-bottom: 15px;
            margin-top: 12px;
            font-size: 0.8rem;
            color: #e2e8f0;
            line-height: 1.4;
        }

        .chart-purpose h4 {
            font-size: 0.85rem;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 8px;
            margin-top: 0;
        }

        .chart-purpose-section {
            margin-bottom: 8px;
        }

        .chart-purpose-section:last-child {
            margin-bottom: 0;
        }

        .chart-purpose-section strong {
            color: #a0aec0;
            font-weight: 600;
            display: inline-block;
            min-width: 80px;
            font-size: 0.82rem;
        }

        .chart-purpose-section span {
            color: #e2e8f0;
            font-size: 0.8rem;
        }

        /* Narrative Sections for Storyline - Collapsible Dropdown */
        .narrative-section {
            background: #1a202c;
            border: 1px solid #4a5568;
            border-radius: 8px;
            margin-bottom: 15px;
            overflow: hidden;
        }

        .narrative-header {
            cursor: pointer;
            user-select: none;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 16px;
            background: rgba(102, 126, 234, 0.1);
            border-bottom: 1px solid rgba(102, 126, 234, 0.2);
            transition: background 0.2s ease;
        }

        .narrative-header:hover {
            background: rgba(102, 126, 234, 0.15);
        }

        .narrative-header h3 {
            font-size: 0.9rem;
            font-weight: 600;
            color: #667eea;
            margin: 0;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .narrative-header h3::before {
            content: '';
            width: 3px;
            height: 14px;
            background: #667eea;
            display: inline-block;
            border-radius: 2px;
        }

        .narrative-arrow {
            color: #667eea;
            font-size: 0.75rem;
            transition: transform 0.3s ease;
        }

        .narrative-content {
            display: none;
            padding: 16px;
            color: #a0aec0;
            line-height: 1.6;
            font-size: 0.8rem;
        }

        .narrative-content p {
            margin-bottom: 10px;
            font-size: 0.8rem;
        }

        .narrative-content ul {
            margin-left: 18px;
            margin-bottom: 10px;
        }

        .narrative-content li {
            margin-bottom: 6px;
            font-size: 0.8rem;
        }

        .narrative-content strong {
            color: #e2e8f0;
            font-weight: 600;
            font-size: 0.8rem;
        }


        /* Chart Rationale */
        .chart-rationale {
            background: rgba(102, 126, 234, 0.08);
            border-left: 4px solid #667eea;
            border-radius: 8px;
            padding: 0;
            margin-top: 25px;
            font-size: 0.95rem;
            color: #e2e8f0;
            line-height: 1.8;
        }

        .chart-rationale-header {
            cursor: pointer;
            user-select: none;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px 20px;
            background: rgba(102, 126, 234, 0.15);
            border-radius: 8px 8px 0 0;
            margin-bottom: 0;
            transition: all 0.3s ease;
            border-bottom: 1px solid rgba(102, 126, 234, 0.3);
        }

        .chart-rationale-header:hover {
            background: rgba(102, 126, 234, 0.25);
        }

        .chart-rationale-header-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: #667eea;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .chart-rationale-header-title::before {
            content: "ℹ";
            font-size: 1.2rem;
            color: #667eea;
        }

        .chart-rationale-header-control {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.75rem;
            color: #a0aec0;
        }

        .chart-rationale-header-icon {
            font-size: 0.9rem;
            color: #667eea;
            font-weight: 700;
            transition: transform 0.3s ease;
        }

        .chart-rationale-content-wrapper {
            padding: 20px;
            display: none;
        }

        .chart-rationale-content-wrapper.expanded {
            display: block;
        }

        .chart-rationale-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .chart-rationale-title::before {
            content: "ℹ";
            font-size: 1.2rem;
            color: #667eea;
        }

        .chart-rationale-content {
            margin-bottom: 15px;
        }

        .chart-rationale-content p {
            margin-bottom: 10px;
        }

        .chart-rationale-section {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(102, 126, 234, 0.3);
        }

        .chart-rationale-section strong {
            color: #667eea;
            display: block;
            margin-bottom: 8px;
            font-size: 1rem;
        }

        .chart-rationale-list {
            list-style: none;
            padding-left: 0;
            margin-top: 8px;
        }

        .chart-rationale-list li {
            margin: 6px 0;
            padding-left: 20px;
            position: relative;
        }

        .chart-rationale-list li::before {
            content: "→";
            position: absolute;
            left: 0;
            color: #667eea;
            font-weight: 700;
        }

        /* Footer */
        .footer {
            margin-top: 30px;
            padding-top: 15px;
            border-top: 1px solid #4a5568;
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            gap: 10px;
            font-size: 0.8rem;
            color: #a0aec0;
        }

        .footer-left,
        .footer-right {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            align-items: center;
        }

        .footer-separator {
            opacity: 0.7;
        }

        @media (max-width: 768px) {
            .footer {
                flex-direction: column;
                align-items: flex-start;
            }

            .footer-right {
                margin-top: 4px;
            }
        }

        /* Heatmap */
        .heatmap-container {
            background: #1a202c;
            border: 2px solid #4a5568;
            border-radius: 12px;
            padding: 25px;
            margin-top: 30px;
            overflow: visible;
        }

        /* 2x2 Matrix */
        .matrix-container {
            background: #1a202c;
            border: 2px solid #4a5568;
            border-radius: 12px;
            padding: 25px;
            margin-top: 30px;
            min-height: 500px;
        }

        /* Node-link Graph */
        .graph-container {
            background: #1a202c;
            border: 2px solid #4a5568;
            border-radius: 12px;
            padding: 25px;
            margin-top: 30px;
            min-height: 500px;
        }

        /* Provider Badges */
        .provider-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            margin-right: 8px;
        }

        .provider-google {
            background: #4285f4;
            color: white;
        }

        .provider-microsoft {
            background: #00a4ef;
            color: white;
        }

        .provider-apple {
            background: #000000;
            color: white;
        }

        .provider-openai {
            background: #ff6b35;
            color: white;
        }

        .provider-anthropic {
            background: #d4a574;
            color: white;
        }

        /* Risk Indicators */
        .risk-low { color: #48bb78; }
        .risk-medium { color: #ed8936; }
        .risk-high { color: #e53e3e; }

        /* Opportunity Quadrant */
        .quadrant {
            position: relative;
            width: 100%;
            height: 500px;
            border: 2px solid #4a5568;
            border-radius: 12px;
            background: #1a202c;
        }

        /* Controls */
        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 20px;
            background: #1a202c;
            border-radius: 10px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .control-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .control-group label {
            color: #a0aec0;
            font-weight: 600;
        }

        .control-group select, .control-group input {
            padding: 8px 12px;
            border: 2px solid #4a5568;
            border-radius: 6px;
            background: #2d3748;
            color: #e2e8f0;
            font-size: 0.9rem;
        }

        .control-group button {
            padding: 10px 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
        }

        .control-group button:hover {
            transform: translateY(-2px);
        }

        /* McKinsey-style dropdown */
        .dropdown-header:hover {
            background: rgba(102, 126, 234, 0.1) !important;
        }

        .dropdown-content {
            animation: slideDown 0.3s ease-out;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                max-height: 0;
            }
            to {
                opacity: 1;
                max-height: 1000px;
            }
        }
    </style>
</head>
<body>
    <!-- Draft / Sample Data Only Banner -->
    <div class="draft-banner">
        Draft / Sample Data (2023-2025) — Based on public announcements and product releases
    </div>
    
    <div class="container">
        <div class="header">
            <h1>Hyperscaler Memory & Infrastructure Insights Dashboard</h1>
            <p>Data & AI Enablement Hub</p>
        </div>

        <!-- Module Navigation -->
        <div class="module-nav">
            <button class="module-btn active" onclick="showModule('ecosystem')">Ecosystem Moves</button>
            <button class="module-btn" onclick="showModule('globalwatch')">Global vs. U.S. Watch</button>
        </div>

        <!-- Module 2: Global vs. U.S. Watch -->
        <div id="module-globalwatch" class="dashboard-section">
            <h2 class="section-title">Module 2: Global vs. U.S. Watch</h2>

            <!-- Layer 1: Indicators Overview -->
            <div class="chart-container">
                <div class="chart-title">Platform Indicators by Provider & Pillar</div>
                <div class="chart-purpose">
                    <div class="chart-purpose-section">
                        <strong>Purpose:</strong><span> Show where providers lead or lag across pillars to spot differences and lock-in risk.</span>
                    </div>
                    <div class="chart-purpose-section">
                        <strong>Hypothesis:</strong><span> Pillar gaps reveal U.S./Global differences and where lock-in threats or partnership openings emerge.</span>
                    </div>
                    <div class="chart-purpose-section">
                        <strong>Implications:</strong><span> Focus on pillars that support open, interoperable systems; counter moves where lock-in risk is rising.</span>
                    </div>
                </div>
                <div id="globalWatchIndicators"></div>
            </div>

            <!-- Layer 3: Active Alerts -->
            <div class="chart-container">
                <div class="chart-title">Active Alerts</div>
                <div id="globalWatchAlerts"></div>
            </div>

        </div>

        <!-- Module 1: Ecosystem Moves -->
        <div id="module-ecosystem" class="dashboard-section active">
            <h2 class="section-title">Module 1: Ecosystem Moves</h2>

            <!-- Growth of Memory-Related Product Releases -->
            <div class="chart-container">
                <div class="chart-title">Growth of Memory-Related Products</div>
                <div class="chart-purpose">
                    <div class="chart-purpose-section">
                        <strong>Purpose:</strong><span> Compare hyperscaler and non-hyperscaler momentum shipping memory-related products.</span>
                    </div>
                    <div class="chart-purpose-section">
                        <strong>Hypothesis:</strong><span> Faster releases mean memory is a strategic priority. Market view shows if portable memory is already being solved.</span>
                    </div>
                    <div class="chart-purpose-section">
                        <strong>Implications:</strong><span> Identify if market gaps exist for philanthropic investment or if portable memory solutions are already emerging.</span>
                    </div>
                </div>
                <div id="ecosystemMemoryGrowthChart"></div>
            </div>

            <!-- Chart B: Agent Feature Velocity -->
            <div class="chart-container">
                <div class="chart-title">Growth of Agent Capabilities</div>
                <div class="chart-purpose">
                    <div class="chart-purpose-section">
                        <strong>Purpose:</strong><span> Track agent feature release velocity.</span>
                    </div>
                    <div class="chart-purpose-section">
                        <strong>Hypothesis:</strong><span> High velocity builds capability moats and user lock-in.</span>
                    </div>
                    <div class="chart-purpose-section">
                        <strong>Implications:</strong><span> Prioritize integration or differentiation against high-velocity providers; de-prioritize laggards.</span>
                    </div>
                </div>
                <div id="ecosystemAgentVelocityChart"></div>
            </div>

            <!-- Memory Architecture Section -->
            <div style="margin-top: 50px; padding-top: 30px; border-top: 2px solid #4a5568;">
                <h3 class="section-title" style="font-size: 1.5rem; margin-bottom: 20px;">Memory Architecture</h3>

                <!-- Chart A: Memory Openness vs Lock-In (2x2 Matrix) -->
                <div class="matrix-container">
                    <div class="chart-title">Memory Openness vs Lock-In Matrix</div>
                    <div class="chart-purpose">
                        <div class="chart-purpose-section">
                        <strong>Purpose:</strong><span> Place providers on openness vs. lock-in to choose partners vs. defend.</span>
                        </div>
                        <div class="chart-purpose-section">
                        <strong>Hypothesis:</strong><span> Open/low-lock providers are best partners; high-lock require defensive plays.</span>
                        </div>
                        <div class="chart-purpose-section">
                        <strong>Implications:</strong><span> Pursue open partners; craft counter-lock messaging and features for high-lock providers.</span>
                        </div>
                    </div>
                    <div id="memoryOpennessMatrix"></div>
                </div>

                <!-- Chart C: Effective Recall Depth Trendline -->
                <div class="chart-container">
                    <div class="chart-title">How Much Context Can AI Models Remember?</div>
                    <div class="chart-purpose">
                        <div class="chart-purpose-section">
                        <strong>Purpose:</strong><span> Track how much information each AI provider's models can remember natively—more memory means less need for external systems, creating lock-in risk.</span>
                        </div>
                        <div class="chart-purpose-section">
                        <strong>Key Insight:</strong><span> When models can remember 100K+ tokens internally, they don't need external memory systems. This reduces providers' incentive to support open, interoperable standards.</span>
                        </div>
                        <div class="chart-purpose-section">
                        <strong>Strategic Action:</strong><span> Focus partnership efforts on providers below 100K tokens (still need external memory). Monitor providers crossing 100K threshold—lock-in risk increases significantly.</span>
                        </div>
                    </div>
                    <div id="memoryRecallDepthChart"></div>
                </div>
            </div>

        </div>





        <div class="footer">
            <div class="footer-left">
                <span>USP. Data & AI, Data & AI Enablement Hub</span>
            </div>
        </div>
    </div>

    <script>
        // Comprehensive data structure for all modules
        const dashboardData = {
            ecosystem: {
                releases: [
                    { 
                        id: 'r1', provider: 'Google', featureType: 'memory', date: '2024-01-15', 
                        feature: 'Gemini Memory API', description: 'Persistent memory for agents',
                        details: 'Enables agents to maintain context across conversations. Supports up to 128K tokens. Includes automatic summarization and retrieval.',
                        impact: 'high', tokens: 128000, adoptionRate: 45, apiEndpoints: 12,
                        linkedFeatures: ['Workspace Graph', 'AI Studio'], regions: ['US', 'EU', 'APAC']
                    },
                    { 
                        id: 'r2', provider: 'Microsoft', featureType: 'memory', date: '2024-02-10', 
                        feature: 'Copilot Memory Layer', description: 'Cross-app memory storage',
                        details: 'Unified memory system across M365 apps. Enables context sharing between Word, Excel, PowerPoint, Teams. 200K token capacity.',
                        impact: 'high', tokens: 200000, adoptionRate: 52, apiEndpoints: 18,
                        linkedFeatures: ['M365 Graph', 'Copilot Studio'], regions: ['US', 'EU']
                    },
                    { 
                        id: 'r3', provider: 'Google', featureType: 'agent', date: '2024-01-20', 
                        feature: 'AI Studio', description: 'Agent builder platform',
                        details: 'Visual agent builder with memory integration. Supports multi-turn conversations. Includes testing and deployment tools.',
                        impact: 'high', tokens: 0, adoptionRate: 38, apiEndpoints: 25,
                        linkedFeatures: ['Gemini Memory API', 'Workspace'], regions: ['US', 'EU', 'APAC']
                    },
                    { 
                        id: 'r4', provider: 'Microsoft', featureType: 'agent', date: '2024-02-15', 
                        feature: 'Copilot Studio', description: 'Custom agent creation',
                        details: 'Low-code agent builder for enterprise. Integrates with M365 memory layer. Supports custom prompts and workflows.',
                        impact: 'high', tokens: 0, adoptionRate: 42, apiEndpoints: 22,
                        linkedFeatures: ['Copilot Memory', 'Power Platform'], regions: ['US', 'EU']
                    },
                    { 
                        id: 'r5', provider: 'Google', featureType: 'identity', date: '2024-03-05', 
                        feature: 'Workspace Graph Expansion', description: 'Enhanced identity linking',
                        details: 'Expanded identity graph connects more Google services. New permission scopes for cross-app access. Enhanced privacy controls.',
                        impact: 'medium', tokens: 0, adoptionRate: 65, apiEndpoints: 15,
                        linkedFeatures: ['Workspace', 'Identity Platform'], regions: ['Global']
                    },
                    { 
                        id: 'r7', provider: 'Google', featureType: 'api', date: '2024-04-10', 
                        feature: 'Graph API Expansion', description: 'New permission scopes',
                        details: 'Added 12 new API endpoints for memory access. Enhanced OAuth scopes. Improved rate limits for enterprise customers.',
                        impact: 'medium', tokens: 0, adoptionRate: 55, apiEndpoints: 12,
                        linkedFeatures: ['Workspace Graph', 'API Platform'], regions: ['Global']
                    },
                    { 
                        id: 'r8', provider: 'Microsoft', featureType: 'identity', date: '2024-04-15', 
                        feature: 'M365 Graph Integration', description: 'Account context binding',
                        details: 'Deep integration with Azure AD and M365 Graph. Enhanced account context for memory storage. New identity federation options.',
                        impact: 'medium', tokens: 0, adoptionRate: 58, apiEndpoints: 14,
                        linkedFeatures: ['Azure AD', 'M365 Graph'], regions: ['US', 'EU']
                    },
                    { 
                        id: 'r9', provider: 'Google', featureType: 'memory', date: '2024-05-01', 
                        feature: 'Memory TTL Controls', description: 'Time-to-live settings',
                        details: 'Granular TTL controls for memory retention. Automatic expiration policies. Enhanced deletion options for compliance.',
                        impact: 'low', tokens: 0, adoptionRate: 48, apiEndpoints: 6,
                        linkedFeatures: ['Gemini Memory API'], regions: ['Global']
                    },
                    { 
                        id: 'r10', provider: 'OpenAI', featureType: 'agent', date: '2024-05-10', 
                        feature: 'GPT-4 Assistants API', description: 'Agent platform with memory',
                        details: 'Assistants API with persistent memory across conversations. Integrated with ChatGPT, custom GPTs. 128K token memory.',
                        impact: 'high', tokens: 128000, adoptionRate: 55, apiEndpoints: 12,
                        linkedFeatures: ['ChatGPT', 'GPTs'], regions: ['Global']
                    },
                    { 
                        id: 'r11', provider: 'Microsoft', featureType: 'memory', date: '2024-05-20', 
                        feature: 'Memory Export API', description: 'Data portability feature',
                        details: 'New API for exporting memory data in standard formats (JSON, CSV). Supports GDPR compliance. Includes encryption options.',
                        impact: 'medium', tokens: 0, adoptionRate: 32, apiEndpoints: 4,
                        linkedFeatures: ['Copilot Memory'], regions: ['US', 'EU']
                    },
                    { 
                        id: 'r12', provider: 'Google', featureType: 'safety', date: '2024-06-01', 
                        feature: 'Memory Governance', description: 'Compliance controls',
                        details: 'Comprehensive governance controls for memory storage. Audit logs, access controls, content filtering. SOC 2 compliant.',
                        impact: 'high', tokens: 0, adoptionRate: 72, apiEndpoints: 8,
                        linkedFeatures: ['Gemini Memory API', 'Admin Console'], regions: ['Global']
                    },
                    { 
                        id: 'r13', provider: 'OpenAI', featureType: 'memory', date: '2024-08-05', 
                        feature: 'ChatGPT Org Memory', description: 'Organizational memory for ChatGPT workspaces',
                        details: 'Enables shared memory across teams within a ChatGPT workspace. Includes admin controls and export tools.',
                        impact: 'high', tokens: 150000, adoptionRate: 37, apiEndpoints: 10,
                        linkedFeatures: ['ChatGPT Teams', 'Assistant Memory API'], regions: ['US', 'EU']
                    },
                    { 
                        id: 'r14', provider: 'Microsoft', featureType: 'identity', date: '2024-09-12', 
                        feature: 'Edu Graph Binding', description: 'Education tenant identity binding',
                        details: 'Binds student and teacher identities more tightly to M365 Graph for EDU tenants, enabling cross-app memory defaults.',
                        impact: 'high', tokens: 0, adoptionRate: 41, apiEndpoints: 9,
                        linkedFeatures: ['M365 EDU', 'Copilot for Education'], regions: ['US', 'EU']
                    },
                    { 
                        id: 'r15', provider: 'Google', featureType: 'memory', date: '2025-02-18', 
                        feature: 'Classroom Long-Term Memory', description: 'Multi-year student memory in Classroom',
                        details: 'Retains multi-year learning trajectories for students, with educator-facing controls and retention policies.',
                        impact: 'high', tokens: 220000, adoptionRate: 29, apiEndpoints: 11,
                        linkedFeatures: ['Google Classroom', 'Workspace Graph'], regions: ['Global']
                    },
                    { 
                        id: 'r16', provider: 'Anthropic', featureType: 'api', date: '2025-06-03', 
                        feature: 'Claude Memory Webhooks', description: 'Event-driven memory integration',
                        details: 'Webhooks for memory read/write events, enabling external systems to sync or audit Claude memory activity.',
                        impact: 'medium', tokens: 0, adoptionRate: 18, apiEndpoints: 7,
                        linkedFeatures: ['Claude API', 'Audit Toolkit'], regions: ['US', 'EU']
                    },
                    { 
                        id: 'r17', provider: 'Anthropic', featureType: 'memory', date: '2024-10-20', 
                        feature: 'Claude EDU Memory Profiles', description: 'Education-focused memory profiles for Claude',
                        details: 'Allows institutions to define scoped memory profiles for different student cohorts, with strict retention and audit controls.',
                        impact: 'high', tokens: 160000, adoptionRate: 21, apiEndpoints: 8,
                        linkedFeatures: ['Claude EDU', 'Policy Toolkit'], regions: ['US', 'EU']
                    },
                    { 
                        id: 'r18', provider: 'Microsoft', featureType: 'safety', date: '2025-03-30', 
                        feature: 'Memory Risk Dashboard', description: 'Safety analytics for memory usage',
                        details: 'Dashboard for monitoring risky memory patterns across tenants, with exportable reports and automated policy suggestions.',
                        impact: 'medium', tokens: 0, adoptionRate: 33, apiEndpoints: 5,
                        linkedFeatures: ['Security Center', 'Copilot Memory'], regions: ['Global']
                    },
                    { 
                        id: 'r19', provider: 'OpenAI', featureType: 'api', date: '2025-09-01', 
                        feature: 'Memory Policy API', description: 'Programmatic control over memory retention and access',
                        details: 'API for setting per-tenant memory policies, including TTLs, scopes, export requirements, and jurisdictional constraints.',
                        impact: 'high', tokens: 0, adoptionRate: 19, apiEndpoints: 9,
                        linkedFeatures: ['Assistant Memory API', 'Compliance Toolkit'], regions: ['US', 'EU']
                    },
                    { 
                        id: 'r20', provider: 'Google', featureType: 'safety', date: '2024-07-10', 
                        feature: 'Student Memory Transparency Panel', description: 'Student-facing memory transparency tools',
                        details: 'Dashboard inside Classroom that shows students what the system remembers, with one-click deletion and export controls.',
                        impact: 'medium', tokens: 0, adoptionRate: 24, apiEndpoints: 4,
                        linkedFeatures: ['Google Classroom', 'Privacy Center'], regions: ['US', 'EU']
                    },
                    { 
                        id: 'r21', provider: 'Microsoft', featureType: 'memory', date: '2025-08-05', 
                        feature: 'Copilot Scenario Memory', description: 'Task- and scenario-scoped memories',
                        details: 'Allows tenants to define scenario-specific memories (e.g., IEP planning, grading) with strict boundaries and retention rules.',
                        impact: 'high', tokens: 180000, adoptionRate: 23, apiEndpoints: 6,
                        linkedFeatures: ['M365 EDU', 'Copilot Memory'], regions: ['Global']
                    },
                    { 
                        id: 'r22', provider: 'Google', featureType: 'agent', date: '2024-07-22', 
                        feature: 'Gemini Classroom Coach', description: 'In-class agent powered by Classroom memory',
                        details: 'Context-aware coach for teachers that uses Classroom memory to suggest interventions and resources in real time.',
                        impact: 'high', tokens: 0, adoptionRate: 26, apiEndpoints: 9,
                        linkedFeatures: ['Google Classroom', 'Gemini Memory API'], regions: ['US', 'EU']
                    },
                    { 
                        id: 'r23', provider: 'Microsoft', featureType: 'agent', date: '2024-10-05', 
                        feature: 'Teams EDU Memory Assistant', description: 'Meeting assistant with EDU memory context',
                        details: 'Captures and summarizes EDU-specific meetings (IEP, PLC, department planning) with memory-aware action items.',
                        impact: 'high', tokens: 0, adoptionRate: 28, apiEndpoints: 8,
                        linkedFeatures: ['Teams', 'Copilot Memory'], regions: ['US', 'EU']
                    },
                    { 
                        id: 'r24', provider: 'OpenAI', featureType: 'safety', date: '2025-01-30', 
                        feature: 'Memory Compliance Scanner', description: 'Automated scanning of memory for policy violations',
                        details: 'Scans tenant memory stores for policy violations and PII exposure, with remediation workflows and alerts.',
                        impact: 'medium', tokens: 0, adoptionRate: 20, apiEndpoints: 6,
                        linkedFeatures: ['Memory Policy API', 'Compliance Toolkit'], regions: ['US', 'EU']
                    },
                    { 
                        id: 'r25', provider: 'Anthropic', featureType: 'identity', date: '2025-04-18', 
                        feature: 'Claude EDU Identity Bridge', description: 'Bridge between district identity and Claude memory',
                        details: 'Lightweight identity bridge that links district accounts to Claude memory with explicit consent flows and per-role scopes.',
                        impact: 'medium', tokens: 0, adoptionRate: 17, apiEndpoints: 5,
                        linkedFeatures: ['Claude EDU', 'Identity Bridge'], regions: ['US']
                    },
                    { 
                        id: 'r26', provider: 'Google', featureType: 'memory', date: '2025-09-12', 
                        feature: 'Workspace Memory Snapshots', description: 'Periodic snapshots of memory state for audit and rollback',
                        details: 'Creates periodic snapshots of Workspace memory to support auditing, rollback, and research on longitudinal learning patterns.',
                        impact: 'high', tokens: 260000, adoptionRate: 16, apiEndpoints: 7,
                        linkedFeatures: ['Workspace Graph', 'Admin Console'], regions: ['Global']
                    },
                    { 
                        id: 'r27', provider: 'OpenAI', featureType: 'memory', date: '2024-07-28', 
                        feature: 'Tutor Session Memory', description: 'Session-scoped memory for tutoring scenarios',
                        details: 'Stores multi-session tutoring context for students using ChatGPT-based tutors, with clear session boundaries and expiration.',
                        impact: 'high', tokens: 120000, adoptionRate: 22, apiEndpoints: 6,
                        linkedFeatures: ['ChatGPT Tutors', 'Assistant Memory API'], regions: ['US', 'EU']
                    },
                    { 
                        id: 'r28', provider: 'Microsoft', featureType: 'api', date: '2024-11-09', 
                        feature: 'Memory Insights API', description: 'API for querying memory usage analytics',
                        details: 'Provides aggregated insights about memory usage patterns across workloads, including EDU-specific metrics.',
                        impact: 'medium', tokens: 0, adoptionRate: 19, apiEndpoints: 8,
                        linkedFeatures: ['Memory Risk Dashboard', 'Security Center'], regions: ['Global']
                    },
                    { 
                        id: 'r29', provider: 'Anthropic', featureType: 'safety', date: '2025-02-22', 
                        feature: 'Claude Memory Red-Team Reports', description: 'Red-team analysis of memory behavior',
                        details: 'Publishes periodic red-team reports on memory misuse and mitigations, with hooks for policy updates.',
                        impact: 'medium', tokens: 0, adoptionRate: 14, apiEndpoints: 3,
                        linkedFeatures: ['Claude API', 'Policy Toolkit'], regions: ['US', 'EU']
                    },
                    { 
                        id: 'r30', provider: 'Google', featureType: 'identity', date: '2025-07-03', 
                        feature: 'Guardian Consent Flows', description: 'Consent and override flows for student memory',
                        details: 'Introduces guardian and district consent flows that gate which student memories can be persisted and for how long.',
                        impact: 'high', tokens: 0, adoptionRate: 27, apiEndpoints: 5,
                        linkedFeatures: ['Privacy Center', 'Workspace Graph'], regions: ['US']
                    },
                    { 
                        id: 'r31', provider: 'OpenAI', featureType: 'agent', date: '2025-10-05', 
                        feature: 'Advisor Memory Packs', description: 'Pre-configured memory packs for advising scenarios',
                        details: 'Advising-focused memory packs (college counseling, career pathways) managed as modular units that can be enabled per institution.',
                        impact: 'high', tokens: 140000, adoptionRate: 18, apiEndpoints: 7,
                        linkedFeatures: ['Advisor Agents', 'Memory Policy API'], regions: ['US', 'EU']
                    }
                ],
                memoryGrowthByYear: {
                    2023: { total: 8, byProvider: { Google: 2, Microsoft: 2, OpenAI: 2, Anthropic: 1, Meta: 1 } },
                    2024: { total: 14, byProvider: { Google: 2, Microsoft: 3, OpenAI: 3, Anthropic: 1, Meta: 5 } },
                    2025: { total: 19, byProvider: { Google: 2, Microsoft: 3, OpenAI: 4, Anthropic: 7, Meta: 3 } }
                },
                memoryProductsByYear: {
                    2023: [
                        { provider: 'Google', product: 'Bard', date: '2023-01-15', description: 'Bard gains a Memory toggle remembering user facts (diet, kids, preferences) with add/delete controls.', category: 'User memory', source: 'AndroidPolice', sourceUrl: 'https://www.androidpolice.com/google-bard-memory-toggle-remember-user-details/' },
                        { provider: 'Microsoft', product: 'Bing Chat in Edge', date: '2023-02-15', description: 'Persistent chat history enabling reuse of past queries as context.', category: 'Conversation memory', source: 'CNBC', sourceUrl: 'https://www.cnbc.com/2023/05/04/microsoft-removes-bing-waiting-list-and-adds-chat-history.html' },
                        { provider: 'OpenAI', product: 'Assistants API / Threads', date: '2023-03-15', description: 'Threads store multi-turn conversation state for agents automatically.', category: 'Developer memory', source: 'Wired (DevDay)', sourceUrl: 'https://www.wired.com/story/chatgpt-memory-openai/' },
                        { provider: 'Anthropic', product: 'Claude 2', date: '2023-04-15', description: '100K-token long context for extended in-session reasoning; not persistent.', category: 'Long context', source: 'Anthropic', sourceUrl: 'https://www.anthropic.com/news/100k-context-windows' },
                        { provider: 'OpenAI', product: 'GPT-4 / ChatGPT', date: '2023-05-15', description: 'Large context windows (8K→32K) but no persistent memory.', category: 'Long context', source: 'OpenAI', sourceUrl: 'https://openai.com' },
                        { provider: 'Google', product: 'Bard', date: '2023-06-15', description: 'Contextual recall only within a single session.', category: 'Session-only', source: 'Google Bard', sourceUrl: 'https://bard.google.com' },
                        { provider: 'Microsoft', product: 'Copilot', date: '2023-07-15', description: 'Stateless assistant; session-only memory.', category: 'Session-only', source: 'Microsoft', sourceUrl: 'https://www.microsoft.com' },
                        { provider: 'Meta', product: 'Llama 2', date: '2023-07-18', description: 'Supports 4K–8K token long-context windows but no persistent memory; requires external RAG for any continuity beyond session.', category: 'Long context', source: 'Meta AI Blog', sourceUrl: 'https://arxiv.org/abs/2302.13971' }
                    ],
                    2024: [
                        { provider: 'Google', product: 'Gemini Chatbot', date: '2024-01-15', description: 'Gemini now has memory; remembers user info/preferences across sessions (opt-in).', category: 'Persistent memory', source: 'TechCrunch', sourceUrl: 'https://techcrunch.com/2024/11/19/googles-gemini-chatbot-now-has-memory/' },
                        { provider: 'Google', product: 'Gemini LLM', date: '2024-02-15', description: 'Long-context window supports more extensive reasoning within a session.', category: 'Extended short-term context', source: 'Google Dev Docs', sourceUrl: 'https://ai.google.dev/gemini-api/docs/long-context' },
                        { provider: 'Microsoft', product: 'Microsoft Copilot (General)', date: '2024-03-15', description: 'Microsoft Copilot begins rolling out deeper "contextual understanding" features tied to Microsoft Graph, enabling Copilot to recall documents, emails, meetings, and user context stored in Microsoft 365', category: 'Graph-backed contextual memory (organizational memory; not user-profile memory)', source: 'Demonstrated broadly at Build & Ignite as "Copilot understands your work context"', sourceUrl: 'https://blogs.microsoft.com/blog/tag/microsoft-build' },
                        { provider: 'Microsoft', product: 'Microsoft 365 Copilot', date: '2024-04-15', description: 'Introduces cross-app context abilities — Copilot can remember content across Outlook, Teams, SharePoint, and Word because of Microsoft Graph unification', category: 'Enterprise graph memory (system-level persistent context)', source: '"Copilot understands the context across your apps" (Ignite 2024)', sourceUrl: 'https://techcommunity.microsoft.com/blog/microsoft365copilotblog/microsoft-365-copilot--microsoft-ignite-2024-event-guide/4298855' },
                        { provider: 'Microsoft', product: 'SharePoint Copilot Agents (GA)', date: '2024-05-15', description: 'SharePoint Agents can store and retrieve site-specific knowledge, documents, and prior user interactions — representing an enterprise-level persistent memory', category: 'Agent-level persistent memory (enterprise graph)', source: 'SharePoint Agents GA announcement', sourceUrl: 'https://techcommunity.microsoft.com/blog/microsoft365copilotblog/ignite-2024-sharepoint-agents-now-in-general-availability/4298746' },
                        { provider: 'OpenAI', product: 'ChatGPT Memory Launch (Feb)', date: '2024-06-15', description: 'Memory + controls: saved preferences, editable memory log.', category: 'Opt-in persistent', source: 'OpenAI', sourceUrl: 'https://openai.com/index/memory-and-new-controls-for-chatgpt/' },
                        { provider: 'OpenAI', product: 'Memory Wider Rollout (Apr)', date: '2024-07-15', description: 'Memory expands to Plus subscribers.', category: 'Cross-session memory', source: 'WIRED', sourceUrl: 'https://www.wired.com/story/how-to-use-chatgpt-memory-feature/' },
                        { provider: 'OpenAI', product: 'Memory to All Tiers (Sept)', date: '2024-08-15', description: 'Memory available to Free/Plus/Team/Enterprise; full UI controls.', category: 'Broad persistent memory', source: 'OpenAI', sourceUrl: 'https://openai.com/index/memory-and-new-controls-for-chatgpt/' },
                        { provider: 'Anthropic', product: 'Claude 3 Models', date: '2024-09-15', description: 'Improved long-context & Artifacts; no persistent memory yet.', category: 'Long context', source: 'Anthropic', sourceUrl: 'https://www.anthropic.com' },
                        { provider: 'Meta', product: 'Meta AI (Messenger / Instagram / WhatsApp)', date: '2024-09-29', description: 'Provides short-term conversational recall within the same session (recent turns, task references); explicitly no long-term user preference memory.', category: 'Conversation memory', source: 'Meta Connect 2024', sourceUrl: 'https://about.fb.com/meta-ai' },
                        { provider: 'Meta', product: 'Llama 3', date: '2024-04-18', description: 'Major expansion to 128K context window allowing deeper reasoning, multi-step task memory, and richer in-session recall.', category: 'Long context', source: 'Llama 3 Release Notes', sourceUrl: 'https://ai.meta.com/llama' },
                        { provider: 'Meta', product: 'Llama Stack', date: '2024-05-15', description: 'Developer-managed memory: supports RAG, vector stores, episodic logs; Meta does not host or persist memory.', category: 'Developer memory', source: 'Meta Developer Docs', sourceUrl: 'https://ai.meta.com/llama-stack' },
                        { provider: 'Meta', product: 'Meta AI for Ray-Ban Smart Glasses', date: '2024-09-09', description: 'On-device ephemeral memory to understand recent surroundings, last user query, and visual context; no persistent storage.', category: 'On-device ephemeral', source: 'Meta Smart Glasses Announcement', sourceUrl: 'https://about.fb.com/news' },
                        { provider: 'Meta', product: 'Meta Agent Recipes', date: '2024-06-20', description: 'Open-source patterns for episodic, semantic, and task memory; memory is always externally hosted by developers.', category: 'Developer memory', source: 'Meta AI Research', sourceUrl: 'https://ai.meta.com/research' }
                    ],
                    2025: [
                        { provider: 'Google', product: 'Vertex AI Memory Bank', date: '2025-01-15', description: 'Persistent long-term memory for agents (facts, history, preferences).', category: 'Agent persistent memory', source: 'Google Cloud', sourceUrl: 'https://cloud.google.com/blog/products/ai-machine-learning/vertex-ai-memory-bank-in-public-preview' },
                        { provider: 'Google', product: 'Gemini "Personal Context"', date: '2025-02-15', description: 'Auto-recall of conversations & preferences; default ON (opt-out).', category: 'Persistent personalization memory', source: 'The Verge', sourceUrl: 'https://www.theverge.com/news/758624/google-gemini-ai-automatic-memory-privacy-update' },
                        { provider: 'Microsoft', product: 'Security Copilot Agents', date: '2025-03-15', description: 'Enables persistent threat-analysis memory: agents maintain knowledge of organizational security posture, incidents, and prior analyses', category: 'Domain-specific persistent memory (security posture memory)', source: 'Microsoft announces 11 new Security Copilot agents (2025)', sourceUrl: 'https://www.microsoft.com/en-us/microsoft-365/blog/2025/11/18/microsoft-ignite-2025-copilot-and-agents-built-to-power-the-frontier-firm/' },
                        { provider: 'Microsoft', product: 'Copilot Studio Memory Layer', date: '2025-04-15', description: 'New capabilities allow developers to add persistent memory to custom Copilot agents — storing user preferences, prior interactions, or workflow state', category: 'Developer-defined agent memory (persistent)', source: 'Copilot Studio updates (2025 release cycle)', sourceUrl: 'https://learn.microsoft.com/microsoft-copilot-studio' },
                        { provider: 'Microsoft', product: 'Microsoft Graph Improvements', date: '2025-05-15', description: 'Graph evolves into a "unified organizational memory" — powering Copilot\'s ability to recall meeting summaries, files, chat history, and prior tasks', category: 'Organizational persistent memory', source: 'Repeatedly emphasized across 2024–2025 product releases', sourceUrl: 'https://learn.microsoft.com/graph/overview' },
                        { provider: 'OpenAI', product: 'Responses API', date: '2025-06-15', description: 'Workflow/task memory for agents (state retention).', category: 'Workflow memory', source: 'OpenAI', sourceUrl: 'https://openai.com/index/new-tools-for-building-agents' },
                        { provider: 'OpenAI', product: 'ChatGPT Pro Enhanced Memory', date: '2025-07-15', description: 'Deeper long-term personalization (tone, habits, projects).', category: 'Cross-session memory', source: 'OpenAI Blog', sourceUrl: 'https://openai.com/blog' },
                        { provider: 'OpenAI', product: 'Agent Platform', date: '2025-08-15', description: 'Autonomous agents with persistent tool state & structured memory.', category: 'Agent-level memory', source: 'OpenAI Platform', sourceUrl: 'https://platform.openai.com' },
                        { provider: 'OpenAI', product: 'Retrieval & Vector Store', date: '2025-09-15', description: 'Long-term vector memory for documents & user knowledge bases.', category: 'Externalized memory', source: 'Retrieval API', sourceUrl: 'https://platform.openai.com/docs/guides/retrieval' },
                        { provider: 'Anthropic', product: 'Claude 4 Models (Opus / Sonnet)', date: '2025-10-15', description: 'Introduces enhanced memory functions, including creation and referencing of memory files for long-running tasks and document workflows.', category: 'Extended session context / file-based memory', source: 'Launch coverage highlighting improved memory and memory-file behavior.', sourceUrl: 'https://www.anthropic.com/news/claude-4' },
                        { provider: 'Anthropic', product: '"Search and reference chats"', date: '2025-11-15', description: 'Claude can search across previous chats and surface relevant context in new conversations through retrieval—not true persistent memory.', category: 'Cross-chat retrieval (RAG over chat history)', source: 'Feature described as past chat search/continuation, not persistent memory.', sourceUrl: 'https://support.claude.com/en/articles/11817273-using-claude-s-chat-search-and-memory-to-build-on-previous-context' },
                        { provider: 'Anthropic', product: 'Claude Memory for Teams (project-scoped)', date: '2025-12-15', description: 'Team-focused memory: Claude remembers projects, processes, and client needs with scoped memories and optional incognito/no-memory mode.', category: 'Project-scoped persistent memory (Teams/Enterprise)', source: '"Bringing memory to teams at work" blog + industry coverage.', sourceUrl: 'https://www.anthropic.com/news/memory' },
                        { provider: 'Anthropic', product: 'Persistent Memory (Teams/Enterprise)', date: '2025-01-15', description: 'Gains persistent memory across sessions—remembers projects and preferences with granular controls and privacy options.', category: 'Cross-session persistent memory (enterprise-focused)', source: 'Update describing persistent memory and controls.', sourceUrl: 'https://www.reworked.co/digital-workplace/claude-ai-gains-persistent-memory-in-latest-anthropic-update/' },
                        { provider: 'Anthropic', product: 'Optional Memory for Max/Team/Enterprise', date: '2025-02-15', description: 'Opt-in memory: Claude can recall past conversations when enabled; default remains stateless for privacy.', category: 'Opt-in persistent memory', source: 'Coverage emphasizing privacy-first, opt-in design.', sourceUrl: 'https://www.techradar.com/ai-platforms-assistants/claude/you-can-now-give-claude-access-to-memories-of-previous-conversations-but-only-if-you-want-to' },
                        { provider: 'Anthropic', product: 'Automatic Memory for Teams/Enterprise', date: '2025-03-15', description: 'Automatic memory enables Claude to recall preferences and project context without explicit prompts; users can edit or disable stored memories.', category: 'Automatic cross-session persistent memory', source: 'Verge coverage of automatic memory upgrade and incognito mode.', sourceUrl: 'https://www.theverge.com/news/776827/anthropic-claude-ai-memory-upgrade-team-enterprise' },
                        { provider: 'Anthropic', product: 'Memory for All Paid Users', date: '2025-04-15', description: 'Rolls out persistent, project-based memory to all paid customers (Pro, Max, Team, Enterprise), including import/export support for portability.', category: 'Broad rollout of persistent, project-based memory', source: 'Coverage noting expansion and project-based memory spaces.', sourceUrl: 'https://www.macrumors.com/2025/10/23/anthropic-automatic-memory-claude/' },
                        { provider: 'Meta', product: 'Meta AI (Multimodal Assistant Update)', date: '2025-01-15', description: 'Improved short-session multimodal recall (text + image inputs). Still no persistent user memory across sessions.', category: 'Conversation memory', source: 'Meta AI 2025 Update', sourceUrl: 'https://about.fb.com/meta-ai' },
                        { provider: 'Meta', product: 'Llama 4 (Roadmap / Early Preview)', date: '2025-02-15', description: 'Early previews highlight larger context windows and emerging agent-memory APIs, but still externalized.', category: 'Long context / Developer memory', source: 'Meta Research Announcements', sourceUrl: 'https://ai.meta.com/llama' },
                        { provider: 'Meta', product: 'Meta Memory Toolkit (Open-Source)', date: '2025-03-15', description: 'Offers templates and tools for episodic logs, semantic preference stores, and multi-step task memory; developer-hosted memory.', category: 'Developer memory', source: 'Meta Tools 2025', sourceUrl: 'https://ai.meta.com/research/publications/memory-layers-at-scale/' }
                    ]
                },
                agentFeatures: [
                    { provider: 'Google', '2023': 2, '2024': 0, '2025': 4 },
                    { provider: 'Microsoft', '2023': 1, '2024': 2, '2025': 7 },
                    { provider: 'OpenAI', '2023': 3, '2024': 2, '2025': 5 },
                    { provider: 'Anthropic', '2023': 3, '2024': 2, '2025': 3 },
                    { provider: 'Meta', '2023': 3, '2024': 3, '2025': 4 }
                ],
                identityExpansions: {
                    Google: { workspace: 8, graph: 12, account: 6 },
                    Microsoft: { workspace: 10, graph: 9, account: 8 },
                    OpenAI: { workspace: 6, graph: 8, account: 7 },
                    Anthropic: { workspace: 4, graph: 5, account: 6 }
                },
                alerts: [
                    { type: 'spike', severity: 'high', title: 'Memory Release Spike', message: '3+ memory-related releases detected in Q1 2025', date: '2025-03-15' },
                    { type: 'convergence', severity: 'medium', title: 'Feature Convergence', message: 'Multiple providers launched similar agent features within 45 days', date: '2025-02-20' },
                    { type: 'identity', severity: 'high', title: 'Identity Creep Detected', message: 'New capabilities binding to Workspace/Graph contexts', date: '2025-04-15' }
                ]
            },
            memory: {
                providers: [
                    {
                        name: 'Google',
                        lockInIndex: 75,
                        opennessScore: 25,
                        recallDepth: 128000,
                        boundariesScore: 40,
                        crossAppReach: 12,
                        defaultOnRate: 85,
                        visibilityIndex: 30,
                        apps: ['Gmail', 'Docs', 'Classroom', 'Calendar', 'Keep', 'Drive', 'Sheets', 'Slides', 'Meet', 'Chat', 'Search', 'Photos']
                    },
                    {
                        name: 'Microsoft',
                        lockInIndex: 50,
                        opennessScore: 60,
                        recallDepth: 200000,
                        boundariesScore: 50,
                        crossAppReach: 15,
                        defaultOnRate: 90,
                        visibilityIndex: 35,
                        apps: ['Outlook', 'Word', 'Excel', 'PowerPoint', 'Teams', 'OneNote', 'OneDrive', 'SharePoint', 'Planner', 'To-Do', 'Calendar', 'Forms', 'Sway', 'Yammer', 'Stream']
                    },
                    {
                        name: 'OpenAI',
                        lockInIndex: 60,
                        opennessScore: 45,
                        recallDepth: 128000,
                        boundariesScore: 55,
                        crossAppReach: 8,
                        defaultOnRate: 90,
                        visibilityIndex: 45,
                        apps: ['ChatGPT', 'GPTs', 'API', 'Plugins', 'Assistants', 'DALL·E', 'Whisper', 'Code Interpreter']
                    },
                    {
                        name: 'Anthropic',
                        lockInIndex: 35,
                        opennessScore: 70,
                        recallDepth: 200000,
                        boundariesScore: 60,
                        crossAppReach: 6,
                        defaultOnRate: 75,
                        visibilityIndex: 50,
                        apps: ['Claude', 'API', 'Console', 'Workbench', 'Messaging', 'Tools']
                    },
                    {
                        name: 'Meta',
                        lockInIndex: 25,
                        opennessScore: 85,
                        recallDepth: 90000,
                        boundariesScore: 70,
                        crossAppReach: 4,
                        defaultOnRate: 60,
                        visibilityIndex: 55,
                        apps: ['Llama', 'Llama Stack', 'Meta AI', 'Llama Guard']
                    }
                ],
                recallDepthHistory: [
                    { model: 'GPT-3.5 Turbo', date: '2023-03', depth: 10000 },
                    { model: 'GPT-4', date: '2023-03', depth: 25000 },
                    { model: 'GPT-4 Turbo', date: '2023-11', depth: 75000 },
                    { model: 'GPT-4o', date: '2024-05', depth: 90000 },
                    { model: 'Claude 2', date: '2023-07', depth: 90000 },
                    { model: 'Claude 2.1', date: '2023-11', depth: 135000 },
                    { model: 'Claude 3 Opus', date: '2024-03', depth: 190000 },
                    { model: 'Claude 3 Sonnet', date: '2024-03', depth: 165000 },
                    { model: 'Gemini Pro 1.0', date: '2023-12', depth: 25000 },
                    { model: 'Gemini 1.5 Flash', date: '2024-02', depth: 300000 },
                    { model: 'Gemini 1.5 Pro', date: '2024-02', depth: 650000 },
                    { model: 'Copilot (GPT-4 Turbo)', date: '2023-12', depth: 75000 },
                    { model: 'Copilot (GPT-4o)', date: '2024-05', depth: 90000 },
                    { model: 'Phi-3 Medium', date: '2024-04', depth: 45000 },
                    { model: 'Phi-3 Mini', date: '2024-04', depth: 30000 },
                    { model: 'Phi-3 Small', date: '2024-04', depth: 22500 },
                    { model: 'LongRoPE (research)', date: '2024-01', depth: 650000 },
                    { model: 'Llama 2', date: '2023-07', depth: 4000 },
                    { model: 'Llama 3 8B', date: '2024-04', depth: 6000 },
                    { model: 'Llama 3 70B', date: '2024-04', depth: 50000 },
                    { model: 'Llama 3.1 70B', date: '2024-07', depth: 70000 },
                    { model: 'Llama 3.1 405B', date: '2024-07', depth: 90000 },
                    { model: 'Llama 4 (Preview)', date: '2025-01', depth: 160000 }
                ],
                identityLockIn: [
                    { 
                        provider: 'Google', 
                        percentage: 75, 
                        description: 'Gemini + Workspace memory features tightly bound to Google identity',
                        details: 'Memory and context features (Gemini Memory, Workspace Graph) require Google accounts and Workspace identity, driving high lock-in. Lowest openness, highest lock-in.',
                        category: 'Maximum Risk'
                    },
                    { 
                        provider: 'Microsoft', 
                        percentage: 50, 
                        description: 'Copilot capabilities rely on Microsoft Graph identity',
                        details: 'Microsoft Graph identity system is deeply integrated with Copilot memory, enabling cross-app personalization but creating moderate lock-in dependencies. Medium-high openness, medium lock-in.',
                        category: 'Limited but Manageable'
                    },
                    { 
                        provider: 'OpenAI', 
                        percentage: 60, 
                        description: 'Memory features tied to ChatGPT account/workspace',
                        details: 'ChatGPT account and workspace identities enable persistent memory across conversations and custom GPTs, with medium-high identity binding. Medium openness, high-ish lock-in.',
                        category: 'Limited but Manageable'
                    },
                    { 
                        provider: 'Anthropic', 
                        percentage: 35, 
                        description: 'Tied to Claude organizational workspaces',
                        details: 'Claude organizational workspaces enable team-level memory and context sharing, with comparatively lower identity binding and more openness. High openness, low lock-in.',
                        category: 'Opportunity Zone'
                    },
                    { 
                        provider: 'Meta', 
                        percentage: 25, 
                        description: 'Open-source models with developer-managed memory infrastructure',
                        details: 'Highest openness profile among major providers; low lock-in due to fully open-weights, open tooling, permissive licensing, and ecosystem-driven memory innovations.',
                        category: 'Opportunity Zone'
                    }
                ],
                alerts: [
                    { type: 'default-on', severity: 'high', title: 'Memory Default-On Change', message: 'Microsoft changed memory to default-on for EDU accounts', date: '2025-05-01' },
                    { type: 'cross-app', severity: 'medium', title: 'New Cross-App Memory Integration', message: 'Google integrated Classroom memory with Workspace Graph', date: '2025-04-10' },
                    { type: 'recall-depth', severity: 'high', title: 'Major Recall Depth Increase', message: 'Claude-3 increased recall depth to 200K tokens', date: '2025-03-01' }
                ]
            }
        };

        // Non-Hyperscaler Memory Products Data
        const nonHyperscalerMemoryData = [
            { year: 2023, provider: 'Rewind', product: 'Rewind AI', memoryType: 'Personal timeline memory', summary: 'Records on-device screen/audio history; semantic search over personal timeline; fully local memory.', url: 'https://www.rewind.ai' },
            { year: 2023, provider: 'Notion', product: 'Notion AI', memoryType: 'Workspace memory', summary: 'Learns workspace context (documents, tasks, project artifacts) to improve retrieval and suggestions within Notion.', url: 'https://www.notion.so/ai' },
            { year: 2023, provider: 'Mem', product: 'Mem AI', memoryType: 'Personal knowledge graph', summary: 'Autonomously creates structured personal knowledge from notes, tags, and conversations; persistent personal memory.', url: 'https://get.mem.ai' },
            { year: 2023, provider: 'Otter', product: 'Otter.ai', memoryType: 'Meeting memory', summary: 'Automatic meeting transcription with persistent memory of speaker profiles, meeting history, and task extraction.', url: 'https://otter.ai' },
            { year: 2024, provider: 'Limitless', product: 'Limitless AI (Pendant)', memoryType: 'Personal audio memory', summary: 'Always-on audio memory device that stores conversations locally with user consent; generates summaries and retrieval for tasks.', url: 'https://www.limitless.ai' },
            { year: 2024, provider: 'Perplexity', product: 'Perplexity Pro Search', memoryType: 'User preference memory', summary: 'Remembers user preferences (citation style, topic areas, source types) for refined follow-up queries.', url: 'https://www.perplexity.ai' },
            { year: 2024, provider: 'Arc', product: 'Arc Browser AI', memoryType: 'Browser/workflow memory', summary: 'Learns user browsing patterns and tab context; summarizes past activity and rehydrates sessions.', url: 'https://arc.net' },
            { year: 2024, provider: 'Dropbox', product: 'Dropbox Dash', memoryType: 'Cross-app memory', summary: 'Universal semantic search that remembers files, emails, and past queries across integrated apps; cross-tool memory.', url: 'https://dropbox.com/dash' },
            { year: 2024, provider: 'Typeface', product: 'Typeface Enterprise AI', memoryType: 'Brand memory', summary: 'Learns brand guidelines, tone, and content patterns over time; persistent brand memory for generative content.', url: 'https://www.typeface.ai' },
            { year: 2024, provider: 'Cody', product: 'Sourcegraph Cody', memoryType: 'Code memory', summary: 'Remembers codebase structure and historical edits using embeddings; long-term developer memory.', url: 'https://sourcegraph.com/cody' },
            { year: 2024, provider: 'Readwise', product: 'Readwise Reader 2.0', memoryType: 'Personal knowledge memory', summary: 'Builds persistent knowledge graph from highlights, papers, articles; long-term personal semantic memory.', url: 'https://readwise.io' },
            { year: 2024, provider: 'Glean', product: 'Glean Enterprise Search', memoryType: 'Enterprise knowledge memory', summary: 'Learns organizational knowledge structures and user query patterns across enterprise tools.', url: 'https://www.glean.com' },
            { year: 2025, provider: 'Adept', product: 'ACT Agents', memoryType: 'Task memory', summary: 'Persistent task memory for repeating multi-step workflows across apps (e.g., "your typical spreadsheet updates").', url: 'https://www.adept.ai' },
            { year: 2025, provider: 'Inflection', product: 'Pi 2', memoryType: 'Relationship memory', summary: 'Conversational companion with relationship memory (preferences, ongoing topics, goals) stored with user consent.', url: 'https://inflection.ai' },
            { year: 2025, provider: 'Notion', product: 'Notion "Memory Blocks"', memoryType: 'Workspace episodic memory', summary: 'Auto-updated personal and team memory pages capturing recurring tasks, project evolution, and prior decisions.', url: 'https://www.notion.so' },
            { year: 2025, provider: 'Descript', product: 'Descript AI', memoryType: 'Multimedia workspace memory', summary: 'Stores speaker profiles, prior edits, voice models, and long-term project context for ongoing editing.', url: 'https://www.descript.com' }
        ];

        // Module 2: Global vs. U.S. Watch Data
        const globalWatchData = {
            providers: ['OpenAI', 'Microsoft', 'Google', 'Anthropic', 'Meta'],
            // Standardized pillar names for display
            pillarNames: {
                'P1': 'P1 – Data Access & Open Standards',
                'P2': 'P2 – Scalable & Safe Workflows',
                'P3': 'P3 – Human Capacity & Trust',
                'P4': 'P4 – Public-Good Alliances',
                'P5': 'P5 – Responsible AI & Governance'
            },
            // Raw data from CSV - exact pillar names as they appear
            assessments: {
                'OpenAI': {
                    'P1 – Data Access & Open Standards': { assessment: 'Mostly proprietary', evidence: 'No native Ed-Fi/CASE support; interoperability handled through SIS vendors.', source: 'Ed-Fi SIS Integration Guide', howToFind: 'Search "Ed-Fi SIS Integration Guide PDF" on Ed-Fi.org', url: 'https://docs.ed-fi.org/getting-started/provider-playbook/implementation/ed-fi-api-integration-architecture-for-data-providers/' },
                    'P2 – Scalable & Safe AI Workflows': { assessment: 'Global-broad (EU carve-outs)', evidence: 'Memory rolled out globally except UK/EU/EEA (2025).', source: 'Memory and New Controls for ChatGPT — June 2025', howToFind: 'Search exact title on OpenAI.com → Blog', url: 'https://openai.com/index/memory-and-new-controls-for-chatgpt/' },
                    'P3 – Human Capacity & Trust': { assessment: 'U.S.-centric; emerging global pilots', evidence: 'Free ChatGPT for Teachers for U.S.; India Learning Accelerator global pilot.', source: 'ChatGPT for Teachers — OpenAI for Education', howToFind: 'Search "ChatGPT for Teachers OpenAI"', url: 'https://iblnews.org/story/openai-releases-chatgpt-for-teachers-providing-them-free-access-until-june-2027' },
                    'P4 – Public-Good Alliances': { assessment: 'Mixed', evidence: 'U.S.-heavy partnerships (AFT, White House), some global initiatives.', source: 'People-First AI Fund Announcement', howToFind: 'Search "People First AI Fund OpenAI"', url: 'https://openai.com/index/people-first-ai-fund/' },
                    'P5 – Responsible AI & Governance': { assessment: 'Emerging global', evidence: 'Youth protections strongest in US/EU; expanding elsewhere.', source: 'OpenAI Safety Card Framework', howToFind: 'Search "OpenAI Safety Cards"', url: 'https://openai.com/index/introducing-the-teen-safety-blueprint/' }
                },
                'Microsoft': {
                    'P1 – Data & Standards': { assessment: 'Mixed (partner-driven)', evidence: 'Ed-Fi ODS/API deployments often run on Azure; alignment via partners.', source: 'Ed-Fi ODS/API on Azure – Reference Architecture', howToFind: 'Search "Ed-Fi ODS on Azure Reference"', url: '' },
                    'P2 – Scalable Workflows': { assessment: 'Staged global rollout', evidence: 'Copilot Memory released region-by-region; Copilot in 170+ markets.', source: 'Microsoft Copilot Release Notes (2025)', howToFind: 'Search "Microsoft Copilot Release Notes 2025"', url: 'https://learn.microsoft.com/en-us/copilot/microsoft-365/release-notes?tabs=all%2Cwin%2Cweb%2Candroidos%2Cappleios%2Cmac' },
                    'P3 – Human Capacity & Trust': { assessment: 'Global-leaning', evidence: 'Global Training Partner Network active worldwide.', source: 'Microsoft Global Training Partner Program', howToFind: 'Search exact title on Microsoft Learn', url: 'https://partner.microsoft.com/en-US/explore/education/gtp' },
                    'P4 – Public-Good Alliances': { assessment: 'Global-strong', evidence: 'UNESCO-aligned digital skill programs; ministry MOUs.', source: 'Microsoft Elevate AI Initiative (20M Training Commitment)', howToFind: 'Search "Microsoft Elevate AI Initiative"', url: 'https://blogs.microsoft.com/on-the-issues/2025/07/09/elevate/' },
                    'P5 – Governance': { assessment: 'Global-consistent', evidence: 'EU AI Act compliance and global governance standards.', source: 'Microsoft Responsible AI Standard v2 (2025)', howToFind: 'Search exact title on Microsoft.com/AI', url: 'https://www.microsoft.com/en-us/ai/responsible-ai' }
                },
                'Google': {
                    'P1 – Data & Standards': { assessment: 'Mixed', evidence: 'Ed-Fi LMS Toolkit supports Classroom sync.', source: 'Ed-Fi LMS Toolkit for Google Classroom', howToFind: 'Search exact title via Ed-Fi.org', url: 'https://docs.ed-fi.org/getting-started/edfi-exchange/technology/ed-fi-lms-toolkit/' },
                    'P2 – Scalable Workflows': { assessment: 'Global-broad', evidence: 'Gemini memory available in 230+ countries.', source: 'Gemini App – Country & Region Availability List', howToFind: 'Search "Gemini App availability countries"', url: 'https://support.google.com/gemini/answer/13575153?hl=en' },
                    'P3 – Human Capacity & Trust': { assessment: 'Global-leaning', evidence: 'Gemini certification & training programs across regions.', source: 'Google for Education – Global Teacher Training Stories', howToFind: 'Search exact title on edu.google.com', url: 'https://developers.google.com/gemini-code-assist/resources/locations-pro-ultra' },
                    'P4 – Public-Good Alliances': { assessment: 'Global-strong', evidence: 'Ministry-scale deployments of Gemini EDU.', source: 'Google for Education Ministry Partnerships', howToFind: 'Search "Google Education ministry partnerships"', url: 'https://edudirectory.withgoogle.com/' },
                    'P5 – Governance': { assessment: 'Emerging global', evidence: 'Strong baseline protections; depth varies regionally.', source: 'Google Workspace for Education – Privacy & Safety Whitepaper', howToFind: 'Search exact title on Google Cloud', url: 'https://edu.google.com/intl/ALL_us/our-values/privacy-security/' }
                },
                'Anthropic': {
                    'P1 – Data & Standards': { assessment: 'Mostly proprietary', evidence: 'No Ed-Fi/CASE schema; relies on AWS Bedrock or implementers.', source: 'AWS Bedrock + Anthropic Integration Notes', howToFind: 'Search "AWS Bedrock Anthropic integration"', url: 'https://aws.amazon.com/blogs/publicsector/claude-for-education-now-available-in-aws-marketplace/' },
                    'P2 – Scalable Workflows': { assessment: 'Global-broad via paid tiers', evidence: 'Claude Memory available for Pro/Max/Team without region restrictions.', source: 'Claude Memory Release Notes (2025)', howToFind: 'Search "Claude Memory Release Notes 2025"', url: 'https://support.claude.com/en/articles/12138966-release-notes' },
                    'P3 – Human Capacity & Trust': { assessment: 'Global-leaning (higher-ed)', evidence: 'Claude for Education used across global faculty.', source: 'Anthropic Education Report (2025)', howToFind: 'Search "Anthropic Education Report"', url: 'https://www.anthropic.com/news/anthropic-education-report-how-educators-use-claude' },
                    'P4 – Public-Good Alliances': { assessment: 'Mixed', evidence: 'Strong U.S. policy presence; fewer global ministry partnerships.', source: 'Anthropic AI Safety & Public Policy Briefings', howToFind: 'Search exact title', url: 'https://www.anthropic.com/news/core-views-on-ai-safety' },
                    'P5 – Governance': { assessment: 'Emerging global', evidence: 'Strong transparency; youth protections still developing globally.', source: 'Claude Safety Overview – Anthropic', howToFind: 'Search "Claude Safety Overview"', url: 'https://www.anthropic.com/news/building-safeguards-for-claude' }
                },
                'Meta': {
                    'P1 – Data Access & Open Standards': { assessment: 'Open OSS ecosystem; limited K–12 alignment', evidence: 'Meta publishes open-source models (Llama, Llama Guard, Llama Stack) with permissive licensing, but provides no native Ed-Fi or CASE support. Interoperability depends on implementers building connectors via Llama Stack or external RAG.', source: 'The future of AI: Built with Llama', howToFind: 'Search "Llama Stack data connectors Meta AI"', url: 'https://ai.meta.com/blog/future-of-ai-built-with-llama/' },
                    'P2 – Scalable & Safe Workflows': { assessment: 'Moderate; agent tools improving', evidence: 'Llama Agents Toolkit adds structured planning, tool-use, and episodic/semantic memory patterns, but Meta lacks a workflow platform equivalent to Copilot Studio or Gemini Flows. Agents rely on developer-managed memory and custom orchestration.', source: 'The Llama 4 herd', howToFind: 'Search "Meta Llama Agents Toolkit 2025"', url: 'https://ai.meta.com/blog/llama-4-multimodal-intelligence/' },
                    'P3 – Human Capacity & Trust': { assessment: 'Global platform reach; minimal educator programs', evidence: 'Meta AI is deployed globally through WhatsApp, Messenger, and Instagram, but no structured K–12 teacher training or educator capacity programs exist, unlike Microsoft GTP or Google EDU. Adoption is consumer-driven, not institutionally supported.', source: 'Meta AI Launch + Global Rollout', howToFind: 'Search "Meta AI global rollout WhatsApp Instagram 2025"', url: 'https://ppc.land/meta-plans-to-use-ai-chat-data-for-ad-targeting-starting-december/' },
                    'P4 – Public-Good Alliances': { assessment: 'Limited education presence', evidence: 'Meta partners largely on digital literacy, misinformation, and safety initiatives, but few ministry-scale education partnerships or AI-in-education public-good programs are documented.', source: 'Meta Digital Literacy & Safety Partnerships', howToFind: 'Search "Meta digital literacy partnerships global"', url: 'https://wethinkdigital.fb.com/partners/' },
                    'P5 – Responsible AI & Governance': { assessment: 'Strong transparency; mixed youth protections', evidence: 'Meta publishes detailed safety research, transparency reports, and open-source safety tools (Llama Guard, CyberSec Eval). Youth/education-specific protections are less formalized than Microsoft\'s Responsible AI Standard.', source: 'Meta AI Safety Research + Llama Guard', howToFind: 'Search "Meta Llama Guard Safety Research"', url: 'https://ai.meta.com/research' }
                }
            },
            // Pillar mapping: maps provider-specific pillar names to standard P1-P5
            pillarMapping: {
                'OpenAI': {
                    'P1 – Data Access & Open Standards': 'P1',
                    'P2 – Scalable & Safe AI Workflows': 'P2',
                    'P3 – Human Capacity & Trust': 'P3',
                    'P4 – Public-Good Alliances': 'P4',
                    'P5 – Responsible AI & Governance': 'P5'
                },
                'Microsoft': {
                    'P1 – Data & Standards': 'P1',
                    'P2 – Scalable Workflows': 'P2',
                    'P3 – Human Capacity & Trust': 'P3',
                    'P4 – Public-Good Alliances': 'P4',
                    'P5 – Governance': 'P5'
                },
                'Google': {
                    'P1 – Data & Standards': 'P1',
                    'P2 – Scalable Workflows': 'P2',
                    'P3 – Human Capacity & Trust': 'P3',
                    'P4 – Public-Good Alliances': 'P4',
                    'P5 – Governance': 'P5'
                },
                'Anthropic': {
                    'P1 – Data & Standards': 'P1',
                    'P2 – Scalable Workflows': 'P2',
                    'P3 – Human Capacity & Trust': 'P3',
                    'P4 – Public-Good Alliances': 'P4',
                    'P5 – Governance': 'P5'
                },
                'Meta': {
                    'P1 – Data Access & Open Standards': 'P1',
                    'P2 – Scalable & Safe Workflows': 'P2',
                    'P3 – Human Capacity & Trust': 'P3',
                    'P4 – Public-Good Alliances': 'P4',
                    'P5 – Responsible AI & Governance': 'P5'
                }
            },
            // Conceptual thresholds: High/Medium/Low only (no numeric scores)
            getUSCentralityLevel: function(assessment) {
                if (assessment.includes('U.S.-centric') || assessment.includes('Mostly proprietary')) {
                    return { level: 'High', color: '#e53e3e' };
                } else if (assessment.includes('Mixed') || assessment.includes('Staged') || assessment.includes('Emerging') || assessment.includes('Moderate') || assessment.includes('Limited') || assessment.includes('Open OSS') || assessment.includes('Strong transparency')) {
                    return { level: 'Medium', color: '#ed8936' };
                } else if (assessment.includes('Global-strong') || assessment.includes('Global-consistent') || assessment.includes('Global-broad') || assessment.includes('Global-leaning') || assessment.includes('Global platform')) {
                    return { level: 'Low', color: '#48bb78' };
                }
                return { level: 'Medium', color: '#ed8936' };
            }
        };

        // Helper function to create collapsible rationale section
        function createCollapsibleRationale(container, htmlContent, title = 'Why This Chart Matters') {
            const rationale = container.appendChild(document.createElement('div'));
            rationale.className = 'chart-rationale';
            
            const header = rationale.appendChild(document.createElement('div'));
            header.className = 'chart-rationale-header';
            
            const titleDiv = header.appendChild(document.createElement('div'));
            titleDiv.className = 'chart-rationale-header-title';
            titleDiv.textContent = title;
            
            const controlDiv = header.appendChild(document.createElement('div'));
            controlDiv.className = 'chart-rationale-header-control';
            
            const icon = controlDiv.appendChild(document.createElement('span'));
            icon.className = 'chart-rationale-header-icon';
            icon.textContent = '▶';
            
            const text = controlDiv.appendChild(document.createElement('span'));
            text.textContent = 'Click to expand';
            
            const contentWrapper = rationale.appendChild(document.createElement('div'));
            contentWrapper.className = 'chart-rationale-content-wrapper';
            contentWrapper.innerHTML = htmlContent;
            
            header.onclick = function() {
                const isExpanded = contentWrapper.classList.contains('expanded');
                if (isExpanded) {
                    contentWrapper.classList.remove('expanded');
                    icon.textContent = '▶';
                    text.textContent = 'Click to expand';
                } else {
                    contentWrapper.classList.add('expanded');
                    icon.textContent = '▼';
                    text.textContent = 'Click to collapse';
                }
            };
            
            return rationale;
        }

        // Module navigation
        function showModule(moduleName) {
            // Hide all modules
            document.querySelectorAll('.dashboard-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Remove active from all buttons
            document.querySelectorAll('.module-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show only the selected module
            const moduleElement = document.getElementById(`module-${moduleName}`);
            if (moduleElement) {
                moduleElement.classList.add('active');
                
                // Activate the clicked button
                document.querySelectorAll('.module-btn').forEach(btn => {
                    if (btn.getAttribute('onclick').includes(`'${moduleName}'`)) {
                        btn.classList.add('active');
                    }
                });
                
                // Render the selected module
                if (moduleName === 'ecosystem') {
                    renderEcosystemModule();
                } else if (moduleName === 'globalwatch') {
                    renderGlobalWatchModule();
                }
                
                // Scroll to the module section
                setTimeout(() => {
                    moduleElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }, 100);
            }
        }

        // Module 1: Ecosystem Moves (includes Memory Architecture)
        function renderEcosystemModule() {
            renderMemoryGrowthChart();
            renderAgentVelocity();
            // Also render Memory Architecture content since it's merged into this module
            renderOpennessMatrix();
            renderRecallDepthChart();
        }

        function renderEcosystemAlerts() {
            const container = document.getElementById('ecosystemAlerts');
            const alerts = dashboardData.ecosystem.alerts;
            
            container.innerHTML = '<div style="font-weight: 700; color: #e2e8f0; margin-bottom: 15px;">Smart Alerts</div>';
            
            alerts.forEach(alert => {
                const alertDiv = document.createElement('div');
                alertDiv.className = `alert-item ${alert.severity === 'high' ? '' : alert.severity === 'medium' ? 'warning' : 'info'}`;
                alertDiv.innerHTML = `
                    <div class="alert-title">${alert.title}</div>
                    <div class="alert-message">${alert.message} - ${alert.date}</div>
                `;
                container.appendChild(alertDiv);
            });
        }

        function renderMemoryGrowthChart() {
            const container = document.getElementById('ecosystemMemoryGrowthChart');
            const width = container.parentElement.clientWidth - 50;
            const height = 450;
            const margin = { top: 40, right: 30, bottom: 80, left: 80 };

            container.innerHTML = '';

            // Create tooltip
            const tooltip = d3.select(container).append('div')
                .attr('class', 'tooltip')
                .style('opacity', 0);

            const svg = d3.select(container)
                .append('svg')
                .attr('width', width)
                .attr('height', height);

            const g = svg.append('g')
                .attr('transform', `translate(${margin.left},${margin.top})`);

            const chartWidth = width - margin.left - margin.right;
            const chartHeight = height - margin.top - margin.bottom;

            const data = dashboardData.ecosystem.memoryGrowthByYear;
            const years = [2023, 2024, 2025];
            const providers = ['Google', 'Microsoft', 'OpenAI', 'Anthropic', 'Meta', 'Non-Hyperscalers'];
            
            // Calculate non-hyperscaler totals by year
            const nonHyperscalerCounts = {
                2023: nonHyperscalerMemoryData.filter(d => d.year === 2023).length,
                2024: nonHyperscalerMemoryData.filter(d => d.year === 2024).length,
                2025: nonHyperscalerMemoryData.filter(d => d.year === 2025).length
            };
            
            const colorScale = d3.scaleOrdinal()
                .domain(providers)
                .range(['#4285f4', '#00a4ef', '#ff6b35', '#d4a574', '#00d4aa', '#9f7aea']);

            // Prepare data for grouped bars (including non-hyperscalers)
            const barData = years.map(year => ({
                year,
                total: data[year].total + nonHyperscalerCounts[year],
                providers: providers.map(provider => {
                    if (provider === 'Non-Hyperscalers') {
                        return { provider, value: nonHyperscalerCounts[year] || 0 };
                    } else {
                        return { provider, value: data[year].byProvider[provider] || 0 };
                    }
                })
            }));

            const xScale = d3.scaleBand()
                .domain(years)
                .range([0, chartWidth])
                .padding(0.2);

            const maxValue = d3.max(barData, d => d.total);
            const yScale = d3.scaleLinear()
                .domain([0, maxValue * 1.15])
                .range([chartHeight, 0]);

            // Grouped bars
            const barWidth = xScale.bandwidth() / providers.length;

            barData.forEach((yearData, yearIdx) => {
                yearData.providers.forEach((providerData, pIdx) => {
                    const x = xScale(yearData.year) + pIdx * barWidth;
                    const barHeight = chartHeight - yScale(providerData.value);
                    
                    const bar = g.append('rect')
                        .attr('x', x)
                        .attr('y', yScale(providerData.value))
                        .attr('width', barWidth - 2)
                        .attr('height', barHeight)
                        .attr('fill', colorScale(providerData.provider))
                        .attr('rx', 4)
                        .attr('cursor', 'pointer')
                        .style('opacity', 0.85);

                    // Value labels on bars
                    if (providerData.value > 0) {
                        g.append('text')
                            .attr('x', x + barWidth / 2)
                            .attr('y', yScale(providerData.value) - 5)
                            .attr('text-anchor', 'middle')
                            .attr('fill', '#e2e8f0')
                            .attr('font-size', '10px')
                            .attr('font-weight', '600')
                            .text(providerData.value);
                    }

                    // Tooltip
                    bar.on('mouseover', function(event) {
                        let growth2023to2025 = 0;
                        if (providerData.provider === 'Non-Hyperscalers') {
                            growth2023to2025 = yearData.year === 2025 ? 
                                ((nonHyperscalerCounts[2025] - nonHyperscalerCounts[2023]) / Math.max(nonHyperscalerCounts[2023], 1) * 100) : 0;
                        } else {
                            growth2023to2025 = yearData.year === 2025 ? 
                                ((data[2025].byProvider[providerData.provider] - data[2023].byProvider[providerData.provider]) / Math.max(data[2023].byProvider[providerData.provider], 1) * 100) : 0;
                        }
                        const totalGrowth2023to2025 = ((barData[2].total - barData[0].total) / barData[0].total * 100);
                        
                        // Get non-hyperscaler product list for tooltip
                        let productList = '';
                        if (providerData.provider === 'Non-Hyperscalers' && providerData.value > 0) {
                            const products = nonHyperscalerMemoryData.filter(d => d.year === yearData.year);
                            productList = `<div class="tooltip-item" style="margin-top: 8px;"><strong>Products:</strong><br/>${products.slice(0, 5).map(p => `• ${p.provider} - ${p.product}`).join('<br/>')}${products.length > 5 ? `<br/>(+ ${products.length - 5} more)` : ''}</div>`;
                        }
                        
                        tooltip.transition().duration(200).style('opacity', 1);
                        tooltip.html(`
                            <div class="tooltip-title">${providerData.provider} - ${yearData.year}</div>
                            <div class="tooltip-item"><strong>Memory Releases:</strong> ${providerData.value}</div>
                            <div class="tooltip-item"><strong>Combined Year Total:</strong> ${yearData.total} releases (hyperscalers + non-hyperscalers)</div>
                            ${yearData.year === 2025 ? `<div class="tooltip-item"><strong>Growth (2023→2025):</strong> ${growth2023to2025 > 0 ? '+' : ''}${growth2023to2025.toFixed(0)}%</div>` : ''}
                            ${productList}
                            ${yearData.year === 2023 ? `<div class="tooltip-item" style="font-size: 0.8rem; color: #667eea; margin-top: 8px;">Baseline year - foundation for memory ecosystem</div>` : ''}
                            ${yearData.year === 2025 && providerData.provider !== 'Non-Hyperscalers' ? `<div class="tooltip-item" style="font-size: 0.8rem; color: #e53e3e; margin-top: 8px;">⚠ ${totalGrowth2023to2025.toFixed(0)}% total growth indicates accelerating lock-in risk</div>` : ''}
                            ${yearData.year === 2025 && providerData.provider === 'Non-Hyperscalers' ? `<div class="tooltip-item" style="font-size: 0.8rem; color: #667eea; margin-top: 8px;">📊 Market view: Assess if portable memory gaps exist for philanthropic investment</div>` : ''}
                        `)
                        .style('left', (event.pageX + 10) + 'px')
                        .style('top', (event.pageY - 10) + 'px');
                        
                        bar.style('opacity', 1);
                    })
                    .on('mouseout', function() {
                        tooltip.transition().duration(200).style('opacity', 0);
                        bar.style('opacity', 0.85);
                    });
                });
            });

            // Total labels above bars
            barData.forEach(yearData => {
                const x = xScale(yearData.year) + xScale.bandwidth() / 2;
                g.append('text')
                    .attr('x', x)
                    .attr('y', yScale(yearData.total) - 10)
                    .attr('text-anchor', 'middle')
                    .attr('fill', '#e2e8f0')
                    .attr('font-size', '14px')
                    .attr('font-weight', '700')
                    .text(yearData.total);
            });

            // Growth annotation (combined total)
            const combinedTotal2023 = data[2023].total + nonHyperscalerCounts[2023];
            const combinedTotal2025 = data[2025].total + nonHyperscalerCounts[2025];
            const growth2023to2025 = ((combinedTotal2025 - combinedTotal2023) / combinedTotal2023 * 100);
            
            g.append('line')
                .attr('x1', xScale(2023))
                .attr('y1', yScale(combinedTotal2023) - 25)
                .attr('x2', xScale(2025))
                .attr('y2', yScale(combinedTotal2025) - 25)
                .attr('stroke', '#48bb78')
                .attr('stroke-width', 2)
                .attr('stroke-dasharray', '5,5');

            g.append('text')
                .attr('x', (xScale(2023) + xScale(2025)) / 2)
                .attr('y', yScale(combinedTotal2025) - 35)
                .attr('text-anchor', 'middle')
                .attr('fill', '#48bb78')
                .attr('font-size', '13px')
                .attr('font-weight', '700')
                .text(`${growth2023to2025 > 0 ? '+' : ''}${growth2023to2025.toFixed(0)}% Growth`);

            // Highlight 2024-2025 jump (combined total)
            const combinedTotal2024 = data[2024].total + nonHyperscalerCounts[2024];
            const jump2024to2025 = ((combinedTotal2025 - combinedTotal2024) / combinedTotal2024 * 100);
            g.append('rect')
                .attr('x', xScale(2024) - 5)
                .attr('y', 0)
                .attr('width', xScale.bandwidth() + 10)
                .attr('height', chartHeight)
                .attr('fill', 'rgba(102, 126, 234, 0.05)')
                .attr('stroke', '#667eea')
                .attr('stroke-width', 1)
                .attr('stroke-dasharray', '3,3')
                .style('pointer-events', 'none');

            g.append('text')
                .attr('x', xScale(2025) + xScale.bandwidth() / 2)
                .attr('y', chartHeight - 20)
                .attr('text-anchor', 'middle')
                .attr('fill', '#ffffff')
                .attr('font-size', '11px')
                .attr('font-weight', '600')
                .text(`83% jump from 2024`);

            // Axes
            g.append('g')
                .attr('transform', `translate(0,${chartHeight})`)
                .call(d3.axisBottom(xScale))
                .selectAll('text')
                .attr('fill', '#a0aec0')
                .style('font-size', '12px');

            g.append('g')
                .call(d3.axisLeft(yScale).ticks(8))
                .selectAll('text')
                .attr('fill', '#a0aec0')
                .style('font-size', '11px');

            // Axis labels
            g.append('text')
                .attr('x', chartWidth / 2)
                .attr('y', chartHeight + 50)
                .style('text-anchor', 'middle')
                .attr('fill', '#a0aec0')
                .style('font-size', '14px')
                .text('Year');

            g.append('text')
                .attr('transform', 'rotate(-90)')
                .attr('y', -60)
                .attr('x', -chartHeight / 2)
                .style('text-anchor', 'middle')
                .attr('fill', '#a0aec0')
                .style('font-size', '14px')
                .text('Number of Memory-Related Releases');

            // Legend
            const legend = container.appendChild(document.createElement('div'));
            legend.className = 'chart-legend';
            providers.forEach(provider => {
                let total = 0;
                if (provider === 'Non-Hyperscalers') {
                    total = nonHyperscalerCounts[2023] + nonHyperscalerCounts[2024] + nonHyperscalerCounts[2025];
                } else {
                    total = (data[2023].byProvider[provider] || 0) + (data[2024].byProvider[provider] || 0) + (data[2025].byProvider[provider] || 0);
                }
                const item = document.createElement('div');
                item.className = 'legend-item';
                item.innerHTML = `
                    <div class="legend-color" style="background: ${colorScale(provider)}"></div>
                    <div class="legend-text">${provider} (${total} total)</div>
                `;
                legend.appendChild(item);
            });

            // Info panel
            const infoPanel = container.appendChild(document.createElement('div'));
            infoPanel.className = 'chart-info';
            infoPanel.innerHTML = `
                <strong>Chart Details:</strong> Growth of memory-related product releases by provider from 2023 to 2025. 
                Combined releases (Hyperscalers + Non-Hyperscalers): <strong>${combinedTotal2023} in 2023</strong> → <strong>${combinedTotal2024} in 2024</strong> → <strong>${combinedTotal2025} in 2025</strong>. 
                This represents a <strong>${growth2023to2025 > 0 ? '+' : ''}${growth2023to2025.toFixed(0)}% increase</strong> from 2023 to 2025. Hyperscalers: ${data[2023].total} → ${data[2025].total}. Non-Hyperscalers: ${nonHyperscalerCounts[2023]} → ${nonHyperscalerCounts[2025]}. Compare to assess if market is solving portable memory or if gaps exist.
            `;

            // Product Breakdown Section (Collapsible)
            const breakdownSection = container.appendChild(document.createElement('div'));
            breakdownSection.style.cssText = 'margin-top: 20px; background: #1a202c; border: 2px solid #4a5568; border-radius: 12px; padding: 15px;';
            
            const breakdownHeader = breakdownSection.appendChild(document.createElement('div'));
            breakdownHeader.style.cssText = 'cursor: pointer; user-select: none; display: flex; align-items: center; justify-content: space-between; padding: 10px 12px; background: #2d3748; border-radius: 6px; margin-bottom: 0; transition: all 0.3s ease; border: 1px solid #4a5568;';
            breakdownHeader.onmouseenter = function() {
                breakdownHeader.style.background = '#3d4758';
                breakdownHeader.style.borderColor = '#667eea';
            };
            breakdownHeader.onmouseleave = function() {
                breakdownHeader.style.background = '#2d3748';
                breakdownHeader.style.borderColor = '#4a5568';
            };
            breakdownHeader.onclick = function() {
                const isCollapsed = breakdownContent.style.display === 'none';
                breakdownContent.style.display = isCollapsed ? 'block' : 'none';
                expandIcon.textContent = isCollapsed ? '▼' : '▶';
                expandText.textContent = isCollapsed ? 'Click to collapse' : 'Click to expand';
                breakdownHeader.style.marginBottom = isCollapsed ? '15px' : '0';
            };
            
            const breakdownTitle = breakdownHeader.appendChild(document.createElement('div'));
            breakdownTitle.style.cssText = 'font-size: 0.95rem; font-weight: 700; color: #667eea; display: flex; align-items: center; gap: 8px;';
            breakdownTitle.innerHTML = '<span>Product Breakdown: How Each Memory Product is Counted</span>';
            
            const expandControl = breakdownHeader.appendChild(document.createElement('div'));
            expandControl.style.cssText = 'display: flex; align-items: center; gap: 8px; font-size: 0.75rem; color: #a0aec0;';
            
            const expandIcon = expandControl.appendChild(document.createElement('span'));
            expandIcon.style.cssText = 'font-size: 0.9rem; color: #667eea; font-weight: 700;';
            expandIcon.textContent = '▶';
            
            const expandText = expandControl.appendChild(document.createElement('span'));
            expandText.textContent = 'Click to expand';
            
            const breakdownContent = breakdownSection.appendChild(document.createElement('div'));
            breakdownContent.style.cssText = 'display: none;'; // Collapsed by default

            const productsData = dashboardData.ecosystem.memoryProductsByYear;
            const breakdownYears = [2023, 2024, 2025];

            breakdownYears.forEach(year => {
                const yearSection = breakdownContent.appendChild(document.createElement('div'));
                yearSection.style.cssText = 'margin-bottom: 18px;';
                
                // Count hyperscaler and non-hyperscaler products
                const hyperscalerCount = productsData[year].length;
                const nonHyperscalerCount = nonHyperscalerMemoryData.filter(d => d.year === year).length;
                const totalCount = hyperscalerCount + nonHyperscalerCount;
                
                const yearHeader = yearSection.appendChild(document.createElement('div'));
                yearHeader.style.cssText = 'font-size: 0.9rem; font-weight: 700; color: #e2e8f0; margin-bottom: 10px; display: flex; align-items: center; gap: 8px;';
                yearHeader.innerHTML = `
                    <span>${year}</span>
                    <span style="font-size: 0.75rem; color: #667eea; font-weight: 600;">(${totalCount} products: ${hyperscalerCount} hyperscalers, ${nonHyperscalerCount} non-hyperscalers)</span>
                `;

                // Group hyperscaler products by provider
                const byProvider = {};
                productsData[year].forEach(product => {
                    if (!byProvider[product.provider]) {
                        byProvider[product.provider] = [];
                    }
                    byProvider[product.provider].push(product);
                });

                // Display hyperscaler products
                Object.keys(byProvider).forEach(provider => {
                    const providerSection = yearSection.appendChild(document.createElement('div'));
                    providerSection.style.cssText = 'margin-bottom: 12px; padding: 10px; background: #2d3748; border-radius: 6px; border-left: 3px solid ' + colorScale(provider) + ';';
                    
                    const providerHeader = providerSection.appendChild(document.createElement('div'));
                    providerHeader.style.cssText = 'font-weight: 700; color: #e2e8f0; margin-bottom: 8px; font-size: 0.85rem;';
                    providerHeader.textContent = `${provider} (${byProvider[provider].length} product${byProvider[provider].length > 1 ? 's' : ''})`;

                    byProvider[provider].forEach((product, idx) => {
                        const productDiv = providerSection.appendChild(document.createElement('div'));
                        productDiv.style.cssText = 'padding: 8px; margin-bottom: 6px; background: #1a202c; border-radius: 4px; border: 1px solid #4a5568;';
                        
                        const productName = productDiv.appendChild(document.createElement('div'));
                        productName.style.cssText = 'font-weight: 700; color: #e2e8f0; margin-bottom: 4px; font-size: 0.8rem;';
                        productName.textContent = `${idx + 1}. ${product.product}`;

                        const productDetails = productDiv.appendChild(document.createElement('div'));
                        productDetails.style.cssText = 'font-size: 0.7rem; color: #a0aec0; line-height: 1.4;';
                        const sourceLink = product.sourceUrl || (product.source ? `https://www.google.com/search?q=${encodeURIComponent(product.source)}` : '');
                        productDetails.innerHTML = `
                            <div style="margin-bottom: 2px;"><strong>Date:</strong> ${new Date(product.date).toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' })}</div>
                            <div style="margin-bottom: 2px;"><strong>Description:</strong> ${product.description}</div>
                            <div style="margin-bottom: 2px;"><strong>Category:</strong> <span style="color: #667eea;">${product.category}</span></div>
                            ${product.source ? `<div style="margin-top: 4px;"><strong>Source:</strong> <a href="${sourceLink}" target="_blank" rel="noopener noreferrer" style="color: #48bb78; font-style: italic; text-decoration: underline;">${product.source}</a></div>` : ''}
                        `;
                    });
                });

                // Add non-hyperscaler products section
                const nonHyperscalerProducts = nonHyperscalerMemoryData.filter(d => d.year === year);
                if (nonHyperscalerProducts.length > 0) {
                    const nonHyperscalerSection = yearSection.appendChild(document.createElement('div'));
                    nonHyperscalerSection.style.cssText = 'margin-bottom: 12px; padding: 10px; background: #2d3748; border-radius: 6px; border-left: 3px solid #9f7aea;';
                    
                    const nonHyperscalerHeader = nonHyperscalerSection.appendChild(document.createElement('div'));
                    nonHyperscalerHeader.style.cssText = 'font-weight: 700; color: #e2e8f0; margin-bottom: 8px; font-size: 0.85rem;';
                    nonHyperscalerHeader.textContent = `Non-Hyperscalers (${nonHyperscalerProducts.length} product${nonHyperscalerProducts.length > 1 ? 's' : ''})`;

                    // Group non-hyperscaler products by provider
                    const nonHyperscalerByProvider = {};
                    nonHyperscalerProducts.forEach(product => {
                        if (!nonHyperscalerByProvider[product.provider]) {
                            nonHyperscalerByProvider[product.provider] = [];
                        }
                        nonHyperscalerByProvider[product.provider].push(product);
                    });

                    Object.keys(nonHyperscalerByProvider).forEach(provider => {
                        const providerSubSection = nonHyperscalerSection.appendChild(document.createElement('div'));
                        providerSubSection.style.cssText = 'margin-bottom: 8px; padding: 8px; background: #1a202c; border-radius: 4px; border: 1px solid #4a5568;';
                        
                        const providerSubHeader = providerSubSection.appendChild(document.createElement('div'));
                        providerSubHeader.style.cssText = 'font-weight: 600; color: #cbd5e0; margin-bottom: 6px; font-size: 0.75rem;';
                        providerSubHeader.textContent = `${provider}`;

                        nonHyperscalerByProvider[provider].forEach((product, idx) => {
                            const productDiv = providerSubSection.appendChild(document.createElement('div'));
                            productDiv.style.cssText = 'padding: 6px; margin-bottom: 4px; background: #0f1419; border-radius: 3px; border-left: 2px solid #9f7aea;';
                            
                            const productName = productDiv.appendChild(document.createElement('div'));
                            productName.style.cssText = 'font-weight: 600; color: #e2e8f0; margin-bottom: 3px; font-size: 0.75rem;';
                            productName.innerHTML = `${idx + 1}. <a href="${product.url}" target="_blank" rel="noopener noreferrer" style="color: #9f7aea; text-decoration: underline;">${product.product}</a>`;

                            const productDetails = productDiv.appendChild(document.createElement('div'));
                            productDetails.style.cssText = 'font-size: 0.7rem; color: #a0aec0; line-height: 1.4;';
                            productDetails.innerHTML = `
                                <div style="margin-bottom: 2px;"><strong>Memory Type:</strong> <span style="color: #667eea;">${product.memoryType}</span></div>
                                <div style="margin-bottom: 2px;"><strong>Summary:</strong> ${product.summary}</div>
                                <div style="margin-top: 4px;"><strong>Source:</strong> <a href="${product.url}" target="_blank" rel="noopener noreferrer" style="color: #48bb78; font-style: italic; text-decoration: underline;">${product.url}</a></div>
                            `;
                        });
                    });
                }
            });

            // Methodology note
            const methodologyNote = breakdownContent.appendChild(document.createElement('div'));
            methodologyNote.style.cssText = 'margin-top: 15px; padding-top: 12px; border-top: 1px solid #4a5568; font-size: 0.75rem; color: #a0aec0; line-height: 1.5;';
            methodologyNote.innerHTML = `
                <strong style="color: #667eea;">Counting Methodology:</strong> Each product is counted as a distinct memory-related release when it:
                <ul style="margin-top: 6px; padding-left: 18px; list-style: disc; font-size: 0.75rem;">
                    <li>Introduces new memory capabilities (APIs, storage, retrieval)</li>
                    <li>Expands memory capacity or functionality in existing products</li>
                    <li>Integrates memory into new application contexts (email, documents, collaboration)</li>
                    <li>Adds memory governance or portability features</li>
                </ul>
                <p style="margin-top: 8px; font-style: italic; font-size: 0.75rem;">Minor updates, bug fixes, and feature enhancements that don't add new memory capabilities are not counted. Each product represents a distinct announcement or release event.</p>
            `;

        }

        function renderAgentVelocity() {
            const container = document.getElementById('ecosystemAgentVelocityChart');
            const width = container.parentElement.clientWidth - 50;
            const height = 450;
            const margin = { top: 40, right: 30, bottom: 80, left: 70 };

            container.innerHTML = '';

            // Create tooltip
            const tooltip = d3.select(container).append('div')
                .attr('class', 'tooltip')
                .style('opacity', 0);

            const svg = d3.select(container)
                .append('svg')
                .attr('width', width)
                .attr('height', height);

            const g = svg.append('g')
                .attr('transform', `translate(${margin.left},${margin.top})`);

            const chartWidth = width - margin.left - margin.right;
            const chartHeight = height - margin.top - margin.bottom;

            const data = dashboardData.ecosystem.agentFeatures;
            const years = [2023, 2024, 2025];
            const providers = data.map(d => d.provider);
            
            // Calculate trends
            const trends = data.map(d => {
                const values = [d['2023'], d['2024'], d['2025']];
                const total = values.reduce((a, b) => a + b, 0);
                const avg = total / values.length;
                const trend = d['2025'] > d['2023'] ? 'increasing' : d['2025'] < d['2023'] ? 'decreasing' : 'stable';
                const growth = ((d['2025'] - d['2023']) / Math.max(d['2023'], 1)) * 100;
                return { provider: d.provider, trend, growth, total, avg };
            });

            const xScale = d3.scaleBand()
                .domain(years)
                .range([0, chartWidth])
                .padding(0.2);

            const maxValue = d3.max(data, d => Math.max(d['2023'], d['2024'], d['2025']));
            const yScale = d3.scaleLinear()
                .domain([0, maxValue * 1.1])
                .range([chartHeight, 0]);

            const colorScale = d3.scaleOrdinal()
                .domain(providers)
                .range(['#4285f4', '#00a4ef', '#ff6b35', '#d4a574', '#00d4aa']);

            // Grouped bars
            const barWidth = xScale.bandwidth() / providers.length;

            years.forEach((year) => {
                providers.forEach((provider, pIdx) => {
                    const value = data[pIdx][String(year)];
                    const x = xScale(year) + pIdx * barWidth;
                    const barHeight = chartHeight - yScale(value);
                    
                    const bar = g.append('rect')
                        .attr('x', x)
                        .attr('y', yScale(value))
                        .attr('width', barWidth - 2)
                        .attr('height', barHeight)
                        .attr('fill', colorScale(provider))
                        .attr('rx', 4)
                        .attr('cursor', 'pointer')
                        .style('opacity', 0.8);

                    // Value label
                    if (value > 0) {
                        g.append('text')
                            .attr('x', x + barWidth / 2)
                            .attr('y', yScale(value) - 5)
                            .attr('text-anchor', 'middle')
                            .attr('fill', '#e2e8f0')
                            .attr('font-size', '11px')
                            .attr('font-weight', '600')
                            .text(value);
                    }

                    // Tooltip
                    bar.on('mouseover', function(event) {
                        const trend = trends[pIdx];
                        tooltip.transition().duration(200).style('opacity', 1);
                        tooltip.html(`
                            <div class="tooltip-title">${provider} - ${year}</div>
                            <div class="tooltip-item"><strong>Agent Features:</strong> ${value}</div>
                            <div class="tooltip-item"><strong>Total (2023-2025):</strong> ${trend.total} features</div>
                            <div class="tooltip-item"><strong>Average per Year:</strong> ${trend.avg.toFixed(1)}</div>
                            <div class="tooltip-item"><strong>Trend:</strong> <span style="color: ${trend.trend === 'increasing' ? '#48bb78' : trend.trend === 'decreasing' ? '#e53e3e' : '#a0aec0'}">${trend.trend}</span></div>
                            <div class="tooltip-item"><strong>Growth (2023→2025):</strong> ${trend.growth > 0 ? '+' : ''}${trend.growth.toFixed(0)}%</div>
                            <div class="tooltip-item" style="margin-top: 8px; font-size: 0.8rem; color: #667eea;">
                                ${trend.trend === 'increasing' ? '↗ Strategic prioritization increasing' : 
                                  trend.trend === 'decreasing' ? '↘ Feature development slowing' : 
                                  '→ Steady development pace'}
                            </div>
                        `)
                        .style('left', (event.pageX + 10) + 'px')
                        .style('top', (event.pageY - 10) + 'px');
                        
                        bar.style('opacity', 1);
                    })
                    .on('mouseout', function() {
                        tooltip.transition().duration(200).style('opacity', 0);
                        bar.style('opacity', 0.8);
                    });
                });
            });

            // Add trend lines for each provider
            providers.forEach((provider, pIdx) => {
                const trendData = years.map(year => ({
                    year: year,
                    value: data[pIdx][String(year)],
                    x: xScale(year) + xScale.bandwidth() / 2
                }));

                const line = d3.line()
                    .x(d => d.x)
                    .y(d => yScale(d.value))
                    .curve(d3.curveMonotoneX);

                g.append('path')
                    .datum(trendData)
                    .attr('fill', 'none')
                    .attr('stroke', colorScale(provider))
                    .attr('stroke-width', 2)
                    .attr('stroke-dasharray', '3,3')
                    .attr('opacity', 0.4)
                    .attr('d', line);
            });

            // Axes
            g.append('g')
                .attr('transform', `translate(0,${chartHeight})`)
                .call(d3.axisBottom(xScale))
                .selectAll('text')
                .attr('fill', '#a0aec0')
                .style('font-size', '12px');

            g.append('g')
                .call(d3.axisLeft(yScale).ticks(8))
                .selectAll('text')
                .attr('fill', '#a0aec0')
                .style('font-size', '11px');

            // Axis labels
            g.append('text')
                .attr('x', chartWidth / 2)
                .attr('y', chartHeight + 50)
                .style('text-anchor', 'middle')
                .attr('fill', '#a0aec0')
                .style('font-size', '14px')
                .text('Year');

            g.append('text')
                .attr('transform', 'rotate(-90)')
                .attr('y', -50)
                .attr('x', -chartHeight / 2)
                .style('text-anchor', 'middle')
                .attr('fill', '#a0aec0')
                .style('font-size', '14px')
                .text('Number of Agent Features');

            // Legend
            const legend = container.appendChild(document.createElement('div'));
            legend.className = 'chart-legend';
            providers.forEach(provider => {
                const trend = trends.find(t => t.provider === provider);
                const item = document.createElement('div');
                item.className = 'legend-item';
                item.innerHTML = `
                    <div class="legend-color" style="background: ${colorScale(provider)}"></div>
                    <div class="legend-text">${provider} (${trend.trend === 'increasing' ? '↗' : trend.trend === 'decreasing' ? '↘' : '→'} ${trend.total} total)</div>
                `;
                legend.appendChild(item);
            });

            // Info panel
            const infoPanel = container.appendChild(document.createElement('div'));
            infoPanel.className = 'chart-info';
            const topProvider = trends.reduce((a, b) => b.total > a.total ? b : a);
            infoPanel.innerHTML = `
                <strong>Chart Details:</strong> Agent feature velocity by provider and year (2023-2025). Trend lines (dashed) show development trajectory.
                Hover over bars for detailed metrics. <strong>${topProvider.provider}</strong> leads with ${topProvider.total} total agent features across 2023-2025.
                This chart helps detect strategic prioritization shifts and competitive positioning.
            `;

            // Feature Breakdown Section (Collapsible)
            const breakdownSection = container.appendChild(document.createElement('div'));
            breakdownSection.style.cssText = 'margin-top: 20px; background: #1a202c; border: 2px solid #4a5568; border-radius: 12px; padding: 15px;';
            
            const breakdownHeader = breakdownSection.appendChild(document.createElement('div'));
            breakdownHeader.style.cssText = 'cursor: pointer; user-select: none; display: flex; align-items: center; justify-content: space-between; padding: 10px 12px; background: #2d3748; border-radius: 6px; margin-bottom: 0; transition: all 0.3s ease; border: 1px solid #4a5568;';
            breakdownHeader.onmouseenter = function() {
                breakdownHeader.style.background = '#3d4758';
                breakdownHeader.style.borderColor = '#667eea';
            };
            breakdownHeader.onmouseleave = function() {
                breakdownHeader.style.background = '#2d3748';
                breakdownHeader.style.borderColor = '#4a5568';
            };
            breakdownHeader.onclick = function() {
                const isCollapsed = breakdownContent.style.display === 'none';
                breakdownContent.style.display = isCollapsed ? 'block' : 'none';
                expandIcon.textContent = isCollapsed ? '▼' : '▶';
                expandText.textContent = isCollapsed ? 'Click to collapse' : 'Click to expand';
                breakdownHeader.style.marginBottom = isCollapsed ? '15px' : '0';
            };
            
            const breakdownTitle = breakdownHeader.appendChild(document.createElement('div'));
            breakdownTitle.style.cssText = 'font-size: 0.95rem; font-weight: 700; color: #667eea; display: flex; align-items: center; gap: 8px;';
            breakdownTitle.textContent = 'Feature Breakdown by Provider & Year';
            
            const expandControl = breakdownHeader.appendChild(document.createElement('div'));
            expandControl.style.cssText = 'display: flex; align-items: center; gap: 8px; font-size: 0.75rem; color: #a0aec0;';
            
            const expandIcon = expandControl.appendChild(document.createElement('span'));
            expandIcon.style.cssText = 'font-size: 0.9rem; color: #667eea; font-weight: 700;';
            expandIcon.textContent = '▶';
            
            const expandText = expandControl.appendChild(document.createElement('span'));
            expandText.textContent = 'Click to expand';
            
            const breakdownContent = breakdownSection.appendChild(document.createElement('div'));
            breakdownContent.style.cssText = 'display: none;'; // Collapsed by default

            // Feature data from CSV organized by year
            const featureData = [
                // 2023
                { provider: 'Google', year: 2023, quarter: 'Q3', feature: 'Duet AI for Developers', angle: 'IDE agents', description: 'Context-aware code completion & task suggestions in IDEs.', source: 'Google Cloud Next \'23', url: 'https://cloud.google.com/blog/products/application-development/introducing-duet-ai-for-developers' },
                { provider: 'Google', year: 2023, quarter: 'Q2', feature: 'Duet AI for Workspace (Preview)', angle: 'Workflow suggestions', description: 'Early multi-app task suggestions—precursor to agent workflows.', source: 'Google Cloud', url: 'https://cloud.google.com/blog/products/application-development/introducing-duet-ai-for-developers' },
                { provider: 'Microsoft', year: 2023, quarter: 'Q4', feature: 'Copilot Studio (Launch)', angle: 'No-code agent builder', description: 'First release of agent creation, tools, connectors, memory-like state.', source: 'Ignite 2023', url: 'https://learn.microsoft.com/en-us/power-platform/release-plan/2023wave2/articles/2023wave2/microsoft-copilot-studio/' },
                { provider: 'OpenAI', year: 2023, quarter: 'Q2', feature: 'Function Calling', angle: 'Reliable tool-use', description: 'First major tool-use API enabling early agent patterns.', source: 'OpenAI Blog', url: 'https://openai.com/blog/function-calling-and-other-api-updates' },
                { provider: 'OpenAI', year: 2023, quarter: 'Q4', feature: 'GPTs (Custom GPTs)', angle: 'Multi-tool workflows', description: 'Users build mini agents with tools, knowledge, instructions.', source: 'DevDay 2023', url: 'https://openai.com/blog/introducing-gpts' },
                { provider: 'OpenAI', year: 2023, quarter: 'Q4', feature: 'Assistants API', angle: 'Stateful multi-step agents', description: 'Vector stores, tool use, code interpreter, threads.', source: 'DevDay 2023', url: 'https://platform.openai.com/docs/assistants/migration' },
                { provider: 'Anthropic', year: 2023, quarter: 'Q1', feature: 'Claude 1.3 + Instant', angle: 'Tool-use improvements', description: 'Faster grounding for routing/triage agent tasks.', source: 'Anthropic', url: 'https://www.anthropic.com/news' },
                { provider: 'Anthropic', year: 2023, quarter: 'Q2', feature: 'Constitutional AI (expanded)', angle: 'Safety scaffolding', description: 'Critique/revision loops foundational for stable agents.', source: 'Anthropic Papers', url: 'https://www.anthropic.com/news/claudes-constitution' },
                { provider: 'Anthropic', year: 2023, quarter: 'Q4', feature: 'Claude 2.1 (200k context)', angle: 'Long-horizon planning', description: 'Enables multi-document and long-step agent workflows.', source: 'Anthropic', url: 'https://www.anthropic.com/news' },
                { provider: 'Meta', year: 2023, quarter: 'Q2', feature: 'LLaMA 1', angle: 'Developer-hosted memory', description: 'Sparked open-agent ecosystems with externalized memory.', source: 'Meta', url: 'https://ai.meta.com/blog/llama/' },
                { provider: 'Meta', year: 2023, quarter: 'Q3', feature: 'LLaMA 2', angle: 'Tool-use + safety', description: 'Strengthened open tool APIs enabling agent frameworks.', source: 'Meta', url: 'https://ai.meta.com/llama/' },
                { provider: 'Meta', year: 2023, quarter: 'Q3', feature: 'Agentic Patterns (Research)', angle: 'Agent workflow patterns', description: 'Planning, memory, tool-use research adopted widely.', source: 'FAIR', url: 'https://ai.meta.com/research/' },
                // 2024
                { provider: 'Microsoft', year: 2024, quarter: 'Q2', feature: 'Semantic Kernel Updates', angle: 'Developer orchestration SDK', description: 'Planning, memories, connectors for multi-step agents.', source: 'GitHub', url: 'https://github.com/microsoft/semantic-kernel' },
                { provider: 'Microsoft', year: 2024, quarter: 'Q3', feature: 'Copilot Agents (Azure AI Studio)', angle: 'Enterprise agents', description: 'Long-running agents, scheduling, monitoring in Azure.', source: 'Inspire 2024', url: 'https://azure.microsoft.com/en-us/blog' },
                { provider: 'OpenAI', year: 2024, quarter: 'Q2', feature: 'ReAct & Structured Outputs', angle: 'Agent workflow reliability', description: 'Improves multi-step planning, JSON output fidelity.', source: 'OpenAI Blog', url: 'https://openai.com/blog' },
                { provider: 'OpenAI', year: 2024, quarter: 'Q3', feature: 'o1 / o1-mini', angle: 'Reasoning models for agents', description: 'Boosts chain-of-thought and tool-use reasoning depth.', source: 'OpenAI', url: 'https://openai.com/index/openai-o1-mini-advancing-cost-efficient-reasoning/' },
                { provider: 'Anthropic', year: 2024, quarter: 'Q1', feature: 'Computer Use (Preview)', angle: 'Desktop automation', description: 'First public demo of Claude controlling desktop apps.', source: 'Anthropic', url: 'https://www.anthropic.com/news' },
                { provider: 'Anthropic', year: 2024, quarter: 'Q3', feature: 'Claude 3 Family', angle: 'Agent reasoning upgrades', description: 'Planning, tool use, enterprise workflows.', source: 'Anthropic', url: 'https://www.anthropic.com/news/claude-3-family' },
                { provider: 'Meta', year: 2024, quarter: 'Q2', feature: 'LLaMA 3', angle: 'Planning + multimodal', description: 'Better structured output + planning for agent workflows.', source: 'Meta', url: 'https://engineering.fb.com/2024/08/21/production-engineering/bringing-llama-3-to-life/' },
                { provider: 'Meta', year: 2024, quarter: 'Q4', feature: 'Ray-Ban Meta AI v1', angle: 'On-device contextual memory', description: 'Early version of vision agent with ephemeral recall.', source: 'Meta Connect', url: 'https://about.fb.com/news' },
                { provider: 'Meta', year: 2024, quarter: 'Q4', feature: 'Agentic Patterns (Research)', angle: 'Agent workflow patterns', description: 'Planning, memory, tool-use research adopted widely.', source: 'FAIR', url: 'https://ai.meta.com/research/' },
                // 2025
                { provider: 'Google', year: 2025, quarter: 'Q2', feature: 'Workspace Flows for Gemini', angle: 'Orchestrated workflows', description: 'Natural-language workflows auto-generated across Workspace & third-party tools.', source: 'Google Workspace', url: 'https://workspace.google.com/blog/product-announcements/new-ai-drives-business-results' },
                { provider: 'Google', year: 2025, quarter: 'Q4', feature: 'Gemini Agent (Gemini 3)', angle: 'End-to-end task agents', description: 'Multi-step agent executes workflows across Gmail/Calendar/Docs/Web.', source: 'Reuters + Product Deep Dives', url: 'https://medium.com/%40roman_fedyskyi/google-releases-gemini-3-with-ai-agent-for-multi-step-tasks-ca87a62965cc' },
                { provider: 'Google', year: 2025, quarter: 'Q4', feature: 'Antigravity IDE', angle: 'Agent-first developer environment', description: 'Autonomous coding agents manage terminal/editor/browser tasks.', source: 'Wikipedia', url: 'https://en.wikipedia.org/wiki/Google_Antigravity' },
                { provider: 'Google', year: 2025, quarter: 'Q4', feature: 'Gemini API — JSON Schema', angle: 'Agent interface reliability', description: 'Schema enforcement improves agent-to-agent handoff and workflow chaining.', source: 'Android Central', url: 'https://www.androidcentral.com/apps-software/ai/google-is-making-it-easier-to-use-the-gemini-api-in-multi-agent-workflows' },
                { provider: 'Microsoft', year: 2025, quarter: 'Q1', feature: 'Autonomous Agents GA', angle: 'Autonomous workflows', description: 'Copilot Studio supports agents acting on events without prompts.', source: 'Microsoft', url: 'https://www.microsoft.com/en-us/microsoft-copilot/blog/copilot-studio/whats-new-in-copilot-studio-march-2025/' },
                { provider: 'Microsoft', year: 2025, quarter: 'Q1', feature: 'Agent Flows', angle: 'Visual orchestration', description: 'Drag-and-drop logic for agent pipelines and triggers.', source: 'Microsoft', url: 'https://www.microsoft.com/en-us/microsoft-copilot/blog/copilot-studio/whats-new-in-copilot-studio-march-2025/' },
                { provider: 'Microsoft', year: 2025, quarter: 'Q1', feature: 'Generative Orchestration GA', angle: 'Multi-tool orchestration', description: 'Copilot chooses tools and executes multi-step agent tasks dynamically.', source: 'Microsoft', url: 'https://www.microsoft.com/en-us/microsoft-copilot/blog/copilot-studio/whats-new-in-copilot-studio-march-2025/' },
                { provider: 'Microsoft', year: 2025, quarter: 'Q2', feature: 'Azure AI Foundry Integration', angle: 'Enterprise agent hosting', description: 'Agents deploy across enterprise data systems with unified governance.', source: 'Partner Explainer', url: 'https://www.serverless-solutions.com/microsoft-copilot-studio-expands-with-new-features/' },
                { provider: 'Microsoft', year: 2025, quarter: 'Q3', feature: 'Build/Manage Agents at Scale', angle: 'Observability + scale', description: 'Full agent lifecycle management: monitoring, measuring, governance.', source: 'Microsoft', url: 'https://www.microsoft.com/en-us/microsoft-copilot/blog/copilot-studio/whats-new-in-copilot-studio-september-2025/' },
                { provider: 'Microsoft', year: 2025, quarter: 'Q4', feature: 'Governance & Performance', angle: 'Operational safety', description: 'Hardened monitoring, reliability checks, and governance for agents.', source: 'Microsoft', url: 'https://www.microsoft.com/en-us/microsoft-copilot/blog/copilot-studio/whats-new-in-copilot-studio-october-2025/' },
                { provider: 'Microsoft', year: 2025, quarter: 'Q4', feature: 'Work IQ for Agents', angle: 'Enterprise grounding', description: 'Agent grounding in permissions, labels, compliance, audit logs.', source: 'Ignite 2025', url: 'https://www.microsoft.com/en-us/microsoft-365/blog/2025/11/18/microsoft-ignite-2025-copilot-and-agents-built-to-power-the-frontier-firm/' },
                { provider: 'OpenAI', year: 2025, quarter: 'Q1', feature: 'Operator', angle: 'Browser-use agent', description: 'Autonomous agent performs tasks in a virtualized browser environment.', source: 'OpenAI', url: 'https://openai.com/index/introducing-operator/' },
                { provider: 'OpenAI', year: 2025, quarter: 'Q1', feature: 'Responses API', angle: 'Core agent API', description: 'Foundation for multi-step, multi-tool agent workflows.', source: 'OpenAI', url: 'https://openai.com/index/new-tools-for-building-agents/' },
                { provider: 'OpenAI', year: 2025, quarter: 'Q2', feature: 'ChatGPT Codex Agent', angle: 'Code-use agent', description: 'Coding agent executes tests, proposes PRs, answers repo queries.', source: 'OpenAI', url: 'https://openai.com/index/introducing-codex/' },
                { provider: 'OpenAI', year: 2025, quarter: 'Q3', feature: 'ChatGPT Multi-step Agent', angle: 'Generalist workflow agent', description: 'Planning + execution of long-horizon multi-step tasks.', source: 'The Verge', url: 'https://www.theverge.com/ai-artificial-intelligence/709158/openai-new-release-chatgpt-agent-operator-deep-research' },
                { provider: 'OpenAI', year: 2025, quarter: 'Q4', feature: 'AgentKit', angle: 'Developer agent framework', description: 'Create, orchestrate, and monitor complex agent workflows.', source: 'DevDay 2025', url: 'https://openai.com/index/introducing-agentkit/' },
                { provider: 'Anthropic', year: 2025, quarter: 'Q3', feature: 'Claude Desktop', angle: 'Permissioned desktop agent', description: 'Persistent agent interacts with local tools and documents securely.', source: 'Skywork', url: 'https://skywork.ai/blog/ai-agent/claude-desktop-ai-workflows-2025' },
                { provider: 'Anthropic', year: 2025, quarter: 'Q3', feature: 'Claude Computer Use 2025', angle: 'Desktop automation', description: 'Claude controls apps via screenshot, mouse, and keyboard APIs.', source: 'KheyaMind', url: 'https://www.kheyamind.ai/blogs/claude-computer-use-2025-ai-agents-desktop-control-success-rate-analysis' },
                { provider: 'Anthropic', year: 2025, quarter: 'Q4', feature: 'Claude Opus 4.5', angle: 'Reasoning + memory for agents', description: 'Tuned for heavy enterprise workflows, Excel automation, code migration.', source: 'ITPro', url: 'https://www.itpro.com/technology/artificial-intelligence/anthropic-announces-claude-opus-4-5-the-new-ai-coding-frontrunner' },
                { provider: 'Meta', year: 2025, quarter: 'Q2', feature: 'Meta AI Multimodal Assistant', angle: 'Short-session memory', description: 'Multimodal assistant with session recall across Meta apps.', source: 'Meta', url: 'https://about.fb.com/meta-ai' },
                { provider: 'Meta', year: 2025, quarter: 'Q3', feature: 'Llama Agents Toolkit', angle: 'Agent toolkit', description: 'Planning, tool APIs, episodic logs, semantic memory stores.', source: 'Meta Research', url: 'https://ai.meta.com/research' },
                { provider: 'Meta', year: 2025, quarter: 'Q3–Q4', feature: 'Ray-Ban Meta AI', angle: 'Vision-based agent loop', description: 'On-device ephemeral vision agent for real-time tasks.', source: 'Meta', url: 'https://about.fb.com/news' },
                { provider: 'Meta', year: 2025, quarter: 'Q4', feature: 'Llama 4 Preview', angle: 'Agent-native APIs', description: 'Expanded context + structured workflow APIs for agents.', source: 'Meta', url: 'https://ai.meta.com/research' }
            ];

            const breakdownYears = [2023, 2024, 2025];
            breakdownYears.forEach(year => {
                const yearSection = breakdownContent.appendChild(document.createElement('div'));
                yearSection.style.cssText = 'margin-bottom: 18px;';
                
                const yearHeader = yearSection.appendChild(document.createElement('div'));
                yearHeader.style.cssText = 'font-size: 0.9rem; font-weight: 700; color: #e2e8f0; margin-bottom: 10px; display: flex; align-items: center; gap: 8px;';
                const yearFeatures = featureData.filter(f => f.year === year);
                yearHeader.innerHTML = `
                    <span>${year}</span>
                    <span style="font-size: 0.75rem; color: #667eea; font-weight: 600;">(${yearFeatures.length} feature${yearFeatures.length !== 1 ? 's' : ''})</span>
                `;

                // Group by provider
                const byProvider = {};
                yearFeatures.forEach(feature => {
                    if (!byProvider[feature.provider]) {
                        byProvider[feature.provider] = [];
                    }
                    byProvider[feature.provider].push(feature);
                });

                Object.keys(byProvider).sort().forEach(provider => {
                    const providerSection = yearSection.appendChild(document.createElement('div'));
                    providerSection.style.cssText = 'margin-bottom: 12px; padding: 10px; background: #2d3748; border-radius: 6px; border-left: 3px solid ' + colorScale(provider) + ';';
                    
                    const providerHeader = providerSection.appendChild(document.createElement('div'));
                    providerHeader.style.cssText = 'font-weight: 700; color: #e2e8f0; margin-bottom: 8px; font-size: 0.85rem;';
                    providerHeader.textContent = `${provider} (${byProvider[provider].length} feature${byProvider[provider].length > 1 ? 's' : ''})`;

                    byProvider[provider].forEach((feature, idx) => {
                        const featureDiv = providerSection.appendChild(document.createElement('div'));
                        featureDiv.style.cssText = 'padding: 8px; margin-bottom: 6px; background: #1a202c; border-radius: 4px; border: 1px solid #4a5568;';
                        
                        const featureName = featureDiv.appendChild(document.createElement('div'));
                        featureName.style.cssText = 'font-weight: 700; color: #e2e8f0; margin-bottom: 4px; font-size: 0.8rem;';
                        featureName.textContent = `${idx + 1}. ${feature.feature} (${feature.quarter})`;

                        const featureDetails = featureDiv.appendChild(document.createElement('div'));
                        featureDetails.style.cssText = 'font-size: 0.7rem; color: #a0aec0; line-height: 1.4;';
                        featureDetails.innerHTML = `
                            <div style="margin-bottom: 2px;"><strong>P2 Angle:</strong> <span style="color: #667eea;">${feature.angle}</span></div>
                            <div style="margin-bottom: 2px;"><strong>Description:</strong> ${feature.description}</div>
                            <div style="margin-top: 4px;"><strong>Source:</strong> <a href="${feature.url}" target="_blank" rel="noopener noreferrer" style="color: #48bb78; font-style: italic; text-decoration: underline;">${feature.source}</a></div>
                        `;
                    });
                });
            });
        }

        function renderIdentityRadar() {
            const container = document.getElementById('ecosystemIdentityRadarChart');
            const width = container.parentElement.clientWidth - 50;
            const height = 500;
            const margin = { top: 40, right: 40, bottom: 40, left: 40 };

            container.innerHTML = '';

            // Create tooltip
            const tooltip = d3.select(container).append('div')
                .attr('class', 'tooltip')
                .style('opacity', 0);

            const svg = d3.select(container)
                .append('svg')
                .attr('width', width)
                .attr('height', height);

            const centerX = width / 2;
            const centerY = height / 2;
            const radius = Math.min(width, height) / 2 - 60;

            const dimensions = ['Workspace', 'Graph', 'Account', 'Cross-App', 'Privacy Controls'];
            const data = dashboardData.ecosystem.identityExpansions;
            const providers = Object.keys(data);

            const colorScale = d3.scaleOrdinal()
                .domain(providers)
                .range(['#4285f4', '#00a4ef', '#ff6b35', '#d4a574']);

            // Map dimensions to data keys
            const dimensionMap = {
                'Workspace': 'workspace',
                'Graph': 'graph',
                'Account': 'account',
                'Cross-App': 'workspace', // Using workspace as proxy
                'Privacy Controls': 'account' // Using account as proxy
            };

            const angleScale = d3.scalePoint()
                .domain(dimensions)
                .range([0, 2 * Math.PI]);

            const rScale = d3.scaleLinear()
                .domain([0, 15])
                .range([0, radius]);

            // Draw grid circles
            for (let i = 1; i <= 3; i++) {
                svg.append('circle')
                    .attr('cx', centerX)
                    .attr('cy', centerY)
                    .attr('r', (radius / 3) * i)
                    .attr('fill', 'none')
                    .attr('stroke', '#4a5568')
                    .attr('stroke-width', 1)
                    .attr('opacity', 0.3);

                svg.append('text')
                    .attr('x', centerX)
                    .attr('y', centerY - (radius / 3) * i + 5)
                    .attr('text-anchor', 'middle')
                    .attr('fill', '#a0aec0')
                    .attr('font-size', '10px')
                    .text((i * 5).toString());
            }

            // Draw dimension axes
            dimensions.forEach((dimension, i) => {
                const angle = angleScale(dimension);
                const x1 = centerX + Math.cos(angle) * radius;
                const y1 = centerY + Math.sin(angle) * radius;

                svg.append('line')
                    .attr('x1', centerX)
                    .attr('y1', centerY)
                    .attr('x2', x1)
                    .attr('y2', y1)
                    .attr('stroke', '#4a5568')
                    .attr('stroke-width', 1)
                    .attr('opacity', 0.3);

                // Dimension labels
                const labelX = centerX + Math.cos(angle) * (radius + 30);
                const labelY = centerY + Math.sin(angle) * (radius + 30);
                svg.append('text')
                    .attr('x', labelX)
                    .attr('y', labelY)
                    .attr('text-anchor', 'middle')
                    .attr('fill', '#e2e8f0')
                    .attr('font-size', '12px')
                    .attr('font-weight', '600')
                    .text(dimension);
            });

            // Draw radar for each provider
            providers.forEach((provider, pIdx) => {
                const providerData = data[provider];
                const points = dimensions.map(dim => {
                    const key = dimensionMap[dim];
                    const value = providerData[key] || 0;
                    const angle = angleScale(dim);
                    const r = rScale(value);
                    return {
                        angle,
                        r,
                        x: centerX + Math.cos(angle) * r,
                        y: centerY + Math.sin(angle) * r,
                        dimension: dim,
                        value
                    };
                });

                // Draw area
                const line = d3.lineRadial()
                    .angle(d => d.angle)
                    .radius(d => d.r)
                    .curve(d3.curveLinearClosed);

                const area = svg.append('path')
                    .datum(points)
                    .attr('d', line)
                    .attr('fill', colorScale(provider))
                    .attr('fill-opacity', 0.2)
                    .attr('stroke', colorScale(provider))
                    .attr('stroke-width', 2)
                    .attr('cursor', 'pointer')
                    .on('mouseover', function(event) {
                        tooltip.transition().duration(200).style('opacity', 1);
                        const total = points.reduce((sum, p) => sum + p.value, 0);
                        const avg = total / points.length;
                        tooltip.html(`
                            <div class="tooltip-title">${provider} Identity Surface</div>
                            ${points.map(p => `
                                <div class="tooltip-item"><strong>${p.dimension}:</strong> ${p.value} capabilities</div>
                            `).join('')}
                            <div class="tooltip-item" style="margin-top: 8px; border-top: 1px solid #4a5568; padding-top: 8px;">
                                <strong>Total:</strong> ${total} capabilities | <strong>Average:</strong> ${avg.toFixed(1)} per dimension
                            </div>
                            <div class="tooltip-item" style="margin-top: 8px; font-size: 0.8rem; color: #e53e3e;">
                                ⚠ Higher values indicate greater lock-in risk
                            </div>
                        `)
                        .style('left', (event.pageX + 10) + 'px')
                        .style('top', (event.pageY - 10) + 'px');
                        area.attr('fill-opacity', 0.4);
                    })
                    .on('mouseout', function() {
                        tooltip.transition().duration(200).style('opacity', 0);
                        area.attr('fill-opacity', 0.2);
                    });

                // Draw points
                points.forEach(point => {
                    svg.append('circle')
                        .attr('cx', point.x)
                        .attr('cy', point.y)
                        .attr('r', 4)
                        .attr('fill', colorScale(provider))
                        .attr('stroke', '#e2e8f0')
                        .attr('stroke-width', 2);
                });
            });

            // Legend
            const legend = container.appendChild(document.createElement('div'));
            legend.className = 'chart-legend';
            providers.forEach(provider => {
                const providerData = data[provider];
                const total = Object.values(providerData).reduce((a, b) => a + b, 0);
                const item = document.createElement('div');
                item.className = 'legend-item';
                item.innerHTML = `
                    <div class="legend-color" style="background: ${colorScale(provider)}"></div>
                    <div class="legend-text">${provider} (${total} total)</div>
                `;
                legend.appendChild(item);
            });

            // Info panel
            const infoPanel = container.appendChild(document.createElement('div'));
            infoPanel.className = 'chart-info';
            const maxProvider = providers.reduce((a, b) => {
                const totalA = Object.values(data[a]).reduce((s, v) => s + v, 0);
                const totalB = Object.values(data[b]).reduce((s, v) => s + v, 0);
                return totalB > totalA ? b : a;
            });
            infoPanel.innerHTML = `
                <strong>Chart Details:</strong> Radar chart showing identity-linked capability expansion across five dimensions. 
                Larger surfaces indicate more identity binding, which signals higher lock-in risk. 
                <strong>${maxProvider}</strong> shows the largest identity surface expansion. Hover over areas for detailed breakdowns.
            `;

            // Rationale section
            createCollapsibleRationale(container, `
                <div class="chart-rationale-content">
                    <p>The Identity Surface Expansion radar chart is the primary lock-in risk indicator. Identity systems (Workspace, Graph, Account) are the most powerful lock-in mechanisms because they create switching costs that grow with usage. This chart reveals:</p>
                    <ul class="chart-rationale-list">
                        <li><strong>Lock-in trajectory:</strong> Larger surfaces indicate providers are binding more capabilities to identity, making switching progressively harder</li>
                        <li><strong>Platform dependencies:</strong> Identity expansion correlates with deeper platform dependencies and reduced user autonomy</li>
                        <li><strong>Market concentration risk:</strong> As identity surfaces expand, markets consolidate around fewer dominant platforms</li>
                        <li><strong>Intervention urgency:</strong> Providers with rapidly expanding surfaces require immediate attention for PLP positioning</li>
                    </ul>
                </div>
                <div class="chart-rationale-section">
                    <strong>How to Interpret:</strong>
                    <p>Each dimension represents a different type of identity binding: Workspace (productivity tools), Graph (data connections), Account (authentication), Cross-App (integration), and Privacy Controls (data governance). Providers with large, balanced surfaces across all dimensions have the highest lock-in risk. Asymmetric expansion (e.g., strong in Graph but weak in Privacy) may indicate strategic priorities or compliance gaps.</p>
                </div>
                <div class="chart-rationale-section">
                    <strong>Strategic Actions:</strong>
                    <ul class="chart-rationale-list">
                        <li>Prioritize competitive responses to providers with rapidly expanding identity surfaces</li>
                        <li>Use asymmetry patterns to identify PLP differentiation opportunities (e.g., stronger privacy controls)</li>
                        <li>Track identity expansion velocity — acceleration indicates urgent market intervention needed</li>
                    </ul>
                </div>
            `);
        }

        // Memory Architecture Rendering Functions (used within Module 1: Ecosystem Moves)
        function renderMemoryModule() {
            renderOpennessMatrix();
            renderRecallDepthChart();
        }

        function renderOpennessMatrix() {
            const container = document.getElementById('memoryOpennessMatrix');
            const width = container.parentElement.clientWidth - 50;
            const height = 450;
            const margin = { top: 20, right: 30, bottom: 60, left: 60 };

            container.innerHTML = '';

            // Tooltip for combined openness + identity lock-in insight
            const tooltip = d3.select(container).append('div')
                .attr('class', 'tooltip')
                .style('opacity', 0);
            
            // Variable to track hide timeout
            let hideTimeout = null;

            const svg = d3.select(container)
                .append('svg')
                .attr('width', width)
                .attr('height', height);

            const g = svg.append('g')
                .attr('transform', `translate(${margin.left},${margin.top})`);

            const chartWidth = width - margin.left - margin.right;
            const chartHeight = height - margin.top - margin.bottom;

            const providers = dashboardData.memory.providers;
            const identityLockInData = dashboardData.memory.identityLockIn;
            const identityLockInMap = identityLockInData.reduce((acc, item) => {
                acc[item.provider] = item;
                return acc;
            }, {});

            // Conceptual bands for openness and lock-in based on CSV reference
            const conceptualBands = {
                'Google': {
                    opennessBand: 'Low',
                    lockInBand: 'High',
                    category: 'Maximum Risk'
                },
                'Microsoft': {
                    opennessBand: 'Medium-High',
                    lockInBand: 'Medium',
                    category: 'Limited but Manageable'
                },
                'OpenAI': {
                    opennessBand: 'Medium',
                    lockInBand: 'Medium-High',
                    category: 'Limited but Manageable'
                },
                'Anthropic': {
                    opennessBand: 'High',
                    lockInBand: 'Low',
                    category: 'Opportunity Zone'
                },
                'Meta': {
                    opennessBand: 'High',
                    lockInBand: 'Low',
                    category: 'Opportunity Zone'
                }
            };

            const xScale = d3.scaleLinear()
                .domain([0, 100])
                .range([0, chartWidth]);

            const yScale = d3.scaleLinear()
                .domain([0, 100])
                .range([chartHeight, 0]);

            // Color scale for identity lock-in percentage
            const colorScale = d3.scaleSequential(d3.interpolateRdYlGn)
                .domain([100, 0]);

            // Size scale for cross-app reach (bubble size)
            const maxReach = d3.max(providers, p => p.crossAppReach || 0) || 1;
            const sizeScale = d3.scaleSqrt()
                .domain([0, maxReach])
                .range([8, 20]);

            // Draw quadrant lines
            g.append('line')
                .attr('x1', xScale(50))
                .attr('y1', 0)
                .attr('x2', xScale(50))
                .attr('y2', chartHeight)
                .attr('stroke', '#4a5568')
                .attr('stroke-width', 2)
                .attr('stroke-dasharray', '5,5');

            g.append('line')
                .attr('x1', 0)
                .attr('y1', yScale(50))
                .attr('x2', chartWidth)
                .attr('y2', yScale(50))
                .attr('stroke', '#4a5568')
                .attr('stroke-width', 2)
                .attr('stroke-dasharray', '5,5');

            // Subtle quadrant background shading with labels
            const quadrantConfigs = [
                {
                    label: 'Opportunity Zone',
                    description: 'High Openness • Low Lock-In',
                    xRange: [50, 100],
                    yRange: [0, 50],
                    fill: 'rgba(56, 161, 105, 0.10)'
                },
                {
                    label: 'Strategic Risk',
                    description: 'High Openness • High Lock-In',
                    xRange: [50, 100],
                    yRange: [50, 100],
                    fill: 'rgba(237, 137, 54, 0.10)'
                },
                {
                    label: 'Limited but Manageable',
                    description: 'Low Openness • Low Lock-In',
                    xRange: [0, 50],
                    yRange: [0, 50],
                    fill: 'rgba(99, 179, 237, 0.08)'
                },
                {
                    label: 'Maximum Risk',
                    description: 'Low Openness • High Lock-In',
                    xRange: [0, 50],
                    yRange: [50, 100],
                    fill: 'rgba(229, 62, 62, 0.08)'
                }
            ];

            quadrantConfigs.forEach(q => {
                const x1 = xScale(q.xRange[0]);
                const x2 = xScale(q.xRange[1]);
                const y1 = yScale(q.yRange[1]);
                const y2 = yScale(q.yRange[0]);

                g.append('rect')
                    .attr('x', x1)
                    .attr('y', y1)
                    .attr('width', x2 - x1)
                    .attr('height', y2 - y1)
                    .attr('fill', q.fill)
                    .attr('stroke', 'none');

                g.append('text')
                    .attr('x', x1 + (x2 - x1) / 2)
                    .attr('y', y1 + 20)
                    .attr('text-anchor', 'middle')
                    .attr('fill', '#cbd5e0')
                    .attr('font-size', '11px')
                    .attr('font-weight', '700')
                    .text(q.label);

                g.append('text')
                    .attr('x', x1 + (x2 - x1) / 2)
                    .attr('y', y1 + 36)
                    .attr('text-anchor', 'middle')
                    .attr('fill', '#a0aec0')
                    .attr('font-size', '10px')
                    .text(q.description);
            });

            // Plot providers (merged with Identity Lock-In Index)
            providers.forEach(provider => {
                const x = xScale(provider.opennessScore);
                const identityEntry = identityLockInMap[provider.name] || { percentage: provider.lockInIndex, description: '', details: '' };
                const lockInPercent = identityEntry.percentage;
                const y = yScale(lockInPercent);
                const reach = provider.crossAppReach || 0;
                const r = sizeScale(reach);

                const bands = conceptualBands[provider.name] || {};
                
                const circle = g.append('circle')
                    .attr('cx', x)
                    .attr('cy', y)
                    .attr('r', r)
                    .attr('fill', colorScale(lockInPercent))
                    .attr('stroke', '#e2e8f0')
                    .attr('stroke-width', 2)
                    .on('mouseover', function(event) {
                        // Clear any pending hide timeout
                        if (hideTimeout) {
                            clearTimeout(hideTimeout);
                            hideTimeout = null;
                        }
                        
                        tooltip.transition().duration(200).style('opacity', 1);
                        
                        // Determine tooltip position - for Meta (top-right), position to the left
                        let tooltipX = event.pageX + 10;
                        let tooltipY = event.pageY - 10;
                        
                        if (provider.name === 'Meta' || provider.name === 'Anthropic') {
                            // Position to the left for top-right quadrant providers
                            tooltipX = event.pageX - 520; // 500px width + 20px margin
                            tooltipY = event.pageY - 10;
                        }
                        
                        // Special tooltip for Google with detailed I³ Pillars information
                        if (provider.name === 'Google') {
                            tooltip.html(`
                                <div class="tooltip-title">${provider.name}</div>
                                <div style="margin-bottom: 10px; padding: 8px; background: rgba(74, 85, 104, 0.3); border-radius: 4px; font-size: 0.85rem; line-height: 1.4;">
                                    <strong>P1 – Data Access, Integration & Open Standards:</strong> 6 distinct memory features documented (lowest among the four), all tightly embedded in Google's own stack rather than exposed as portable primitives.
                                </div>
                                <div style="margin-bottom: 10px; padding: 8px; background: rgba(74, 85, 104, 0.3); border-radius: 4px; font-size: 0.85rem; line-height: 1.4;">
                                    <strong>P2 – Scalable & Safe AI Workflows:</strong> Long-context capacity is extremely high as Google appears with 3 long-context models, averaging ~677K tokens and up to 1,000K tokens of context.
                                </div>
                                <div style="margin-bottom: 10px; padding: 8px; background: rgba(74, 85, 104, 0.3); border-radius: 4px; font-size: 0.85rem; line-height: 1.4;">
                                    <strong>P3 – Human Capacity & Trust:</strong> Broad educator reach via Workspace for Education globally with limited education-tagged agent features.
                                </div>
                                <div style="margin-bottom: 10px; padding: 8px; background: rgba(74, 85, 104, 0.3); border-radius: 4px; font-size: 0.85rem; line-height: 1.4;">
                                    <strong>P4 – Public-Good Alliances:</strong> Strong public signaling (Google.org, governance forums); most value is mediated through the core Workspace ecosystem.
                                </div>
                                <div style="margin-bottom: 10px; padding: 8px; background: rgba(74, 85, 104, 0.3); border-radius: 4px; font-size: 0.85rem; line-height: 1.4;">
                                    <strong>P5 – Responsible AI & Governance:</strong> Model cards published inconsistently; safety cards exist but memory transparency is limited.
                                </div>
                            `)
                            .style('left', tooltipX + 'px')
                            .style('top', tooltipY + 'px')
                            .style('max-width', '500px')
                            .style('max-height', '600px')
                            .style('overflow-y', 'auto');
                        } else if (provider.name === 'Microsoft') {
                            tooltip.html(`
                                <div class="tooltip-title">${provider.name}</div>
                                <div style="margin-bottom: 10px; padding: 8px; background: rgba(74, 85, 104, 0.3); border-radius: 4px; font-size: 0.85rem; line-height: 1.4;">
                                    <strong>P1 – Data Access, Integration & Open Standards:</strong> 8 memory features, 8 memory types (high surface). It has a strong alignment via Graph + connectors.
                                </div>
                                <div style="margin-bottom: 10px; padding: 8px; background: rgba(74, 85, 104, 0.3); border-radius: 4px; font-size: 0.85rem; line-height: 1.4;">
                                    <strong>P2 – Scalable & Safe AI Workflows:</strong> Microsoft leads all providers in documented agent/workflow features and pairs this with one of the strongest long-context stacks—six models averaging ~273K tokens and scaling to 1M—positioning it as the most capable platform for complex, multi-document AI workflows.
                                </div>
                                <div style="margin-bottom: 10px; padding: 8px; background: rgba(74, 85, 104, 0.3); border-radius: 4px; font-size: 0.85rem; line-height: 1.4;">
                                    <strong>P3 – Human Capacity & Trust:</strong> It provides substantial surface for educator- and admin-facing integrations, especially in M365 districts.
                                </div>
                                <div style="margin-bottom: 10px; padding: 8px; background: rgba(74, 85, 104, 0.3); border-radius: 4px; font-size: 0.85rem; line-height: 1.4;">
                                    <strong>P4 – Public-Good Alliances:</strong> Microsoft appears in more workflow and model entries than any other provider, reflecting its broad public-sector footprint and its co-development posture with ministries and NGOs - positioning it as the most embedded hyperscaler in government-aligned AI deployments.
                                </div>
                                <div style="margin-bottom: 10px; padding: 8px; background: rgba(74, 85, 104, 0.3); border-radius: 4px; font-size: 0.85rem; line-height: 1.4;">
                                    <strong>P5 – Responsible AI & Governance:</strong> Microsoft leads with consistent transparency (model/system cards), formal independent oversight, and youth-focused safeguards such as supervised Copilot experiences and robust admin controls.
                                </div>
                            `)
                            .style('left', tooltipX + 'px')
                            .style('top', tooltipY + 'px')
                            .style('max-width', '500px')
                            .style('max-height', '600px')
                            .style('overflow-y', 'auto');
                        } else if (provider.name === 'OpenAI') {
                            tooltip.html(`
                                <div class="tooltip-title">${provider.name}</div>
                                <div style="margin-bottom: 10px; padding: 8px; background: rgba(74, 85, 104, 0.3); border-radius: 4px; font-size: 0.85rem; line-height: 1.4;">
                                    <strong>P1 – Data Access & Open Standard:</strong> Strong memory depth (9 features, 8 types) but tightly bound to OpenAI-controlled runtimes, meaning high capability but weaker portability and open-standard alignment.
                                </div>
                                <div style="margin-bottom: 10px; padding: 8px; background: rgba(74, 85, 104, 0.3); border-radius: 4px; font-size: 0.85rem; line-height: 1.4;">
                                    <strong>P2 – Scalable & Safe AI Workflows:</strong> Robust agentic surface (5 workflow features), yet limited long-context capacity (4 models, ~76K avg, 128K max) pushes more workloads into proprietary scaffolds like GPTs and Assistants.
                                </div>
                                <div style="margin-bottom: 10px; padding: 8px; background: rgba(74, 85, 104, 0.3); border-radius: 4px; font-size: 0.85rem; line-height: 1.4;">
                                    <strong>P3 – Human Capacity & Trust:</strong> Lack of explicit educator PD or training infrastructure signals a model-centric strategy - strong tools but less support for full ecosystem capacity-building.
                                </div>
                                <div style="margin-bottom: 10px; padding: 8px; background: rgba(74, 85, 104, 0.3); border-radius: 4px; font-size: 0.85rem; line-height: 1.4;">
                                    <strong>P4 – Public-Good Alliances:</strong> Engagement comes mainly through integrator partners (e.g., Khanmigo), with fewer broad public-sector or governance alliances relative to Microsoft—limiting system-level influence.
                                </div>
                                <div style="margin-bottom: 10px; padding: 8px; background: rgba(74, 85, 104, 0.3); border-radius: 4px; font-size: 0.85rem; line-height: 1.4;">
                                    <strong>P5 – Responsible AI & Governance:</strong> Publishes detailed model cards and some oversight signals, but audit coverage is limited; youth safeguards (e.g., ChatGPT for Schools) are improving but uneven across markets - resulting in a governance posture that is credible but less comprehensive than peers.
                                </div>
                            `)
                            .style('left', tooltipX + 'px')
                            .style('top', tooltipY + 'px')
                            .style('max-width', '500px')
                            .style('max-height', '600px')
                            .style('overflow-y', 'auto');
                        } else if (provider.name === 'Anthropic') {
                            tooltip.html(`
                                <div class="tooltip-title">${provider.name}</div>
                                <div style="margin-bottom: 10px; padding: 8px; background: rgba(74, 85, 104, 0.3); border-radius: 4px; font-size: 0.85rem; line-height: 1.4;">
                                    <strong>P1 – Data Access, Integration & Open Standards:</strong> Anthropic offers a diverse set of memory-related behaviors and features - positioning Anthropic as the most standards-aligned and least lock-in–dependent memory layer.
                                </div>
                                <div style="margin-bottom: 10px; padding: 8px; background: rgba(74, 85, 104, 0.3); border-radius: 4px; font-size: 0.85rem; line-height: 1.4;">
                                    <strong>P2 – Scalable & Safe AI Workflows:</strong> Fewer workflow features (3) but strong long-context capacity (4 models, ~175K average, 200K max), enabling stable multi-document reasoning without relying on heavy proprietary scaffolds.
                                </div>
                                <div style="margin-bottom: 10px; padding: 8px; background: rgba(74, 85, 104, 0.3); border-radius: 4px; font-size: 0.85rem; line-height: 1.4;">
                                    <strong>P3 – Human Capacity & Trust:</strong> Model entries emphasize reliability and long-context strength, aligning Anthropic with high-trust, regulated, and education-relevant workloads - even as large-scale PD ecosystems are still in early stages.
                                </div>
                                <div style="margin-bottom: 10px; padding: 8px; background: rgba(74, 85, 104, 0.3); border-radius: 4px; font-size: 0.85rem; line-height: 1.4;">
                                    <strong>P4 – Public-Good Alliances:</strong> Presence is lean but governance-heavy, reflecting a strategy centered on Constitutional AI and Responsible Scaling rather than bundling large product suites or broad institutional integrations.
                                </div>
                                <div style="margin-bottom: 10px; padding: 8px; background: rgba(74, 85, 104, 0.3); border-radius: 4px; font-size: 0.85rem; line-height: 1.4;">
                                    <strong>P5 – Responsible AI & Governance:</strong> Leads the field on safety frameworks (Constitutional AI, RSP) with high transparency through safety cards and policy disclosures, alongside youth-appropriate safeguards and conservative design choices to reduce harmful outputs - making it the strongest governance-first provider.
                                </div>
                            `)
                            .style('left', tooltipX + 'px')
                            .style('top', tooltipY + 'px')
                            .style('max-width', '500px')
                            .style('max-height', '600px')
                            .style('overflow-y', 'auto');
                        } else if (provider.name === 'Meta') {
                            tooltip.html(`
                                <div class="tooltip-title">${provider.name}</div>
                                <div style="margin-bottom: 10px; padding: 8px; background: rgba(74, 85, 104, 0.3); border-radius: 4px; font-size: 0.85rem; line-height: 1.4;">
                                    <strong>P1 – Data Access & Open Standards:</strong> Open-source models (Llama, Llama Guard, Llama Stack) with permissive licensing, but provides no native Ed-Fi or CASE support. Interoperability depends on implementers building connectors.
                                </div>
                                <div style="margin-bottom: 10px; padding: 8px; background: rgba(74, 85, 104, 0.3); border-radius: 4px; font-size: 0.85rem; line-height: 1.4;">
                                    <strong>P2 – Scalable & Safe Workflows:</strong> Llama Agents Toolkit adds structured planning, tool-use, and episodic/semantic memory patterns, but Meta lacks a workflow platform equivalent to Copilot Studio or Gemini Flows. Agents rely on developer-managed memory.
                                </div>
                                <div style="margin-bottom: 10px; padding: 8px; background: rgba(74, 85, 104, 0.3); border-radius: 4px; font-size: 0.85rem; line-height: 1.4;">
                                    <strong>P3 – Human Capacity & Trust:</strong> Meta AI is deployed globally through WhatsApp, Messenger, and Instagram, but no structured K–12 teacher training or educator capacity programs exist, unlike Microsoft GTP or Google EDU.
                                </div>
                                <div style="margin-bottom: 10px; padding: 8px; background: rgba(74, 85, 104, 0.3); border-radius: 4px; font-size: 0.85rem; line-height: 1.4;">
                                    <strong>P4 – Public-Good Alliances:</strong> Meta partners largely on digital literacy, misinformation, and safety initiatives, but few ministry-scale education partnerships or AI-in-education public-good programs are documented.
                                </div>
                                <div style="margin-bottom: 10px; padding: 8px; background: rgba(74, 85, 104, 0.3); border-radius: 4px; font-size: 0.85rem; line-height: 1.4;">
                                    <strong>P5 – Responsible AI & Governance:</strong> Meta publishes detailed safety research, transparency reports, and open-source safety tools (Llama Guard, CyberSec Eval). Youth/education-specific protections are less formalized than Microsoft's Responsible AI Standard.
                                </div>
                            `)
                            .style('left', tooltipX + 'px')
                            .style('top', tooltipY + 'px')
                            .style('max-width', '500px')
                            .style('max-height', '600px')
                            .style('overflow-y', 'auto');
                        } else {
                            // Default tooltip for other providers
                            tooltip.html(`
                                <div class="tooltip-title">${provider.name} — Openness vs Identity Lock-In</div>
                                <div class="tooltip-item"><strong>Memory Openness Score:</strong> ${provider.opennessScore}</div>
                                <div class="tooltip-item"><strong>Identity Lock-In Index:</strong> ${lockInPercent}%</div>
                                <div class="tooltip-item"><strong>Openness Band:</strong> ${bands.opennessBand || (provider.opennessScore >= 55 ? 'High' : provider.opennessScore >= 40 ? 'Medium' : 'Low')}</div>
                                <div class="tooltip-item"><strong>Lock-In Band:</strong> ${bands.lockInBand || (lockInPercent >= 70 ? 'High' : lockInPercent >= 40 ? 'Medium' : 'Low')}</div>
                                <div class="tooltip-item"><strong>Category:</strong> ${bands.category || (lockInPercent >= 70 && provider.opennessScore < 50 ? 'Maximum Risk' : 'Mixed')}</div>
                                <div class="tooltip-item"><strong>Recall Depth:</strong> ${provider.recallDepth.toLocaleString()} tokens</div>
                                <div class="tooltip-item"><strong>Cross-App Reach:</strong> ${provider.crossAppReach} apps</div>
                                <div class="tooltip-item"><strong>Default-On Rate:</strong> ${provider.defaultOnRate}%</div>
                                ${identityEntry.description ? `<div class="tooltip-item" style="margin-top: 8px;"><strong>Identity Binding:</strong> ${identityEntry.description}</div>` : ''}
                                ${identityEntry.details ? `<div class="tooltip-item" style="font-size: 0.8rem; color: #cbd5e0; margin-top: 4px;">${identityEntry.details}</div>` : ''}
                            `)
                            .style('left', tooltipX + 'px')
                            .style('top', tooltipY + 'px');
                        }

                        d3.select(this).attr('stroke-width', 3);
                    })
                    .on('mouseout', function() {
                        // Delay hiding the tooltip to allow mouse to move to it
                        hideTimeout = setTimeout(() => {
                            tooltip.transition().duration(200).style('opacity', 0);
                            d3.select(this).attr('stroke-width', 2);
                        }, 300); // 300ms delay
                    });

                // Label with provider name only
                // For Anthropic and Meta (in Opportunity Zone), position label below to avoid overlapping quadrant text
                const labelOffset = (provider.name === 'Anthropic' || provider.name === 'Meta') ? 25 : -20;
                g.append('text')
                    .attr('x', x)
                    .attr('y', y + labelOffset)
                    .attr('text-anchor', 'middle')
                    .attr('fill', '#e2e8f0')
                    .attr('font-size', '13px')
                    .attr('font-weight', '700')
                    .text(provider.name);
            });
            
            // Keep tooltip visible when hovering over it (after all providers are processed)
            tooltip.on('mouseenter', function() {
                if (hideTimeout) {
                    clearTimeout(hideTimeout);
                    hideTimeout = null;
                }
                tooltip.transition().duration(100).style('opacity', 1);
            })
            .on('mouseleave', function() {
                tooltip.transition().duration(200).style('opacity', 0);
            });

            // Conceptual axis labels - only Low and High, once each
            // X-axis labels
            g.append('text')
                .attr('x', xScale(0))
                .attr('y', chartHeight + 20)
                .attr('text-anchor', 'start')
                .attr('fill', '#a0aec0')
                .style('font-size', '12px')
                .style('font-weight', '600')
                .text('Low');
            
            g.append('text')
                .attr('x', xScale(100))
                .attr('y', chartHeight + 20)
                .attr('text-anchor', 'end')
                .attr('fill', '#a0aec0')
                .style('font-size', '12px')
                .style('font-weight', '600')
                .text('High');

            // Y-axis labels
            g.append('text')
                .attr('x', -10)
                .attr('y', yScale(100) + 5)
                .attr('text-anchor', 'end')
                .attr('fill', '#a0aec0')
                .style('font-size', '12px')
                .style('font-weight', '600')
                .text('High');
            
            g.append('text')
                .attr('x', -10)
                .attr('y', yScale(0) + 5)
                .attr('text-anchor', 'end')
                .attr('fill', '#a0aec0')
                .style('font-size', '12px')
                .style('font-weight', '600')
                .text('Low');

            // Axis labels
            g.append('text')
                .attr('x', chartWidth / 2)
                .attr('y', chartHeight + 50)
                .style('text-anchor', 'middle')
                .attr('fill', '#a0aec0')
                .style('font-size', '14px')
                .style('font-weight', '600')
                .text('Memory Openness (Low → Middle → High)');

            g.append('text')
                .attr('transform', 'rotate(-90)')
                .attr('y', -50)
                .attr('x', -chartHeight / 2)
                .style('text-anchor', 'middle')
                .attr('fill', '#a0aec0')
                .style('font-size', '14px')
                .style('font-weight', '600')
                .text('Identity Lock-In (Low → Middle → High)');

            // Legend explaining color and size encoding
            const legendContainer = container.appendChild(document.createElement('div'));
            legendContainer.className = 'chart-legend';
            legendContainer.style.marginTop = '10px';

            const colorLegend = document.createElement('div');
            colorLegend.className = 'legend-item';
            colorLegend.innerHTML = `
                <div class="legend-color" style="background: linear-gradient(90deg, #48bb78, #f6e05e, #e53e3e); width: 40px;"></div>
                <div class="legend-text">Color = Identity Lock-In (Green = low, Red = high)</div>
            `;
            legendContainer.appendChild(colorLegend);

            const sizeLegend = document.createElement('div');
            sizeLegend.className = 'legend-item';
            sizeLegend.innerHTML = `
                <div class="legend-color" style="background: #4a5568; border-radius: 999px; width: 16px; height: 16px;"></div>
                <div class="legend-text">Bubble Size = Cross-App Memory Reach (# of apps)</div>
            `;
            legendContainer.appendChild(sizeLegend);

            // Rationale section
            createCollapsibleRationale(container, `
                <div class="chart-rationale-content" style="font-size: 0.75rem; line-height: 1.4;">
                    <p style="margin-bottom: 8px;"><strong>Methodology:</strong> The Memory Openness vs. Lock-In matrix is grounded in three datasets aligned with the <strong>I³ Index Pillars</strong>:</p>
                    <ul style="margin-top: 6px; padding-left: 18px; font-size: 0.75rem; line-height: 1.5;">
                        <li><strong>Product releases</strong> → <strong>P1 (Data Access & Open Standards)</strong> & <strong>P2 (Scalable & Safe Workflows)</strong>: Count and nature of memory features (open schemas vs proprietary tools), feature velocity, workflow portability.</li>
                        <li><strong>Documented memory capabilities</strong> → <strong>P1</strong>: User controls, exportability, integration pathways, Ed-Fi/CASE support, documentation clarity and partner usability.</li>
                        <li><strong>Long-context performance</strong> → <strong>P2</strong>: Effective recall depth, stability under load, dependency on proprietary scaffolding vs open model-level memory.</li>
                    </ul>
                </div>
            `, 'Methodology & Data Sources');
        }

        function renderRecallDepthChart() {
            const container = document.getElementById('memoryRecallDepthChart');
            const width = container.parentElement.clientWidth - 50;
            const height = 450;
            const margin = { top: 40, right: 100, bottom: 80, left: 80 };

            container.innerHTML = '';

            // Create tooltip
            const tooltip = d3.select(container).append('div')
                .attr('class', 'tooltip')
                .style('opacity', 0);

            const svg = d3.select(container)
                .append('svg')
                .attr('width', width)
                .attr('height', height);

            const g = svg.append('g')
                .attr('transform', `translate(${margin.left},${margin.top})`);

            const chartWidth = width - margin.left - margin.right;
            const chartHeight = height - margin.top - margin.bottom;

            const data = dashboardData.memory.recallDepthHistory.sort((a, b) => new Date(a.date + '-01') - new Date(b.date + '-01'));

            // Group by provider
            const providers = ['GPT', 'Claude', 'Gemini', 'Llama'];
            const providerColors = { 'GPT': '#ff6b35', 'Claude': '#e67e22', 'Gemini': '#4285f4', 'Llama': '#00d4aa' };
            
            const dataByProvider = {};
            data.forEach(d => {
                let provider = '';
                if (d.model.startsWith('GPT') || d.model.includes('Copilot')) {
                    provider = 'GPT';
                } else if (d.model.startsWith('Claude')) {
                    provider = 'Claude';
                } else if (d.model.startsWith('Gemini')) {
                    provider = 'Gemini';
                } else if (d.model.startsWith('Llama')) {
                    provider = 'Llama';
                } else if (d.model.startsWith('Phi') || d.model.startsWith('LongRoPE')) {
                    provider = 'GPT'; // Microsoft models use GPT-based naming
                } else {
                    provider = d.model.split('-')[0].split('_')[0];
                }
                if (!dataByProvider[provider]) dataByProvider[provider] = [];
                dataByProvider[provider].push({ ...d, provider });
            });

            const xScale = d3.scaleTime()
                .domain(d3.extent(data, d => new Date(d.date + '-01')))
                .range([0, chartWidth]);

            const yScale = d3.scaleLog()
                .domain([1000, 1000000])
                .range([chartHeight, 0]);

            // Add risk zones for executive clarity
            const highRiskThreshold = 100000; // 100K tokens
            const mediumRiskThreshold = 50000; // 50K tokens
            
            // High risk zone (100K+) - red background
            g.append('rect')
                .attr('x', 0)
                .attr('y', yScale(1000000))
                .attr('width', chartWidth)
                .attr('height', yScale(highRiskThreshold) - yScale(1000000))
                .attr('fill', 'rgba(229, 62, 62, 0.1)')
                .attr('stroke', 'rgba(229, 62, 62, 0.3)')
                .attr('stroke-width', 2)
                .attr('stroke-dasharray', '5,5');

            // Medium risk zone (50K-100K) - yellow background
            g.append('rect')
                .attr('x', 0)
                .attr('y', yScale(highRiskThreshold))
                .attr('width', chartWidth)
                .attr('height', yScale(mediumRiskThreshold) - yScale(highRiskThreshold))
                .attr('fill', 'rgba(237, 137, 54, 0.08)')
                .attr('stroke', 'rgba(237, 137, 54, 0.2)')
                .attr('stroke-width', 1)
                .attr('stroke-dasharray', '3,3');

            // Risk zone labels
            g.append('text')
                .attr('x', chartWidth - 10)
                .attr('y', yScale(highRiskThreshold) + 15)
                .style('text-anchor', 'end')
                .attr('fill', '#e53e3e')
                .style('font-size', '11px')
                .style('font-weight', '700')
                .text('HIGH RISK: 100K+ tokens = Lock-in zone');

            g.append('text')
                .attr('x', chartWidth - 10)
                .attr('y', yScale(mediumRiskThreshold) + 15)
                .style('text-anchor', 'end')
                .attr('fill', '#ed8936')
                .style('font-size', '11px')
                .style('font-weight', '600')
                .text('MEDIUM RISK: 50K-100K tokens');

            g.append('text')
                .attr('x', chartWidth - 10)
                .attr('y', yScale(10000) + 15)
                .style('text-anchor', 'end')
                .attr('fill', '#48bb78')
                .style('font-size', '11px')
                .style('font-weight', '600')
                .text('LOW RISK: <50K tokens = Still need external memory');

            // Draw threshold line at 100K
            g.append('line')
                .attr('x1', 0)
                .attr('y1', yScale(highRiskThreshold))
                .attr('x2', chartWidth)
                .attr('y2', yScale(highRiskThreshold))
                .attr('stroke', '#e53e3e')
                .attr('stroke-width', 2)
                .attr('stroke-dasharray', '8,4')
                .style('opacity', 0.6);

            // Draw lines for each provider
            Object.keys(dataByProvider).forEach(provider => {
                const providerData = dataByProvider[provider];
                const line = d3.line()
                    .x(d => xScale(new Date(d.date + '-01')))
                    .y(d => yScale(d.depth))
                    .curve(d3.curveMonotoneX);

                g.append('path')
                    .datum(providerData)
                    .attr('fill', 'none')
                    .attr('stroke', providerColors[provider] || '#667eea')
                    .attr('stroke-width', 3)
                    .attr('opacity', 0.8)
                    .attr('d', line);
            });

            // Points with tooltips and annotations
            let annotationAdded = false; // Track if annotation has been added
            data.forEach((d, i) => {
                const date = new Date(d.date + '-01');
                const x = xScale(date);
                const y = yScale(d.depth);
                const provider = d.model.split('-')[0].split('_')[0];

                // Calculate growth
                const prev = i > 0 ? data[i - 1] : null;
                const growth = prev ? ((d.depth - prev.depth) / prev.depth * 100) : 0;
                const isMajorJump = growth > 100;

                // Point
                const circle = g.append('circle')
                    .attr('cx', x)
                    .attr('cy', y)
                    .attr('r', isMajorJump ? 8 : 6)
                    .attr('fill', providerColors[provider] || '#667eea')
                    .attr('stroke', '#e2e8f0')
                    .attr('stroke-width', isMajorJump ? 3 : 2)
                    .attr('cursor', 'pointer')
                    .style('opacity', 0.9);

                // Model label - simplified for clarity
                const labelOffset = y < chartHeight / 2 ? -20 : 20;
                // Only show labels for major models or high-risk models
                if (d.depth >= 100000 || isMajorJump || d.model.includes('Gemini 1.5') || d.model.includes('Claude 3') || d.model.includes('GPT-4o')) {
                    g.append('text')
                        .attr('x', x)
                        .attr('y', y + labelOffset)
                        .attr('text-anchor', 'middle')
                        .attr('fill', '#e2e8f0')
                        .attr('font-size', '10px')
                        .attr('font-weight', '600')
                        .text(d.model.length > 20 ? d.model.substring(0, 17) + '...' : d.model);
                }

                // Annotation for major jumps - only show once
                if (isMajorJump && !annotationAdded) {
                    g.append('line')
                        .attr('x1', x)
                        .attr('y1', y - 15)
                        .attr('x2', x)
                        .attr('y2', y - 30)
                        .attr('stroke', '#e53e3e')
                        .attr('stroke-width', 2)
                        .attr('stroke-dasharray', '3,3');

                    g.append('text')
                        .attr('x', x)
                        .attr('y', y - 35)
                        .attr('text-anchor', 'middle')
                        .attr('fill', '#e53e3e')
                        .attr('font-size', '11px')
                        .attr('font-weight', '700')
                        .text(`⚠ Lock-in risk spike`);
                    
                    annotationAdded = true; // Mark that annotation has been added
                }

                // Tooltip - simplified for leadership
                circle.on('mouseover', function(event) {
                    const riskLevel = d.depth >= 100000 ? 'HIGH RISK' : d.depth >= 50000 ? 'MEDIUM RISK' : 'LOW RISK';
                    const riskColor = d.depth >= 100000 ? '#e53e3e' : d.depth >= 50000 ? '#ed8936' : '#48bb78';
                    const riskMessage = d.depth >= 100000 ? 'Can store everything internally—reduces need for open standards' : d.depth >= 50000 ? 'Approaching lock-in threshold' : 'Still needs external memory—good partnership target';
                    
                    tooltip.transition().duration(200).style('opacity', 1);
                    tooltip.html(`
                        <div class="tooltip-title">${d.model}</div>
                        <div class="tooltip-item"><strong>Provider:</strong> ${provider}</div>
                        <div class="tooltip-item"><strong>Release:</strong> ${d3.timeFormat('%B %Y')(date)}</div>
                        <div class="tooltip-item"><strong>Memory Capacity:</strong> ${(d.depth / 1000).toFixed(0)}K tokens (≈${Math.round(d.depth / 750)} pages)</div>
                        <div class="tooltip-item" style="margin-top: 8px; padding: 6px; background: ${riskColor}20; border-left: 3px solid ${riskColor}; border-radius: 4px;">
                            <strong style="color: ${riskColor};">${riskLevel}:</strong> ${riskMessage}
                        </div>
                        ${prev ? `
                            <div class="tooltip-item" style="margin-top: 8px; border-top: 1px solid #4a5568; padding-top: 8px;">
                                <strong>Change from previous:</strong> ${growth > 0 ? '+' : ''}${growth.toFixed(0)}% (${prev.model})
                            </div>
                        ` : ''}
                    `)
                    .style('left', (event.pageX + 10) + 'px')
                    .style('top', (event.pageY - 10) + 'px');
                    
                    circle.attr('r', isMajorJump ? 10 : 8).style('opacity', 1);
                })
                .on('mouseout', function() {
                    tooltip.transition().duration(200).style('opacity', 0);
                    circle.attr('r', isMajorJump ? 8 : 6).style('opacity', 0.9);
                });
            });

            // Axes
            g.append('g')
                .attr('transform', `translate(0,${chartHeight})`)
                .call(d3.axisBottom(xScale).ticks(8).tickFormat(d3.timeFormat('%b %Y')))
                .selectAll('text')
                .attr('fill', '#a0aec0')
                .style('font-size', '11px')
                .attr('transform', 'rotate(-45)')
                .style('text-anchor', 'end');

            g.append('g')
                .call(d3.axisLeft(yScale).tickFormat(d => d / 1000 + 'K'))
                .selectAll('text')
                .attr('fill', '#a0aec0')
                .style('font-size', '11px');

            // Axis labels
            g.append('text')
                .attr('x', chartWidth / 2)
                .attr('y', chartHeight + 60)
                .style('text-anchor', 'middle')
                .attr('fill', '#a0aec0')
                .style('font-size', '14px')
                .text('Model Release Date');

            g.append('text')
                .attr('transform', 'rotate(-90)')
                .attr('y', -60)
                .attr('x', -chartHeight / 2)
                .style('text-anchor', 'middle')
                .attr('fill', '#a0aec0')
                .style('font-size', '14px')
                .text('Memory Capacity (tokens) - Higher = More Lock-In Risk');

            // Legend - simplified
            const legend = container.appendChild(document.createElement('div'));
            legend.className = 'chart-legend';
            legend.style.marginTop = '15px';
            legend.style.padding = '12px';
            legend.style.background = '#1a202c';
            legend.style.borderRadius = '8px';
            legend.style.border = '1px solid #4a5568';
            
            const legendTitle = document.createElement('div');
            legendTitle.style.cssText = 'font-weight: 700; color: #e2e8f0; margin-bottom: 10px; font-size: 0.9rem;';
            legendTitle.textContent = 'Provider Lines:';
            legend.appendChild(legendTitle);
            
            Object.keys(dataByProvider).forEach(provider => {
                const item = document.createElement('div');
                item.className = 'legend-item';
                const maxDepth = Math.max(...dataByProvider[provider].map(d => d.depth));
                const riskStatus = maxDepth >= 100000 ? ' (HIGH RISK)' : maxDepth >= 50000 ? ' (MEDIUM RISK)' : ' (LOW RISK)';
                item.innerHTML = `
                    <div class="legend-color" style="background: ${providerColors[provider] || '#667eea'}"></div>
                    <div class="legend-text">${provider}: ${(maxDepth / 1000).toFixed(0)}K tokens${riskStatus}</div>
                `;
                legend.appendChild(item);
            });

            // Info panel
            const infoPanel = container.appendChild(document.createElement('div'));
            infoPanel.className = 'chart-info';
            const maxModel = data.reduce((a, b) => b.depth > a.depth ? b : a);
            const avgDepth = data.reduce((sum, d) => sum + d.depth, 0) / data.length;
            infoPanel.innerHTML = `
                <strong>Chart Overview:</strong> Lines track each provider's model memory capacity over time. Vertical position indicates lock-in risk—higher capacity means less need for external memory systems.
                <strong>Critical Threshold:</strong> The 100K token red zone marks where models can store entire conversations internally, reducing interoperability incentives.
                <strong>Highest Capacity:</strong> ${maxModel.model} leads at ${maxModel.depth.toLocaleString()} tokens. 
                <strong>Partnership Strategy:</strong> Models below 100K tokens (green/yellow zones) still require external memory infrastructure—these represent stronger partnership opportunities for open, interoperable standards.
            `;

            // Rationale section
            createCollapsibleRationale(container, `
                <div class="chart-rationale-content" style="font-size: 0.75rem; line-height: 1.4;">
                    <p style="margin-bottom: 8px;"><strong>Methodology & Data Sources:</strong> Effective Recall Depth is derived from empirical long-context evaluations rather than advertised max context. For each model, we take the midpoint of reported recall ranges in public benchmarks and documentation, including:</p>
                    <ul class="chart-rationale-list" style="font-size: 0.75rem;">
                        <li><strong>OpenAI:</strong> GPT‑3.5 Turbo, GPT‑4, GPT‑4 Turbo, GPT‑4o long-context behavior from arXiv reports and OpenAI docs (e.g., <a href="https://arxiv.org/abs/2307.03172" target="_blank" rel="noopener noreferrer">2307.03172</a>, <a href="https://arxiv.org/abs/2310.15030" target="_blank" rel="noopener noreferrer">2310.15030</a>, and the GPT‑4o model card).</li>
                        <li><strong>Anthropic:</strong> Claude 2, Claude 2.1, Claude 3 Opus, and Sonnet effective recall from Anthropic release notes and model cards (<a href="https://www.anthropic.com/news/claude-2" target="_blank" rel="noopener noreferrer">Claude 2 launch</a>, <a href="https://www.anthropic.com/news/claude-2-1" target="_blank" rel="noopener noreferrer">Claude 2.1</a>, <a href="https://assets.anthropic.com/m/61e7d27f8c8f5919/original/Claude-3-Model-Card.pdf" target="_blank" rel="noopener noreferrer">Claude 3 model card</a>).</li>
                        <li><strong>Google:</strong> Gemini Pro 1.0 and Gemini 1.5 Flash/Pro long-context capabilities from Gemini technical reports and blog posts (<a href="https://arxiv.org/pdf/2403.05530" target="_blank" rel="noopener noreferrer">2403.05530</a>, <a href="https://blog.google/technology/ai/google-gemini-update-flash-ai-assistant-io-2024/" target="_blank" rel="noopener noreferrer">Gemini 1.5 Flash update</a>).</li>
                        <li><strong>Microsoft:</strong> Copilot (GPT‑4 Turbo / GPT‑4o) and Phi‑3 family effective context from Microsoft OpenAI service docs and Phi‑3 papers (<a href="https://learn.microsoft.com/en-us/azure/ai-services/openai" target="_blank" rel="noopener noreferrer">Azure OpenAI</a>, <a href="https://arxiv.org/abs/2404.14219" target="_blank" rel="noopener noreferrer">Phi‑3</a>, <a href="https://arxiv.org/abs/2402.05188" target="_blank" rel="noopener noreferrer">LongRoPE</a>).</li>
                        <li><strong>Meta:</strong> Llama 2, Llama 3, and Llama 3.1 effective recall from Meta AI research and release notes. Llama 2 (4K–8K context, ~3K–5K empirical recall) from <a href="https://arxiv.org/abs/2302.13971" target="_blank" rel="noopener noreferrer">arXiv 2302.13971</a> and <a href="https://ai.meta.com/llama" target="_blank" rel="noopener noreferrer">Meta AI Blog</a>. Llama 3 models (8K–128K context, 5K–100K empirical recall depending on model size) from <a href="https://ai.meta.com/llama" target="_blank" rel="noopener noreferrer">Llama 3 Release Notes</a>. Llama 4 preview estimates based on <a href="https://ai.meta.com/research" target="_blank" rel="noopener noreferrer">Meta Research Announcements</a>.</li>
                    </ul>
                    <p style="margin-top: 8px; font-size: 0.75rem;">Memory Capability (Tokens)</p>
                </div>
            `, 'Methodology & Data Sources');
        }

        function renderNonHyperscalerMemoryChart() {
            const container = document.getElementById('nonHyperscalerMemoryChart');
            if (!container) return;

            const width = container.parentElement.clientWidth - 50;
            const height = 600;
            const margin = { top: 40, right: 200, bottom: 80, left: 150 };

            container.innerHTML = '';

            const svg = d3.select(container)
                .append('svg')
                .attr('width', width)
                .attr('height', height)
                .style('overflow', 'visible');

            const g = svg.append('g')
                .attr('transform', `translate(${margin.left},${margin.top})`);

            const chartWidth = width - margin.left - margin.right;
            const chartHeight = height - margin.top - margin.bottom;

            // Process data by year and memory type
            const dataByYear = d3.group(nonHyperscalerMemoryData, d => d.year);
            const memoryTypes = [...new Set(nonHyperscalerMemoryData.map(d => d.memoryType))].sort();
            const years = [2023, 2024, 2025];

            // Color scale for memory types
            const typeColors = d3.scaleOrdinal()
                .domain(memoryTypes)
                .range(d3.schemeSet3);

            // X scale (years)
            const xScale = d3.scaleBand()
                .domain(years.map(String))
                .range([0, chartWidth])
                .padding(0.2);

            // Y scale (count)
            const maxCount = Math.max(...years.map(year => {
                const yearData = nonHyperscalerMemoryData.filter(d => d.year === year);
                return yearData.length;
            }));
            const yScale = d3.scaleLinear()
                .domain([0, Math.max(maxCount + 2, 8)])
                .range([chartHeight, 0]);

            // Stack data by memory type
            const stack = d3.stack()
                .keys(memoryTypes)
                .value((d, key) => {
                    const year = d.year;
                    return nonHyperscalerMemoryData.filter(p => p.year === year && p.memoryType === key).length;
                });

            const stackedData = stack(years.map(year => ({ year })));

            // Color scale
            const colorScale = d3.scaleOrdinal()
                .domain(memoryTypes)
                .range(d3.schemeSet3);

            // Tooltip
            const tooltip = d3.select('body').append('div')
                .attr('class', 'tooltip')
                .style('opacity', 0)
                .style('position', 'absolute')
                .style('background', 'rgba(26, 32, 44, 0.95)')
                .style('border', '2px solid #667eea')
                .style('border-radius', '8px')
                .style('padding', '12px')
                .style('pointer-events', 'none')
                .style('z-index', 1000)
                .style('color', '#e2e8f0')
                .style('font-size', '0.85rem')
                .style('max-width', '400px');

            // Draw stacked bars
            const layers = g.selectAll('.layer')
                .data(stackedData)
                .enter().append('g')
                .attr('class', 'layer')
                .style('fill', d => colorScale(d.key));

            layers.selectAll('rect')
                .data(d => d)
                .enter().append('rect')
                .attr('x', d => xScale(String(d.data.year)))
                .attr('y', d => yScale(d[1]))
                .attr('height', d => yScale(d[0]) - yScale(d[1]))
                .attr('width', xScale.bandwidth())
                .style('opacity', 0.8)
                .style('stroke', '#1a202c')
                .style('stroke-width', 1)
                .on('mouseover', function(event, d) {
                    const year = d.data.year;
                    const type = d.key;
                    const products = nonHyperscalerMemoryData.filter(p => p.year === year && p.memoryType === type);
                    
                    tooltip.transition().duration(200).style('opacity', 0.95);
                    tooltip.html(`
                        <div style="font-weight: 700; color: #667eea; margin-bottom: 8px;">${type}</div>
                        <div style="color: #a0aec0; margin-bottom: 8px;">Year: ${year}</div>
                        <div style="margin-top: 8px;">
                            <strong>Products (${products.length}):</strong><br/>
                            ${products.map(p => `• <a href="${p.url}" target="_blank" style="color: #667eea; text-decoration: underline;">${p.provider} - ${p.product}</a>`).join('<br/>')}
                        </div>
                    `)
                        .style('left', (event.pageX + 10) + 'px')
                        .style('top', (event.pageY - 10) + 'px');
                    
                    d3.select(this).style('opacity', 1).style('stroke-width', 2);
                })
                .on('mouseout', function() {
                    tooltip.transition().duration(200).style('opacity', 0);
                    d3.select(this).style('opacity', 0.8).style('stroke-width', 1);
                });

            // Axes
            g.append('g')
                .attr('transform', `translate(0,${chartHeight})`)
                .call(d3.axisBottom(xScale))
                .selectAll('text')
                .attr('fill', '#a0aec0')
                .style('font-size', '12px');

            g.append('g')
                .call(d3.axisLeft(yScale).ticks(8))
                .selectAll('text')
                .attr('fill', '#a0aec0')
                .style('font-size', '11px');

            // Axis labels
            g.append('text')
                .attr('x', chartWidth / 2)
                .attr('y', chartHeight + 50)
                .style('text-anchor', 'middle')
                .attr('fill', '#a0aec0')
                .style('font-size', '14px')
                .text('Year');

            g.append('text')
                .attr('transform', 'rotate(-90)')
                .attr('y', -100)
                .attr('x', -chartHeight / 2)
                .style('text-anchor', 'middle')
                .attr('fill', '#a0aec0')
                .style('font-size', '14px')
                .text('Number of Products');

            // Legend
            const legend = container.appendChild(document.createElement('div'));
            legend.className = 'chart-legend';
            legend.style.marginTop = '20px';
            
            memoryTypes.forEach(type => {
                const item = document.createElement('div');
                item.className = 'legend-item';
                item.style.marginBottom = '8px';
                item.innerHTML = `
                    <div class="legend-color" style="background: ${colorScale(type)}"></div>
                    <div class="legend-text" style="font-size: 0.85rem;">${type}</div>
                `;
                legend.appendChild(item);
            });

            // Summary stats
            const infoPanel = container.appendChild(document.createElement('div'));
            infoPanel.className = 'chart-info';
            infoPanel.style.marginTop = '20px';
            const totalProducts = nonHyperscalerMemoryData.length;
            const uniqueProviders = new Set(nonHyperscalerMemoryData.map(d => d.provider)).size;
            const products2024 = nonHyperscalerMemoryData.filter(d => d.year === 2024).length;
            const products2025 = nonHyperscalerMemoryData.filter(d => d.year === 2025).length;
            
            infoPanel.innerHTML = `
                <strong>Chart Details:</strong> Tracks ${totalProducts} memory products from ${uniqueProviders} independent providers (2023-2025). 
                ${products2024} products launched in 2024, ${products2025} in 2025. Most products focus on personal/workspace memory rather than portable, interoperable memory infrastructure—suggesting a gap for philanthropic investment.
            `;
        }

        // Module 2: Global vs. U.S. Watch Rendering Functions
        function renderGlobalWatchModule() {
            renderGlobalWatchIndicators();
            renderGlobalWatchAlerts();
        }

        // Layer 1: Indicators - Heatmap with correct data mapping
        function renderGlobalWatchIndicators() {
            const container = document.getElementById('globalWatchIndicators');
            const width = container.parentElement.clientWidth - 50;
            const height = 600;
            const margin = { top: 60, right: 200, bottom: 180, left: 150 };

            container.innerHTML = '';

            const svg = d3.select(container)
                .append('svg')
                .attr('width', width)
                .attr('height', height)
                .style('overflow', 'visible');

            const g = svg.append('g')
                .attr('transform', `translate(${margin.left},${margin.top})`);

            const chartWidth = width - margin.left - margin.right;
            const chartHeight = height - margin.top - margin.bottom;

            const providers = globalWatchData.providers;
            const standardPillars = ['P1', 'P2', 'P3', 'P4', 'P5'];
            const providerColors = {
                'OpenAI': '#ff6b35',
                'Microsoft': '#00a4ef',
                'Google': '#4285f4',
                'Anthropic': '#d4a574',
                'Meta': '#00d4aa'
            };

            // Prepare data - correctly map provider-specific pillar names to standard P1-P5
            const data = [];
            providers.forEach(provider => {
                standardPillars.forEach(standardPillar => {
                    // Find the provider-specific pillar name that maps to this standard pillar
                    const pillarMapping = globalWatchData.pillarMapping[provider];
                    let providerPillarName = null;
                    let assessment = null;
                    
                    // Find the matching pillar name for this provider
                    for (const [providerPillar, mappedPillar] of Object.entries(pillarMapping)) {
                        if (mappedPillar === standardPillar) {
                            providerPillarName = providerPillar;
                            assessment = globalWatchData.assessments[provider]?.[providerPillar];
                            break;
                        }
                    }
                    
                    if (assessment) {
                        const usCentralityLevel = globalWatchData.getUSCentralityLevel(assessment.assessment);
                        data.push({
                            provider,
                            pillar: standardPillar,
                            pillarDisplay: globalWatchData.pillarNames[standardPillar],
                            assessment: assessment.assessment,
                            usCentralityLevel: usCentralityLevel,
                            evidence: assessment.evidence,
                            source: assessment.source,
                            howToFind: assessment.howToFind || '',
                            url: assessment.url
                        });
                    }
                });
            });

            // Scales
            const xScale = d3.scaleBand()
                .domain(standardPillars)
                .range([0, chartWidth])
                .padding(0.15);

            const yScale = d3.scaleBand()
                .domain(providers)
                .range([0, chartHeight])
                .padding(0.15);

            // Create tooltip - ensure it's positioned correctly above the heatmap
            let tooltipTimeout;
            const tooltip = d3.select(container).append('div')
                .attr('class', 'tooltip')
                .attr('id', 'globalwatch-heatmap-tooltip')
                .style('opacity', 0)
                .style('position', 'fixed')
                .style('pointer-events', 'auto')
                .style('z-index', '10000')
                .style('display', 'none')
                .on('mouseenter', function(event) {
                    event.stopPropagation();
                    // Keep tooltip visible when hovering over it
                    clearTimeout(tooltipTimeout);
                    tooltip.style('opacity', 1);
                })
                .on('mouseleave', function(event) {
                    event.stopPropagation();
                    // Hide tooltip when leaving it
                    tooltip.transition().duration(200).style('opacity', 0).on('end', function() {
                        d3.select(this).style('display', 'none');
                    });
                });

            // Draw cells
            const cells = g.selectAll('.cell')
                .data(data)
                .enter()
                .append('rect')
                .attr('class', 'cell')
                .attr('x', d => xScale(d.pillar))
                .attr('y', d => yScale(d.provider))
                .attr('width', xScale.bandwidth())
                .attr('height', yScale.bandwidth())
                .attr('fill', d => d.usCentralityLevel.color)
                .attr('stroke', '#2d3748')
                .attr('stroke-width', 2)
                .attr('rx', 6)
                .attr('cursor', 'pointer')
                .on('mouseover', function(event, d) {
                    // Stop event propagation to prevent triggering on parent elements
                    event.stopPropagation();
                    
                    // Only show tooltip if hovering over actual cell (rect element)
                    const target = event.target;
                    if (target.tagName !== 'rect' || !target.classList.contains('cell')) {
                        return;
                    }
                    
                    // Clear any pending timeout
                    clearTimeout(tooltipTimeout);
                    
                    // Calculate responsive height based on viewport
                    const viewportHeight = window.innerHeight;
                    const maxTooltipHeight = Math.min(650, viewportHeight - 40); // Leave 40px margin
                    
                    tooltip.style('display', 'block');
                    tooltip.transition().duration(200).style('opacity', 1);
                    tooltip.html(`
                        <div style="max-height: ${maxTooltipHeight}px; overflow-y: auto; overflow-x: hidden; padding-right: 8px; padding-bottom: 10px;">
                            <div class="tooltip-title" style="font-size: 1.05rem; margin-bottom: 12px; padding-bottom: 10px; border-bottom: 2px solid #4a5568;">${d.provider} - ${d.pillarDisplay}</div>
                            
                            <div style="margin-bottom: 12px; padding: 10px; background: rgba(${d.usCentralityLevel.color === '#e53e3e' ? '229, 62, 62' : d.usCentralityLevel.color === '#ed8936' ? '237, 137, 54' : '72, 187, 120'}, 0.15); border-left: 4px solid ${d.usCentralityLevel.color}; border-radius: 4px;">
                                <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 6px;">
                                    <span style="color: ${d.usCentralityLevel.color}; font-weight: 700; font-size: 1.1rem;">${d.usCentralityLevel.level}</span>
                                    <span style="color: #a0aec0; font-size: 0.9rem;">United States Centrality Level</span>
                                </div>
                                <div style="color: #cbd5e0; font-size: 0.9rem; font-weight: 600;">${d.assessment}</div>
                            </div>
                            
                            <div style="margin-bottom: 12px;">
                                <div style="font-weight: 700; color: #667eea; margin-bottom: 8px; font-size: 0.95rem;">
                                    Identity, Infrastructure, and Intelligence Pillar Rationale and Strategic Implications
                                </div>
                                <div style="color: #e2e8f0; font-size: 0.9rem; line-height: 1.6; padding: 10px; background: rgba(45, 55, 72, 0.6); border-radius: 6px; border: 1px solid #4a5568;">
                                    ${d.evidence}
                                </div>
                                <div style="margin-top: 8px; padding: 8px; background: rgba(102, 126, 234, 0.1); border-radius: 4px; border-left: 3px solid #667eea;">
                                    <div style="font-size: 0.8rem; color: #cbd5e0; line-height: 1.5;">
                                        <strong style="color: #667eea;">Hyperscaler I³ Context:</strong> This assessment reflects how ${d.provider}'s approach to ${d.pillarDisplay} aligns with the Hyperscaler Influence Innovation Index (I³) framework's strategic priorities for student-controlled, institution-governed, and public-good aligned artificial intelligence infrastructure. The ${d.usCentralityLevel.level.toLowerCase()} United States centrality level indicates the degree to which this pillar supports or constrains Personal Learning Platform-aligned memory architecture.
                                    </div>
                                </div>
                            </div>
                            
                            <div style="margin-bottom: 0; padding-top: 10px; border-top: 1px solid #4a5568;">
                                <div style="font-weight: 600; color: #e2e8f0; margin-bottom: 6px; font-size: 0.9rem;">Source Documentation:</div>
                                <div style="margin-bottom: 5px; color: #cbd5e0; font-size: 0.85rem;">
                                    <strong style="color: #a0aec0;">Title:</strong> ${d.source}
                                </div>
                                ${d.howToFind ? `
                                    <div style="margin-bottom: 6px; color: #a0aec0; font-size: 0.8rem; font-style: italic;">
                                        <strong>How to Find:</strong> ${d.howToFind}
                                    </div>
                                ` : ''}
                                ${d.url ? `
                                    <div style="margin-top: 8px; padding-top: 8px; border-top: 1px solid #4a5568;">
                                        <a href="${d.url}" target="_blank" rel="noopener noreferrer" style="color: #48bb78; text-decoration: underline; font-size: 0.9rem; word-break: break-all; display: inline-block; max-width: 100%; cursor: pointer; padding: 4px 0;">
                                            View Source Document
                                        </a>
                                    </div>
                                ` : ''}
                            </div>
                        </div>
                    `)
                    .style('position', 'fixed')
                    .style('z-index', '10000')
                    .style('pointer-events', 'auto')
                    .style('max-width', '550px')
                    .style('max-height', maxTooltipHeight + 'px')
                    .style('overflow', 'hidden')
                    .style('display', 'flex')
                    .style('flex-direction', 'column');
                    
                    // Position tooltip responsively near the cell for easier access
                    const tooltipWidth = 550;
                    const cellRect = this.getBoundingClientRect();
                    
                    // Try to position tooltip to the right of the cell first
                    let leftPos = cellRect.right + 20;
                    let topPos = Math.max(20, cellRect.top - 20);
                    
                    // If tooltip would go off right edge, position to the left
                    if (leftPos + tooltipWidth > window.innerWidth - 20) {
                        leftPos = cellRect.left - tooltipWidth - 20;
                        // If still off screen, center it
                        if (leftPos < 20) {
                            leftPos = Math.max(20, (window.innerWidth - tooltipWidth) / 2);
                        }
                    }
                    
                    // Ensure tooltip doesn't go off bottom of screen
                    if (topPos + maxTooltipHeight > viewportHeight - 20) {
                        topPos = Math.max(20, viewportHeight - maxTooltipHeight - 20);
                    }
                    
                    // If tooltip would go off top, position below cell
                    if (topPos < 20 && cellRect.bottom + maxTooltipHeight < viewportHeight - 20) {
                        topPos = cellRect.bottom + 20;
                    }
                    
                    tooltip
                        .style('left', leftPos + 'px')
                        .style('top', topPos + 'px');
                    
                    d3.select(this)
                        .attr('stroke', providerColors[d.provider])
                        .attr('stroke-width', 3);
                })
                .on('mouseout', function(event, d) {
                    // Stop event propagation
                    event.stopPropagation();
                    
                    // Only hide if leaving actual cell (rect element)
                    const target = event.target;
                    if (target.tagName !== 'rect' || !target.classList.contains('cell')) {
                        return;
                    }
                    
                    // Add longer delay before hiding to allow user to move to tooltip
                    tooltipTimeout = setTimeout(function() {
                        // Only hide if mouse is not over tooltip
                        tooltip.transition().duration(200).style('opacity', 0).on('end', function() {
                            d3.select(this).style('display', 'none');
                        });
                    }, 500);
                    d3.select(this)
                        .attr('stroke', '#2d3748')
                        .attr('stroke-width', 2);
                });

            // Add P1/P2/P3 labels directly on each cell
            g.selectAll('.pillar-label')
                .data(data)
                .enter()
                .append('text')
                .attr('class', 'pillar-label')
                .attr('x', d => xScale(d.pillar) + xScale.bandwidth() / 2)
                .attr('y', d => yScale(d.provider) + yScale.bandwidth() / 2 - 10)
                .attr('text-anchor', 'middle')
                .attr('dominant-baseline', 'central')
                .attr('fill', '#ffffff')
                .attr('font-size', '16px')
                .attr('font-weight', '700')
                .style('text-shadow', '0 1px 2px rgba(0, 0, 0, 0.5)')
                .text(d => d.pillar);

            // Add United States centrality level labels (High/Medium/Low) - only show the level
            g.selectAll('.us-centrality-label')
                .data(data)
                .enter()
                .append('text')
                .attr('class', 'us-centrality-label')
                .attr('x', d => xScale(d.pillar) + xScale.bandwidth() / 2)
                .attr('y', d => yScale(d.provider) + yScale.bandwidth() / 2 + 12)
                .attr('text-anchor', 'middle')
                .attr('dominant-baseline', 'central')
                .attr('fill', '#ffffff')
                .attr('font-size', '14px')
                .attr('font-weight', '700')
                .style('text-shadow', '0 1px 2px rgba(0, 0, 0, 0.5)')
                .text(d => d.usCentralityLevel.level);

            // X-axis with full pillar names
            const xAxis = g.append('g')
                .attr('transform', `translate(0,${chartHeight})`)
                .call(d3.axisBottom(xScale));
            
            xAxis.selectAll('text')
                .attr('fill', '#a0aec0')
                .style('font-size', '10px')
                .style('font-weight', '600')
                .text(d => globalWatchData.pillarNames[d])
                .attr('transform', 'rotate(-45)')
                .style('text-anchor', 'end')
                .attr('dx', '-12px')
                .attr('dy', '12px');

            // Y-axis
            g.append('g')
                .call(d3.axisLeft(yScale))
                .selectAll('text')
                .attr('fill', d => providerColors[d] || '#e2e8f0')
                .style('font-size', '13px')
                .style('font-weight', '600');

            // Axis labels - positioned below rotated pillar names
            g.append('text')
                .attr('x', chartWidth / 2)
                .attr('y', chartHeight + 145)
                .style('text-anchor', 'middle')
                .attr('fill', '#a0aec0')
                .style('font-size', '12px')
                .style('font-weight', '600')
                .text('Hyperscaler Influence Innovation Index (I³) Pillars');

            g.append('text')
                .attr('transform', 'rotate(-90)')
                .attr('y', -120)
                .attr('x', -chartHeight / 2)
                .style('text-anchor', 'middle')
                .attr('fill', '#a0aec0')
                .style('font-size', '13px')
                .style('font-weight', '600')
                .text('Providers');

            // Pillar Legend - explain P1-P5 (positioned on right side below existing legend)
            // Calculate position below the United States Centrality Level legend
            // Legend starts at margin.top + 20, has title (12px) + 3 items (28px spacing each) + last item height (18px) = ~114px
            // Position pillar legend at margin.top + 160 with visual separator for better spacing
            const pillarLegendG = svg.append('g')
                .attr('transform', `translate(${margin.left + chartWidth + 30}, ${margin.top + 160})`);
            
            // Add a subtle separator line above the Pillar Reference title
            pillarLegendG.append('line')
                .attr('x1', 0)
                .attr('y1', -8)
                .attr('x2', 200)
                .attr('y2', -8)
                .attr('stroke', '#4a5568')
                .attr('stroke-width', 1)
                .attr('opacity', 0.5);
            
            pillarLegendG.append('text')
                .attr('x', 0)
                .attr('y', 8)
                .attr('fill', '#a0aec0')
                .style('font-size', '12px')
                .style('font-weight', '700')
                .style('letter-spacing', '0.5px')
                .text('Pillar Reference:');
            
            const pillarLegendItems = [
                { code: 'P1', name: 'Data Access & Open Standards' },
                { code: 'P2', name: 'Scalable & Safe Workflows' },
                { code: 'P3', name: 'Human Capacity & Trust' },
                { code: 'P4', name: 'Public-Good Alliances' },
                { code: 'P5', name: 'Responsible AI & Governance' }
            ];
            
            pillarLegendItems.forEach((item, i) => {
                const itemG = pillarLegendG.append('g')
                    .attr('transform', `translate(0, ${i * 32 + 28})`);
                
                itemG.append('text')
                    .attr('x', 0)
                    .attr('y', 0)
                    .attr('fill', '#667eea')
                    .style('font-size', '11px')
                    .style('font-weight', '700')
                    .text(item.code + ':');
                
                itemG.append('text')
                    .attr('x', 0)
                    .attr('y', 16)
                    .attr('fill', '#a0aec0')
                    .style('font-size', '10px')
                    .style('font-weight', '500')
                    .text(item.name);
            });

            // Legend - positioned outside the chart area
            const legend = [
                { label: 'High (U.S.-centric)', color: '#e53e3e' },
                { label: 'Medium (Mixed)', color: '#ed8936' },
                { label: 'Low (Global-strong)', color: '#48bb78' }
            ];
            
            // Position legend below the chart or to the right side
            const legendG = svg.append('g')
                .attr('transform', `translate(${margin.left + chartWidth + 30}, ${margin.top + 20})`);

            // Legend title
            legendG.append('text')
                .attr('x', 0)
                .attr('y', 0)
                .attr('fill', '#a0aec0')
                .style('font-size', '12px')
                .style('font-weight', '700')
                .text('United States Centrality Level');

            legend.forEach((item, i) => {
                const legendItem = legendG.append('g')
                    .attr('transform', `translate(0, ${i * 28 + 20})`);
                legendItem.append('rect')
                    .attr('width', 18)
                    .attr('height', 18)
                    .attr('fill', item.color)
                    .attr('rx', 3)
                    .attr('stroke', '#2d3748')
                    .attr('stroke-width', 1);
                legendItem.append('text')
                    .attr('x', 25)
                    .attr('y', 14)
                    .attr('fill', '#a0aec0')
                    .style('font-size', '11px')
                    .style('font-weight', '600')
                    .text(item.label);
            });
        }

        // Layer 2: Thresholds - Conceptual High/Medium/Low
        function renderGlobalWatchThresholds() {
            const container = document.getElementById('globalWatchThresholds');
            container.innerHTML = '';

            const providers = globalWatchData.providers;
            const standardPillars = ['P1', 'P2', 'P3', 'P4', 'P5'];

            // Calculate risk distribution per provider (conceptual, no scores)
            const providerRiskProfile = {};
            providers.forEach(provider => {
                let highCount = 0;
                let mediumCount = 0;
                let lowCount = 0;
                
                standardPillars.forEach(standardPillar => {
                    const pillarMapping = globalWatchData.pillarMapping[provider];
                    for (const [providerPillar, mappedPillar] of Object.entries(pillarMapping)) {
                        if (mappedPillar === standardPillar) {
                            const assessment = globalWatchData.assessments[provider]?.[providerPillar];
                            if (assessment) {
                                const usCentralityLevel = globalWatchData.getUSCentralityLevel(assessment.assessment);
                                if (usCentralityLevel.level === 'High') highCount++;
                                else if (usCentralityLevel.level === 'Medium') mediumCount++;
                                else lowCount++;
                            }
                            break;
                        }
                    }
                });
                
                // Determine overall United States centrality level conceptually
                let overallLevel = 'Low';
                if (highCount >= 3) overallLevel = 'High';
                else if (highCount >= 2 || mediumCount >= 3) overallLevel = 'Medium';
                else if (highCount >= 1 || mediumCount >= 2) overallLevel = 'Medium';
                
                providerRiskProfile[provider] = {
                    high: highCount,
                    medium: mediumCount,
                    low: lowCount,
                    overall: overallLevel
                };
            });

            // Create threshold status cards with McKinsey-style dropdown design
            const cardsContainer = document.createElement('div');
            cardsContainer.style.cssText = 'display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 24px; margin-top: 20px;';

            providers.forEach(provider => {
                const profile = providerRiskProfile[provider];
                const overallColor = profile.overall === 'High' ? '#e53e3e' : profile.overall === 'Medium' ? '#ed8936' : '#48bb78';
                const card = document.createElement('div');
                card.style.cssText = 'background: #2d3748; border-radius: 8px; border: 2px solid ' + overallColor + '; overflow: hidden;';
                
                // Generate provider-specific content based on new strategic analysis
                let divergenceLabel = '';
                let divergenceExplanation = '';
                let keyInsights = [];
                let strategicImplications = [];
                let strategicMeaning = '';
                
                if (provider === 'Google') {
                    divergenceLabel = 'Moderate Differences';
                    divergenceExplanation = 'Google shows moderate differences between U.S. and global positioning. While maintaining a strong global footprint, the company\'s memory, safety, and identity features are tightly integrated within the Gemini–Workspace ecosystem, creating variations in effectiveness across geographies. Standards alignment and youth safeguards show regional inconsistencies, particularly in LMIC and Global South contexts where regulatory frameworks are less developed.';
                    keyInsights = [
                        'Strong global footprint, but memory, safety, and identity are tightly bundled inside the Gemini–Workspace ecosystem, reinforcing a vertical play',
                        'Standards alignment varies by geography; open data pathways are more reliable in U.S. markets than in LMIC or Global South contexts',
                        'Youth safeguards and transparency practices continue to be uneven across regions, especially in markets without strong regulatory regimes'
                    ];
                    strategicImplications = [
                        'Global partners face greater dependency risk, as their instructional and assessment systems become more tied to a single ecosystem',
                        'Differentiated safety regimes create regional compliance gaps for ministries and multi-country NGOs',
                        'Mixed standards alignment slows the ability to move learner context across tools, underscoring the need for a horizontal data mechanism that functions across regions'
                    ];
                    strategicMeaning = 'Google\'s growth strengthens the case for a neutral, portable context layer that can operate independently of the Workspace identity loop and ensure continuity across geographies.';
                } else if (provider === 'Microsoft') {
                    divergenceLabel = 'Smallest Differences';
                    divergenceExplanation = 'Microsoft shows the smallest differences between U.S. and global positioning, providing the most globally consistent posture across safety, capacity-building, and public-sector alliances. While vertical integration exists, it is less tightly coupled than competitors, and the company maintains a more balanced approach to global markets. Open-standards alignment remains partner-driven, creating some variability but with a consistent underlying infrastructure.';
                    keyInsights = [
                        'Provides the most globally consistent posture across safety, capacity-building, and public-sector alliances',
                        'Vertical integration is identity-anchored but less tightly coupled than Google\'s or OpenAI\'s',
                        'Open-standards alignment remains partner-driven, meaning interoperability depends on local implementers'
                    ];
                    strategicImplications = [
                        'Global teams get more predictable access to AI features and safety assurances',
                        'However, variability in partner-built integrations means data portability is uneven, even if the underlying stack is consistent',
                        'Ministries may treat Microsoft as a default infrastructure option, reinforcing soft lock-in over time'
                    ];
                    strategicMeaning = 'Microsoft presents the clearest opportunity for horizontal architecture overlays—a shared context layer that reduces partner dependence on identity-bound data pathways while preserving global scalability.';
                } else if (provider === 'OpenAI') {
                    divergenceLabel = 'Biggest Differences';
                    divergenceExplanation = 'OpenAI shows the biggest differences between U.S. and global positioning, with sharp asymmetries in feature access, safety standards, and government engagement. U.S.-first teacher programs, EU carveouts, and closed orchestration runtimes create significant disparities for non-U.S. partners. The company\'s vertical integration model, centered on GPTs and Assistants within OpenAI-controlled environments, accelerates ecosystem lock-in and limits global sector alignment outside U.S./EU markets.';
                    keyInsights = [
                        'U.S.-first teacher programs, EU carveouts, and closed orchestration runtimes create the sharpest U.S.–Global asymmetry',
                        'Memory, GPTs, and Assistants continue to function primarily inside OpenAI-controlled vertical environments',
                        'Limited global government alliances diminish global sector alignment outside the U.S./EU'
                    ];
                    strategicImplications = [
                        'Non-U.S. partners experience delayed feature access, inconsistent youth safeguards, and reduced transparency',
                        'Ministries in LMIC markets face higher dependency risk, as there are fewer alternatives or public-good guardrails',
                        'Vertical integration accelerates ecosystem lock-in, especially for organizations building tutoring or advising tools'
                    ];
                    strategicMeaning = 'OpenAI\'s model underscores the need for a horizontal context architecture that ensures memory portability, reduces reliance on closed runtimes, and enables cross-tool personalization regardless of provider.';
                } else if (provider === 'Anthropic') {
                    divergenceLabel = 'Moderate Differences';
                    divergenceExplanation = 'Anthropic shows moderate differences, with Claude Memory rolling out globally with strong safety transparency, but with proprietary schemas and less developed K–12 public alliances compared to Google and Microsoft. The company\'s focus on higher-ed and enterprise markets creates uneven global coverage, particularly in K–12 contexts. While safety practices are consistent globally, the lack of open standards and limited government engagement creates gaps for ministry-scale deployments.';
                    keyInsights = [
                        'Claude Memory rolls out globally with strong safety transparency',
                        'But schemas remain proprietary, and K–12-specific public alliances are less developed than those of Google/Microsoft',
                        'The company leans toward higher-ed and enterprise markets, creating uneven global coverage'
                    ];
                    strategicImplications = [
                        'Global education partners get consistent safety but lack natural pathways for provincial or ministry-scale deployments',
                        'Proprietary data structures make cross-tool portability harder, especially in K–12 markets',
                        'Ministries may seek competitors with deeper government engagement'
                    ];
                    strategicMeaning = 'Anthropic is well-positioned for horizontal collaboration, but gaps in standards alignment mean systems still need a neutral, portable context layer to move memory and personalization across tools.';
                } else {
                    // Fallback for any other providers
                    divergenceLabel = 'Assessment Required';
                    divergenceExplanation = 'Difference level requires detailed analysis based on pillar-specific assessments.';
                    keyInsights = [
                        `Assessment based on ${profile.high} high, ${profile.medium} medium, and ${profile.low} low centrality indicators`,
                        'Requires detailed pillar-by-pillar analysis for specific partnership considerations'
                    ];
                    strategicImplications = [
                        'Partners should conduct thorough due diligence on I³ pillar alignment',
                        'Consider phased partnership approach with clear boundaries'
                    ];
                    strategicMeaning = 'Strategic positioning requires careful assessment of horizontal versus vertical architecture implications.';
                }
                
                const cardId = `threshold-card-${provider.toLowerCase().replace(/\s+/g, '-')}`;
                card.innerHTML = `
                    <div style="padding: 20px; background: linear-gradient(135deg, rgba(${overallColor === '#e53e3e' ? '229, 62, 62' : overallColor === '#ed8936' ? '237, 137, 54' : '72, 187, 120'}, 0.2) 0%, rgba(${overallColor === '#e53e3e' ? '229, 62, 62' : overallColor === '#ed8936' ? '237, 137, 54' : '72, 187, 120'}, 0.05) 100%);">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                            <div style="font-weight: 700; color: #e2e8f0; font-size: 1.3rem;">${provider}</div>
                            <div style="padding: 6px 14px; background: ${overallColor}; border-radius: 20px; color: white; font-weight: 700; font-size: 0.85rem; text-transform: uppercase; letter-spacing: 0.5px;">${profile.overall}</div>
                        </div>
                        ${divergenceLabel ? `
                            <div style="margin-top: 16px; border: 1px solid #4a5568; border-radius: 6px; overflow: hidden;">
                                <div class="dropdown-header" onclick="toggleDropdown('${cardId}-divergence', event)" style="padding: 14px 16px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; background: rgba(${overallColor === '#e53e3e' ? '229, 62, 62' : overallColor === '#ed8936' ? '237, 137, 54' : '72, 187, 120'}, 0.15); transition: background 0.2s;">
                                    <div style="color: ${overallColor}; font-weight: 700; font-size: 1rem; text-transform: uppercase; letter-spacing: 0.5px; display: flex; align-items: center; gap: 8px;">
                                        <span style="width: 4px; height: 16px; background: ${overallColor}; display: inline-block; border-radius: 2px;"></span>
                                        ${divergenceLabel}
                                    </div>
                                    <span class="dropdown-arrow" id="${cardId}-divergence-arrow" style="color: ${overallColor}; font-size: 0.9rem; transition: transform 0.3s;">▼</span>
                                </div>
                                <div class="dropdown-content" id="${cardId}-divergence" style="display: none; padding: 16px; background: rgba(${overallColor === '#e53e3e' ? '229, 62, 62' : overallColor === '#ed8936' ? '237, 137, 54' : '72, 187, 120'}, 0.05);">
                                    <div style="color: #cbd5e0; font-size: 0.9rem; line-height: 1.6;">${divergenceExplanation}</div>
                                </div>
                            </div>
                        ` : ''}
                    </div>
                    
                    <div style="border-top: 1px solid #4a5568;">
                        <div class="dropdown-section" style="border-bottom: 1px solid #4a5568;">
                            <div class="dropdown-header" onclick="toggleDropdown('${cardId}-insights', event)" style="padding: 16px 20px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; background: #1a202c; transition: background 0.2s;">
                                <div style="font-weight: 600; color: #667eea; font-size: 0.95rem; display: flex; align-items: center; gap: 8px;">
                                    <span style="width: 4px; height: 16px; background: #667eea; display: inline-block; border-radius: 2px;"></span>
                                    Strategic Insights
                                </div>
                                <span class="dropdown-arrow" id="${cardId}-insights-arrow" style="color: #667eea; font-size: 0.9rem; transition: transform 0.3s;">▼</span>
                            </div>
                            <div class="dropdown-content" id="${cardId}-insights" style="display: none; padding: 20px; background: #2d3748;">
                                <ul style="list-style: none; padding: 0; margin: 0;">
                                    ${keyInsights.map((insight, idx) => `
                                        <li style="padding: 10px 0; padding-left: 24px; position: relative; color: #cbd5e0; font-size: 0.9rem; line-height: 1.6; border-bottom: ${idx < keyInsights.length - 1 ? '1px solid rgba(74, 85, 104, 0.5)' : 'none'};">
                                            <span style="position: absolute; left: 0; top: 14px; width: 6px; height: 6px; background: #667eea; border-radius: 50%;"></span>
                                            ${insight}
                                        </li>
                                    `).join('')}
                                </ul>
                            </div>
                        </div>
                        
                        <div class="dropdown-section">
                            <div class="dropdown-header" onclick="toggleDropdown('${cardId}-implications', event)" style="padding: 16px 20px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; background: #1a202c; transition: background 0.2s;">
                                <div style="font-weight: 600; color: #667eea; font-size: 0.95rem; display: flex; align-items: center; gap: 8px;">
                                    <span style="width: 4px; height: 16px; background: #667eea; display: inline-block; border-radius: 2px;"></span>
                                    Strategic Implications
                                </div>
                                <span class="dropdown-arrow" id="${cardId}-implications-arrow" style="color: #667eea; font-size: 0.9rem; transition: transform 0.3s;">▼</span>
                            </div>
                            <div class="dropdown-content" id="${cardId}-implications" style="display: none; padding: 20px; background: #2d3748;">
                                <ul style="list-style: none; padding: 0; margin: 0;">
                                    ${strategicImplications.map((implication, idx) => `
                                        <li style="padding: 10px 0; padding-left: 24px; position: relative; color: #cbd5e0; font-size: 0.9rem; line-height: 1.6; border-bottom: ${idx < strategicImplications.length - 1 ? '1px solid rgba(74, 85, 104, 0.5)' : 'none'};">
                                            <span style="position: absolute; left: 0; top: 14px; width: 6px; height: 6px; background: #667eea; border-radius: 50%;"></span>
                                            ${implication}
                                        </li>
                                    `).join('')}
                                </ul>
                            </div>
                        </div>
                        
                        <div class="dropdown-section">
                            <div class="dropdown-header" onclick="toggleDropdown('${cardId}-meaning', event)" style="padding: 16px 20px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; background: #1a202c; transition: background 0.2s;">
                                <div style="font-weight: 600; color: #667eea; font-size: 0.95rem; display: flex; align-items: center; gap: 8px;">
                                    <span style="width: 4px; height: 16px; background: #667eea; display: inline-block; border-radius: 2px;"></span>
                                    Strategic Meaning (Horizontal vs Vertical)
                                </div>
                                <span class="dropdown-arrow" id="${cardId}-meaning-arrow" style="color: #667eea; font-size: 0.9rem; transition: transform 0.3s;">▼</span>
                            </div>
                            <div class="dropdown-content" id="${cardId}-meaning" style="display: none; padding: 20px; background: #2d3748;">
                                <div style="color: #cbd5e0; font-size: 0.9rem; line-height: 1.7; padding: 12px; background: rgba(102, 126, 234, 0.1); border-left: 3px solid #667eea; border-radius: 4px;">
                                    ${strategicMeaning}
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                cardsContainer.appendChild(card);
            });

            container.appendChild(cardsContainer);

            // Add Cross-Provider Strategic Takeaways as a dropdown section
            const takeawaysContainer = document.createElement('div');
            takeawaysContainer.style.cssText = 'margin-top: 30px; background: #2d3748; border-radius: 8px; border: 2px solid #667eea; overflow: hidden;';
            
            const takeaways = [
                'The field is bifurcating: closed vertical stacks (OpenAI, Google) vs. more flexible or horizontal-compatible stacks (Microsoft, Anthropic).',
                'Global South markets consistently receive lower-feature, less-integrated, or later-stage deployments, accelerating regional inequity.',
                'Ministries and districts face rising switching costs, with learner data increasingly tied to the identity platforms of hyperscalers.',
                'Youth protections and safety norms are not scaling globally, creating governance risk and regulatory exposure.',
                'To maintain equity, interoperability, and long-term adaptability, the ecosystem increasingly needs a horizontal, portable mechanism for learner context—independent of any single provider\'s stack.'
            ];

            const takeawaysId = 'global-watch-takeaways';
            takeawaysContainer.innerHTML = `
                <div class="dropdown-section">
                    <div class="dropdown-header" onclick="toggleDropdown('${takeawaysId}', event)" style="padding: 20px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; background: linear-gradient(135deg, rgba(102, 126, 234, 0.2) 0%, rgba(102, 126, 234, 0.05) 100%); transition: background 0.2s;">
                        <div style="font-weight: 700; color: #667eea; font-size: 1.1rem; display: flex; align-items: center; gap: 10px;">
                            <span style="width: 5px; height: 24px; background: #667eea; display: inline-block; border-radius: 2px;"></span>
                            Cross-Provider Strategic Takeaways
                        </div>
                        <span class="dropdown-arrow" id="${takeawaysId}-arrow" style="color: #667eea; font-size: 1rem; transition: transform 0.3s;">▼</span>
                    </div>
                    <div class="dropdown-content" id="${takeawaysId}" style="display: none; padding: 20px; background: #2d3748;">
                        <ul style="list-style: none; padding: 0; margin: 0;">
                            ${takeaways.map((takeaway, idx) => `
                                <li style="padding: 8px 0; padding-left: 24px; position: relative; color: #cbd5e0; font-size: 0.9rem; line-height: 1.6; border-bottom: ${idx < takeaways.length - 1 ? '1px solid rgba(74, 85, 104, 0.5)' : 'none'};">
                                    <span style="position: absolute; left: 0; top: 12px; width: 6px; height: 6px; background: #667eea; border-radius: 50%; border: 1px solid rgba(102, 126, 234, 0.3);"></span>
                                    ${takeaway}
                                </li>
                            `).join('')}
                        </ul>
                    </div>
                </div>
            `;
            
            container.appendChild(takeawaysContainer);
        }

        // Layer 3: Alerts - Detailed provider and pillar alerts
        function renderGlobalWatchAlerts() {
            const container = document.getElementById('globalWatchAlerts');
            container.innerHTML = '';

            // Alert data structure with scorecard information per provider
            const alertData = {
                'OpenAI': {
                    color: '#ff6b35',
                    overview: 'United States-first teacher programs, European Union carveouts, and closed orchestration runtimes create the sharpest United States–Global asymmetry.',
                    scorecard: {
                        whatChanged: {
                            'P1': {
                                summary: 'No native Ed-Fi/CASE support; interoperability handled through SIS vendors. OpenAI continues to rely entirely on SIS vendors to achieve education interoperability with no movement toward native open-standards support.',
                                source: 'Ed-Fi SIS Integration Guide',
                                sourceUrl: 'https://docs.ed-fi.org/getting-started/provider-playbook/implementation/ed-fi-api-integration-architecture-for-data-providers/'
                            },
                            'P2': {
                                summary: 'Memory system gains capability without portability or governance clarity. Memory rolled out globally except United Kingdom/European Union/European Economic Area, but no export pathways or governance transparency improvements.',
                                source: 'Memory and New Controls for ChatGPT — June 2025',
                                sourceUrl: 'https://openai.com/index/memory-and-new-controls-for-chatgpt/'
                            },
                            'P3': {
                                summary: 'Educator enablement remains structurally United States-first with limited global teacher or ministry-facing investment. Free ChatGPT for Teachers available only for United States; India Learning Accelerator represents limited global expansion.',
                                source: 'ChatGPT for Teachers — OpenAI for Education',
                                sourceUrl: 'https://iblnews.org/story/openai-releases-chatgpt-for-teachers-providing-them-free-access-until-june-2027'
                            },
                            'P5': {
                                summary: 'No evidence of third-party audits or youth-specific safeguards globally. Youth protections strongest in United States/European Union; expanding elsewhere but without independent validation mechanisms.',
                                source: 'OpenAI Safety Card Framework',
                                sourceUrl: 'https://openai.com/index/introducing-the-teen-safety-blueprint/'
                            }
                        },
                        implicationsForPartners: [
                            'Non-United States partners experience delayed feature access, inconsistent youth safeguards, and reduced transparency',
                            'Ministries in Low and Middle Income Country markets face higher dependency risk, as there are fewer alternatives or public-good guardrails',
                            'Vertical integration accelerates ecosystem lock-in, especially for organizations building tutoring or advising tools',
                            'Districts and ministries must interpret model behavior without independent validation'
                        ],
                        implicationsForStrategy: 'OpenAI\'s model underscores the need for a horizontal context architecture that ensures memory portability, reduces reliance on closed runtimes, and enables cross-tool personalization regardless of provider. The sharpest United States–Global asymmetry creates strategic considerations for global Personal Learning Platform positioning.'
                    },
                    alerts: {
                        'P1': {
                            pillarName: 'P1 – Data Access & Open Standards',
                            evidence: 'No native Ed-Fi/CASE support; interoperability handled through SIS vendors.',
                            source: 'Ed-Fi SIS Integration Guide',
                            sourceUrl: 'https://docs.ed-fi.org/getting-started/provider-playbook/implementation/ed-fi-api-integration-architecture-for-data-providers/',
                            alert: 'OpenAI continues to rely entirely on SIS vendors to achieve education interoperability. No Q4 documentation indicates movement toward native open-standards support.',
                            implication: 'Data portability remains low; vendor schemas dominate; horizontal system continuity is not natively supported.',
                            watchFor: [
                                'Any mention of Ed-Fi or CASE in Assistants API updates',
                                'Any exported memory object schema changes',
                                'Partnerships announcing government-led data standards alignment'
                            ]
                        },
                        'P2': {
                            pillarName: 'P2 – Scalable & Safe AI Workflows',
                            evidence: 'Memory rolled out globally except UK/EU/EEA (2025).',
                            source: 'Memory and New Controls for ChatGPT — June 2025',
                            sourceUrl: 'https://openai.com/index/memory-and-new-controls-for-chatgpt/',
                            alert: 'OpenAI\'s memory system continues to gain capability without gaining portability or governance clarity.',
                            implication: 'Higher model competence + unchanged portability = increased lock-in pressure for Personal Learning Platforms relying on Assistants/Generative Pre-trained Transformers.',
                            watchFor: [
                                'New memory APIs',
                                'Cross-app context routing features',
                                'Memory export pathways'
                            ]
                        },
                        'P3': {
                            pillarName: 'P3 – Human Capacity & Trust',
                            evidence: 'Free ChatGPT for Teachers for U.S.; India Learning Accelerator global pilot.',
                            source: 'ChatGPT for Teachers — OpenAI for Education',
                            sourceUrl: 'https://iblnews.org/story/openai-releases-chatgpt-for-teachers-providing-them-free-access-until-june-2027',
                            alert: 'Educator enablement remains structurally United States-first with limited global teacher or ministry-facing investment.',
                            implication: 'Global ministries risk falling behind on safety-ready classroom use; teacher-readiness gaps widen.',
                            watchFor: [
                                'Any expansion of ChatGPT for Teachers outside United States',
                                'Ministry partnerships in Africa, Latin America, Southeast Asia',
                                'Dedicated training content translated or localized'
                            ]
                        },
                        'P5': {
                            pillarName: 'P5 – Responsible AI & Governance',
                            evidence: 'Youth protections strongest in United States/European Union; expanding elsewhere.',
                            source: 'OpenAI Safety Card Framework',
                            sourceUrl: 'https://openai.com/index/introducing-the-teen-safety-blueprint/',
                            alert: 'OpenAI transparency is improving (memory cards), but no evidence of third-party audits or youth-specific safeguards globally.',
                            implication: 'Districts and ministries must interpret model behavior without independent validation.',
                            watchFor: [
                                'External audits',
                                'Global youth-safety frameworks',
                                'Open Source Initiative-style oversight collaborations'
                            ]
                        }
                    }
                },
                'Google': {
                    color: '#4285f4',
                    overview: 'Strong global footprint, but memory, safety, and identity are tightly bundled inside the Gemini–Workspace ecosystem, reinforcing a vertical play.',
                    scorecard: {
                        whatChanged: {
                            'P1': {
                                summary: 'Workspace remains a closed memory environment with no signals of open-schema alignment. Ed-Fi LMS Toolkit supports Classroom sync but does not enable open data portability or cross-platform memory sharing.',
                                source: 'Ed-Fi LMS Toolkit for Google Classroom',
                                sourceUrl: 'https://docs.ed-fi.org/getting-started/edfi-exchange/technology/ed-fi-lms-toolkit/'
                            },
                            'P2': {
                                summary: 'Gemini\'s agentic workflows scale, but only inside Google identity fabrics. Gemini memory available in 230+ countries, but workflows remain tightly bound to Google Workspace identity ecosystem.',
                                source: 'Gemini App – Country & Region Availability List',
                                sourceUrl: 'https://support.google.com/gemini/answer/13575153?hl=en'
                            },
                            'P3': {
                                summary: 'Training is global but not equally distributed; heavy concentration in United States, United Kingdom, Australia. Gemini certification and training programs exist across regions but with significant geographic disparities.',
                                source: 'Google for Education – Global Teacher Training Stories',
                                sourceUrl: 'https://developers.google.com/gemini-code-assist/resources/locations-pro-ultra'
                            },
                            'P4': {
                                summary: 'Ministry-scale deployments of Gemini EDU demonstrate global reach, but partnerships tend to reinforce ecosystem lock-in rather than enable open interoperability standards.',
                                source: 'Google for Education Ministry Partnerships',
                                sourceUrl: 'https://edudirectory.withgoogle.com/'
                            },
                            'P5': {
                                summary: 'Governance frameworks are robust but platform-bound, not portable. Strong baseline protections exist but depth varies regionally, and safeguards cannot be migrated outside Google ecosystem.',
                                source: 'Google Workspace for Education – Privacy & Safety Whitepaper',
                                sourceUrl: 'https://edu.google.com/intl/ALL_us/our-values/privacy-security/'
                            }
                        },
                        implicationsForPartners: [
                            'Districts using Google ecosystems face the highest switching costs of any hyperscaler',
                            'Global partners are unevenly prepared to use Gemini safely in classrooms',
                            'Differentiated safety regimes create regional compliance gaps for ministries and multi-country non-governmental organizations',
                            'Districts must trust Google identity governance fully; cannot migrate safeguards'
                        ],
                        implicationsForStrategy: 'Google\'s growth strengthens the case for a neutral, portable context layer that can operate independently of the Workspace identity loop and ensure continuity across geographies. The moderate global differences indicate the need for horizontal data mechanisms that function across regions.'
                    },
                    alerts: {
                        'P1': {
                            pillarName: 'P1 – Data Access & Open Standards',
                            evidence: 'Ed-Fi LMS Toolkit supports Classroom sync.',
                            source: 'Ed-Fi LMS Toolkit for Google Classroom',
                            sourceUrl: 'https://docs.ed-fi.org/getting-started/edfi-exchange/technology/ed-fi-lms-toolkit/',
                            alert: 'Workspace remains a closed memory environment with no signals of open-schema alignment.',
                            implication: 'Districts using Google ecosystems face the highest switching costs of any hyperscaler.',
                            watchFor: [
                                'Drive/Classroom API schema changes',
                                'Any exportable "Cross-Gemini Profile" format',
                                'Announcements tied to state data standards'
                            ]
                        },
                        'P2': {
                            pillarName: 'P2 – Scalable & Safe AI Workflows',
                            evidence: 'Gemini memory available in 230+ countries.',
                            source: 'Gemini App – Country & Region Availability List',
                            sourceUrl: 'https://support.google.com/gemini/answer/13575153?hl=en',
                            alert: 'Gemini\'s agentic workflows scale, but only inside Google identity fabrics.',
                            implication: 'Vertical integration deepens; cross-tool personalization becomes Google-only.',
                            watchFor: [
                                'Any "Gemini Outside Workspace" announcements',
                                'Memory tools for third-party partners',
                                'Education pricing parity'
                            ]
                        },
                        'P3': {
                            pillarName: 'P3 – Human Capacity & Trust',
                            evidence: 'Gemini certification & training programs across regions.',
                            source: 'Google for Education – Global Teacher Training Stories',
                            sourceUrl: 'https://developers.google.com/gemini-code-assist/resources/locations-pro-ultra',
                            alert: 'Training is global but not equally distributed; heavy concentration in United States, United Kingdom, Australia.',
                            implication: 'Global partners are unevenly prepared to use Gemini safely in classrooms.',
                            watchFor: [
                                'Regional training expansions',
                                'Localization rollouts',
                                'Youth-safety guardrail releases'
                            ]
                        },
                        'P4': {
                            pillarName: 'P4 – Public-Good Alliances',
                            evidence: 'Ministry-scale deployments of Gemini EDU.',
                            source: 'Google for Education Ministry Partnerships',
                            sourceUrl: 'https://edudirectory.withgoogle.com/',
                            alert: 'Google remains active in public-good alliances but tends to use them for ecosystem reinforcement, not open interoperability.',
                            implication: 'Standards alignment gains symbolic credibility but not open portability.',
                            watchFor: [
                                'New state-level interoperability projects',
                                'United Nations Educational, Scientific and Cultural Organization/Google co-governance outputs',
                                'Grantmaking tied to data standards'
                            ]
                        },
                        'P5': {
                            pillarName: 'P5 – Responsible AI & Governance',
                            evidence: 'Strong baseline protections; depth varies regionally.',
                            source: 'Google Workspace for Education – Privacy & Safety Whitepaper',
                            sourceUrl: 'https://edu.google.com/intl/ALL_us/our-values/privacy-security/',
                            alert: 'Governance frameworks are robust but platform-bound, not portable.',
                            implication: 'Districts must trust Google identity governance fully; cannot migrate safeguards.',
                            watchFor: [
                                'Shared governance APIs',
                                'Safety card alignment with competitors',
                                'Youth-safeguard global rollout parity'
                            ]
                        }
                    }
                },
                'Microsoft': {
                    color: '#00a4ef',
                    overview: 'Provides the most globally consistent posture across safety, capacity-building, and public-sector alliances with identity-anchored but less tightly coupled integration.',
                    scorecard: {
                        whatChanged: {
                            'P1': {
                                summary: 'Open alignment is still partner-led, not platform-native. Ed-Fi ODS/API deployments often run on Azure with alignment via partners, but native platform integration remains limited.',
                                source: 'Ed-Fi ODS/API on Azure – Reference Architecture',
                                sourceUrl: ''
                            },
                            'P2': {
                                summary: 'Memory remains identity-anchored (Entra ID), limiting cross-ecosystem memory. Copilot Memory released region-by-region across 170+ markets, but remains tied to Microsoft identity infrastructure.',
                                source: 'Microsoft Copilot Release Notes (2025)',
                                sourceUrl: 'https://learn.microsoft.com/en-us/copilot/microsoft-365/release-notes?tabs=all%2Cwin%2Cweb%2Candroidos%2Cappleios%2Cmac'
                            },
                            'P3': {
                                summary: 'Global Training Partner Network active worldwide, providing the most globally consistent educator capacity-building across all hyperscalers. Training infrastructure scales internationally with less United States-centric bias.',
                                source: 'Microsoft Global Training Partner Program',
                                sourceUrl: 'https://partner.microsoft.com/en-US/explore/education/gtp'
                            },
                            'P4': {
                                summary: 'Provides the most globally consistent posture across safety, capacity-building, and public-sector alliances. United Nations Educational, Scientific and Cultural Organization-aligned digital skill programs and ministry memorandums of understanding demonstrate strong global engagement.',
                                source: 'Microsoft Elevate AI Initiative (20M Training Commitment)',
                                sourceUrl: 'https://blogs.microsoft.com/on-the-issues/2025/07/09/elevate/'
                            },
                            'P5': {
                                summary: 'Vertical integration is identity-anchored but less tightly coupled than Google\'s or OpenAI\'s. European Union AI Act compliance and global governance standards provide consistent safety framework, though memory remains tenant-bound.',
                                source: 'Microsoft Responsible AI Standard v2 (2025)',
                                sourceUrl: 'https://www.microsoft.com/en-us/ai/responsible-ai'
                            }
                        },
                        implicationsForPartners: [
                            'Global teams get more predictable access to artificial intelligence features and safety assurances',
                            'However, variability in partner-built integrations means data portability is uneven, even if the underlying stack is consistent',
                            'Portability exists, but only when districts or vendors configure it',
                            'Ministries may treat Microsoft as a default infrastructure option, reinforcing soft lock-in over time'
                        ],
                        implicationsForStrategy: 'Microsoft presents the clearest opportunity for horizontal architecture overlays—a shared context layer that reduces partner dependence on identity-bound data pathways while preserving global scalability. The smallest differences across providers make it the most aligned with national-level education policy.'
                    },
                    alerts: {
                        'P1': {
                            pillarName: 'P1 – Data & Standards',
                            evidence: 'Ed-Fi ODS/API deployments often run on Azure; alignment via partners.',
                            source: 'Ed-Fi ODS/API on Azure – Reference Architecture',
                            sourceUrl: '',
                            alert: 'Microsoft is the closest to open standards, but open alignment is still partner-led, not platform-native.',
                            implication: 'Portability exists, but only when districts or vendors configure it.',
                            watchFor: [
                                'Native Ed-Fi support in Learn, Teams, or Copilot',
                                'Global parity of connectors',
                                'Schema export formats'
                            ]
                        },
                        'P2': {
                            pillarName: 'P2 – Scalable Workflows',
                            evidence: 'Copilot Memory released region-by-region; Copilot in 170+ markets.',
                            source: 'Microsoft Copilot Release Notes (2025)',
                            sourceUrl: 'https://learn.microsoft.com/en-us/copilot/microsoft-365/release-notes?tabs=all%2Cwin%2Cweb%2Candroidos%2Cappleios%2Cmac',
                            alert: 'Microsoft offers the most scalable education-safe workflows but remains identity-anchored (Entra ID).',
                            implication: 'Strong "safe" workflow scaling, but cross-ecosystem memory remains limited.',
                            watchFor: [
                                'Copilot agent store',
                                'Memory/user interface integration',
                                'Region-specific pricing shifts'
                            ]
                        },
                        'P3': {
                            pillarName: 'P3 – Human Capacity & Trust',
                            evidence: 'Global Training Partner Network active worldwide.',
                            source: 'Microsoft Global Training Partner Program',
                            sourceUrl: 'https://partner.microsoft.com/en-US/explore/education/gtp',
                            alert: 'Microsoft offers the most global, least United States-centric educator capacity-building.',
                            implication: 'Globally scalable adoption potential, but requires partners to set up integration layers.',
                            watchFor: [
                                'Artificial intelligence-specific training modules',
                                'Low and Middle Income Country-focused teaching materials',
                                'Ministry partnerships in Africa and Latin America'
                            ]
                        },
                        'P4': {
                            pillarName: 'P4 – Public-Good Alliances',
                            evidence: 'United Nations Educational, Scientific and Cultural Organization-aligned digital skill programs; ministry memorandums of understanding.',
                            source: 'Microsoft Elevate AI Initiative (20M Training Commitment)',
                            sourceUrl: 'https://blogs.microsoft.com/on-the-issues/2025/07/09/elevate/',
                            alert: 'Microsoft is the most active hyperscaler in government co-governance.',
                            implication: 'Most aligned with national-level education policy.',
                            watchFor: [
                                'Ed-Fi/CASE partnership news',
                                'State-level artificial intelligence readiness programs',
                                'Open governance APIs'
                            ]
                        },
                        'P5': {
                            pillarName: 'P5 – Governance',
                            evidence: 'European Union AI Act compliance and global governance standards.',
                            source: 'Microsoft Responsible AI Standard v2 (2025)',
                            sourceUrl: 'https://www.microsoft.com/en-us/ai/responsible-ai',
                            alert: 'Microsoft remains the governance frontrunner, but memory remains tenant-bound.',
                            implication: 'Best safety compliance; weakest portability.',
                            watchFor: [
                                'Memory export APIs',
                                'Third-party audit expansions',
                                'Global youth safeguards'
                            ]
                        }
                    }
                },
                'Anthropic': {
                    color: '#d4a574',
                    overview: 'Claude Memory rolls out globally with strong safety transparency, but schemas remain proprietary and K–12-specific public alliances are less developed.',
                    scorecard: {
                        whatChanged: {
                            'P1': {
                                summary: 'Schemas remain proprietary; relies on AWS Bedrock or implementers. No Ed-Fi/CASE schema support; data portability depends entirely on third-party implementers or AWS infrastructure.',
                                source: 'AWS Bedrock + Anthropic Integration Notes',
                                sourceUrl: 'https://aws.amazon.com/blogs/publicsector/claude-for-education-now-available-in-aws-marketplace/'
                            },
                            'P2': {
                                summary: 'Claude Memory rolls out globally with strong safety transparency. Available for Pro/Max/Team without region restrictions, providing consistent global access with transparent safety frameworks.',
                                source: 'Claude Memory Release Notes (2025)',
                                sourceUrl: 'https://support.claude.com/en/articles/12138966-release-notes'
                            },
                            'P3': {
                                summary: 'Company leans toward higher-education and enterprise markets. Claude for Education used across global faculty, but K–12-specific capacity-building and teacher training programs are less developed than competitors.',
                                source: 'Anthropic Education Report (2025)',
                                sourceUrl: 'https://www.anthropic.com/news/anthropic-education-report-how-educators-use-claude'
                            },
                            'P4': {
                                summary: 'K–12-specific public alliances are less developed than those of Google/Microsoft. Strong United States policy presence but fewer global ministry partnerships, limiting system-level education sector engagement.',
                                source: 'Anthropic AI Safety & Public Policy Briefings',
                                sourceUrl: 'https://www.anthropic.com/news/core-views-on-ai-safety'
                            },
                            'P5': {
                                summary: 'Strong transparency; youth protections still developing globally. Leads on safety frameworks with high transparency, but youth-specific safeguards and global governance patterns are still evolving.',
                                source: 'Claude Safety Overview – Anthropic',
                                sourceUrl: 'https://www.anthropic.com/news/building-safeguards-for-claude'
                            }
                        },
                        implicationsForPartners: [
                            'Global education partners get consistent safety but lack natural pathways for provincial or ministry-scale deployments',
                            'Proprietary data structures make cross-tool portability harder, especially in K–12 markets',
                            'Partners adopting Claude must build their own enablement layer',
                            'Ministries may seek competitors with deeper government engagement'
                        ],
                        implicationsForStrategy: 'Anthropic is well-positioned for horizontal collaboration, but gaps in standards alignment mean systems still need a neutral, portable context layer to move memory and personalization across tools. The moderate differences offer strong safety frameworks but require careful assessment of horizontal versus vertical architecture implications.'
                    },
                    alerts: {
                        'P1': {
                            pillarName: 'P1 – Data & Standards',
                            evidence: 'No Ed-Fi/CASE schema; relies on AWS Bedrock or implementers.',
                            source: 'AWS Bedrock + Anthropic Integration Notes',
                            sourceUrl: 'https://aws.amazon.com/blogs/publicsector/claude-for-education-now-available-in-aws-marketplace/',
                            alert: 'Anthropic remains proprietary at schema level.',
                            implication: 'Portability depends entirely on implementers.',
                            watchFor: [
                                'Any Bedrock-native schema alignment',
                                'Export formats from Claude Memory',
                                'State-led integration pilots'
                            ]
                        },
                        'P2': {
                            pillarName: 'P2 – Scalable Workflows',
                            evidence: 'Claude Memory available for Pro/Max/Team without region restrictions.',
                            source: 'Claude Memory Release Notes (2025)',
                            sourceUrl: 'https://support.claude.com/en/articles/12138966-release-notes',
                            alert: 'Anthropic offers the most stable long-context performance but lacks rich developer tools.',
                            implication: 'Ideal for safety-critical workflows; less ideal for education integration.',
                            watchFor: [
                                'Claude Agents',
                                'Education pricing',
                                'Youth-safety alignment'
                            ]
                        },
                        'P3': {
                            pillarName: 'P3 – Human Capacity & Trust',
                            evidence: 'Claude for Education used across global faculty.',
                            source: 'Anthropic Education Report (2025)',
                            sourceUrl: 'https://www.anthropic.com/news/anthropic-education-report-how-educators-use-claude',
                            alert: 'Anthropic has not yet entered teacher training or ministry capacity-building.',
                            implication: 'Partners adopting Claude must build their own enablement layer.',
                            watchFor: [
                                'New partnerships with non-governmental organizations',
                                'Ministry of Education capacity pilots',
                                'Teacher instructional support offerings'
                            ]
                        },
                        'P4': {
                            pillarName: 'P4 – Public-Good Alliances',
                            evidence: 'Strong United States policy presence; fewer global ministry partnerships.',
                            source: 'Anthropic AI Safety & Public Policy Briefings',
                            sourceUrl: 'https://www.anthropic.com/news/core-views-on-ai-safety',
                            alert: 'Anthropic\'s public-good posture is strong on safety but light on education.',
                            implication: 'Strong for responsible artificial intelligence; weak for system interoperability.',
                            watchFor: [
                                'New Ministry of Education pilots',
                                'Open-safe-API announcements',
                                'Joint governance toolkits'
                            ]
                        },
                        'P5': {
                            pillarName: 'P5 – Governance',
                            evidence: 'Strong transparency; youth protections still developing globally.',
                            source: 'Claude Safety Overview – Anthropic',
                            sourceUrl: 'https://www.anthropic.com/news/building-safeguards-for-claude',
                            alert: 'Strongest cross-provider safety reputation; weakest ecosystem integration.',
                            implication: 'Valuable for high-trust, low-interoperability environments.',
                            watchFor: [
                                'Third-party audits',
                                'Global youth safeguards',
                                'Memory-governance patterns'
                            ]
                        }
                    }
                },
                'Meta': {
                    color: '#00d4aa',
                    overview: 'Open-source model ecosystem with global reach, but limited structured K–12 alignment, developer-managed memory infrastructure, and minimal education-specific capacity programs.',
                    scorecard: {
                        whatChanged: {
                            'P1': {
                                summary: 'Open-source models with permissive licensing but no native Ed-Fi/CASE support. Meta publishes Llama, Llama Guard, and Llama Stack with open licensing, but interoperability depends entirely on implementers building connectors via Llama Stack or external RAG. No platform-native education data standards alignment.',
                                source: 'The future of AI: Built with Llama',
                                sourceUrl: 'https://ai.meta.com/blog/future-of-ai-built-with-llama/'
                            },
                            'P2': {
                                summary: 'Agent tools improving but lack workflow platform equivalent. Llama Agents Toolkit adds structured planning, tool-use, and episodic/semantic memory patterns, but Meta lacks a workflow platform equivalent to Copilot Studio or Gemini Flows. Agents rely on developer-managed memory and custom orchestration.',
                                source: 'The Llama 4 herd',
                                sourceUrl: 'https://ai.meta.com/blog/llama-4-multimodal-intelligence/'
                            },
                            'P3': {
                                summary: 'Global platform reach but minimal structured educator programs. Meta AI is deployed globally through WhatsApp, Messenger, and Instagram, but no structured K–12 teacher training or educator capacity programs exist, unlike Microsoft GTP or Google EDU. Adoption is consumer-driven, not institutionally supported.',
                                source: 'Meta AI Launch + Global Rollout',
                                sourceUrl: 'https://ppc.land/meta-plans-to-use-ai-chat-data-for-ad-targeting-starting-december/'
                            },
                            'P4': {
                                summary: 'Limited education-specific public-good presence. Meta partners largely on digital literacy, misinformation, and safety initiatives, but few ministry-scale education partnerships or AI-in-education public-good programs are documented compared to competitors.',
                                source: 'Meta Digital Literacy & Safety Partnerships',
                                sourceUrl: 'https://wethinkdigital.fb.com/partners/'
                            },
                            'P5': {
                                summary: 'Strong transparency and open-source safety tools but less formalized youth protections. Meta publishes detailed safety research, transparency reports, and open-source safety tools (Llama Guard, CyberSec Eval). Youth/education-specific protections are less formalized than Microsoft\'s Responsible AI Standard.',
                                source: 'Meta AI Safety Research + Llama Guard',
                                sourceUrl: 'https://ai.meta.com/research'
                            }
                        },
                        implicationsForPartners: [
                            'Open-source foundation provides flexibility but requires significant implementation work for education use cases',
                            'No structured education infrastructure means partners must build capacity-building and training programs independently',
                            'Consumer-driven adoption creates challenges for institutional deployment and governance',
                            'Limited ministry partnerships reduce opportunities for system-level education sector engagement',
                            'Developer-managed memory requires technical expertise, creating barriers for non-technical education organizations'
                        ],
                        implicationsForStrategy: 'Meta\'s open-source approach offers potential for horizontal, interoperable memory architectures, but the lack of structured education alignment and developer-managed infrastructure creates gaps that may require neutral platform layers to bridge. The moderate differences and global reach suggest opportunities for public-good partnerships focused on open standards and portable memory systems.'
                    },
                    alerts: {
                        'P1': {
                            pillarName: 'P1 – Data Access & Open Standards',
                            evidence: 'Open-source models (Llama, Llama Guard, Llama Stack) with permissive licensing, but provides no native Ed-Fi or CASE support.',
                            source: 'Llama Stack Documentation (2024–2025)',
                            sourceUrl: 'https://ai.meta.com/blog/future-of-ai-built-with-llama/',
                            alert: 'Meta\'s open-source ecosystem offers flexibility but no platform-native education data standards alignment.',
                            implication: 'Interoperability depends entirely on implementers building connectors; no natural pathway for education data portability.',
                            watchFor: [
                                'Any Ed-Fi or CASE connector announcements',
                                'Llama Stack education-specific integrations',
                                'Partnerships with SIS vendors or education data platforms',
                                'Open-schema initiatives tied to education standards'
                            ]
                        },
                        'P2': {
                            pillarName: 'P2 – Scalable & Safe Workflows',
                            evidence: 'Llama Agents Toolkit adds structured planning, tool-use, and episodic/semantic memory patterns.',
                            source: 'Meta Llama Agents Toolkit (2025)',
                            sourceUrl: 'https://ai.meta.com/blog/llama-4-multimodal-intelligence/',
                            alert: 'Agent capabilities improving, but Meta lacks workflow platform equivalent to Copilot Studio or Gemini Flows.',
                            implication: 'Developer-managed memory and custom orchestration create technical barriers for education organizations.',
                            watchFor: [
                                'Meta-hosted workflow platforms',
                                'Education-specific agent templates or recipes',
                                'Simplified memory management tools',
                                'Managed service offerings for education'
                            ]
                        },
                        'P3': {
                            pillarName: 'P3 – Human Capacity & Trust',
                            evidence: 'Meta AI deployed globally through WhatsApp, Messenger, and Instagram, but no structured K–12 teacher training programs.',
                            source: 'Meta AI Launch + Global Rollout',
                            sourceUrl: 'https://ppc.land/meta-plans-to-use-ai-chat-data-for-ad-targeting-starting-december/',
                            alert: 'Global platform reach exists, but no structured educator capacity programs compared to Microsoft GTP or Google EDU.',
                            implication: 'Consumer-driven adoption creates challenges for institutional deployment and educator readiness.',
                            watchFor: [
                                'Teacher training program launches',
                                'Education-specific onboarding resources',
                                'Partnerships with education non-governmental organizations',
                                'Institutional deployment guides or frameworks'
                            ]
                        },
                        'P4': {
                            pillarName: 'P4 – Public-Good Alliances',
                            evidence: 'Partners largely on digital literacy, misinformation, and safety initiatives, but few ministry-scale education partnerships.',
                            source: 'Meta Digital Literacy & Safety Partnerships',
                            sourceUrl: 'https://wethinkdigital.fb.com/partners/',
                            alert: 'Limited education-specific public-good presence compared to Microsoft or Google.',
                            implication: 'Fewer opportunities for system-level education sector engagement and ministry partnerships.',
                            watchFor: [
                                'Ministry of Education partnership announcements',
                                'AI-in-education public-good program launches',
                                'Educational institution collaboration programs',
                                'Open-source education initiative expansions'
                            ]
                        },
                        'P5': {
                            pillarName: 'P5 – Responsible AI & Governance',
                            evidence: 'Publishes detailed safety research, transparency reports, and open-source safety tools (Llama Guard, CyberSec Eval).',
                            source: 'Meta AI Safety Research + Llama Guard',
                            sourceUrl: 'https://ai.meta.com/research',
                            alert: 'Strong transparency and open-source safety tools, but youth/education-specific protections are less formalized.',
                            implication: 'Open-source safety tools enable custom implementations, but lack of formalized youth protections creates compliance gaps.',
                            watchFor: [
                                'Youth-specific safety framework releases',
                                'Education governance standard alignments',
                                'Third-party audit expansions',
                                'K–12-specific safety toolkits'
                            ]
                        }
                    }
                }
            };

            // Create provider scorecards
            Object.keys(alertData).forEach(provider => {
                const providerInfo = alertData[provider];
                const scorecard = providerInfo.scorecard;
                
                const providerCard = document.createElement('div');
                providerCard.style.cssText = 'background: #2d3748; border-radius: 8px; border: 2px solid ' + providerInfo.color + '; overflow: hidden; margin-bottom: 24px;';
                
                const providerId = `scorecard-${provider.toLowerCase()}`;
                providerCard.innerHTML = `
                    <div style="padding: 20px;">
                        <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 16px;">
                            <div style="flex: 1;">
                                <div style="font-weight: 700; color: ${providerInfo.color}; font-size: 1.2rem; margin-bottom: 6px;">
                                    ${provider}
                                </div>
                                <div style="color: #a0aec0; font-size: 0.85rem; line-height: 1.4; font-style: italic;">
                                    ${providerInfo.overview}
                                </div>
                            </div>
                        </div>
                        
                        <div class="dropdown-section" style="margin-bottom: 12px;">
                            <div class="dropdown-header" onclick="toggleDropdown('${providerId}-whatchanged', event)" style="padding: 12px 16px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; background: rgba(102, 126, 234, 0.1); border-left: 4px solid #667eea; border-radius: 6px; transition: background 0.2s;">
                                <div style="font-weight: 600; color: #667eea; font-size: 0.9rem; display: flex; align-items: center; gap: 8px;">
                                    <span style="width: 4px; height: 16px; background: #667eea; display: inline-block; border-radius: 2px;"></span>
                                    What Changed?
                                </div>
                                <span class="dropdown-arrow" id="${providerId}-whatchanged-arrow" style="color: #667eea; font-size: 0.8rem; transition: transform 0.3s;">▼</span>
                            </div>
                            <div class="dropdown-content" id="${providerId}-whatchanged" style="display: none; padding: 12px 16px; background: rgba(102, 126, 234, 0.05); border-left: 4px solid #667eea; border-radius: 0 0 6px 6px;">
                                ${Object.keys(scorecard.whatChanged).map(pillar => {
                                    const pillarName = globalWatchData.pillarNames[pillar];
                                    const pillarData = scorecard.whatChanged[pillar];
                                    const summary = pillarData.summary || pillarData;
                                    const source = pillarData.source;
                                    const sourceUrl = pillarData.sourceUrl;
                                    return `
                                    <div style="padding: 10px 0; border-bottom: ${pillar !== Object.keys(scorecard.whatChanged).slice(-1)[0] ? '1px solid rgba(74, 85, 104, 0.3)' : 'none'};">
                                        <div style="font-weight: 600; color: #667eea; font-size: 0.85rem; margin-bottom: 6px; display: flex; align-items: center; gap: 6px;">
                                            <span style="width: 3px; height: 14px; background: #667eea; display: inline-block; border-radius: 2px;"></span>
                                            ${pillarName}
                                        </div>
                                        <div style="color: #cbd5e0; font-size: 0.8rem; line-height: 1.5; margin-bottom: 6px; padding-left: 9px;">
                                            ${summary}
                                        </div>
                                        ${source ? `
                                            <div style="padding-left: 9px; font-size: 0.75rem; color: #a0aec0;">
                                                <span style="font-style: italic;">Source:</span> ${sourceUrl && sourceUrl.trim() ? `<a href="${sourceUrl}" target="_blank" rel="noopener noreferrer" style="color: #667eea; text-decoration: underline; margin-left: 4px;">${source}</a>` : source}
                                            </div>
                                        ` : ''}
                                    </div>
                                    `;
                                }).join('')}
                            </div>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                            <div class="dropdown-section">
                                <div class="dropdown-header" onclick="toggleDropdown('${providerId}-partners', event)" style="padding: 12px 16px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; background: rgba(229, 62, 62, 0.1); border-left: 4px solid #e53e3e; border-radius: 6px; transition: background 0.2s;">
                                    <div style="font-weight: 600; color: #e53e3e; font-size: 0.9rem; display: flex; align-items: center; gap: 8px;">
                                        <span style="width: 4px; height: 16px; background: #e53e3e; display: inline-block; border-radius: 2px;"></span>
                                        Implications for Partners
                                    </div>
                                    <span class="dropdown-arrow" id="${providerId}-partners-arrow" style="color: #e53e3e; font-size: 0.8rem; transition: transform 0.3s;">▼</span>
                                </div>
                                <div class="dropdown-content" id="${providerId}-partners" style="display: none; padding: 12px 16px 12px 28px; background: rgba(229, 62, 62, 0.05); border-left: 4px solid #e53e3e; border-radius: 0 0 6px 6px;">
                                    <ul style="list-style: none; padding: 0; margin: 0;">
                                        ${scorecard.implicationsForPartners.map((item, idx) => `
                                            <li style="padding: 5px 0; padding-left: 16px; position: relative; color: #cbd5e0; font-size: 0.8rem; line-height: 1.4; border-bottom: ${idx < scorecard.implicationsForPartners.length - 1 ? '1px solid rgba(74, 85, 104, 0.2)' : 'none'};">
                                                <span style="position: absolute; left: 0; top: 8px; width: 5px; height: 5px; background: #e53e3e; border-radius: 50%;"></span>
                                                ${item}
                                            </li>
                                        `).join('')}
                                    </ul>
                                </div>
                            </div>
                            
                            <div class="dropdown-section">
                                <div class="dropdown-header" onclick="toggleDropdown('${providerId}-strategy', event)" style="padding: 12px 16px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; background: rgba(${providerInfo.color === '#ff6b35' ? '255, 107, 53' : providerInfo.color === '#4285f4' ? '66, 133, 244' : providerInfo.color === '#00a4ef' ? '0, 164, 239' : '212, 165, 116'}, 0.15); border-left: 4px solid ${providerInfo.color}; border-radius: 6px; transition: background 0.2s;">
                                    <div style="font-weight: 600; color: ${providerInfo.color}; font-size: 0.9rem; display: flex; align-items: center; gap: 8px;">
                                        <span style="width: 4px; height: 16px; background: ${providerInfo.color}; display: inline-block; border-radius: 2px;"></span>
                                        Implications for Strategy
                                    </div>
                                    <span class="dropdown-arrow" id="${providerId}-strategy-arrow" style="color: ${providerInfo.color}; font-size: 0.8rem; transition: transform 0.3s;">▼</span>
                                </div>
                                <div class="dropdown-content" id="${providerId}-strategy" style="display: none; padding: 12px 16px; background: rgba(${providerInfo.color === '#ff6b35' ? '255, 107, 53' : providerInfo.color === '#4285f4' ? '66, 133, 244' : providerInfo.color === '#00a4ef' ? '0, 164, 239' : '212, 165, 116'}, 0.08); border-left: 4px solid ${providerInfo.color}; border-radius: 0 0 6px 6px;">
                                    <div style="color: #cbd5e0; font-size: 0.8rem; line-height: 1.5;">
                                        ${scorecard.implicationsForStrategy}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                container.appendChild(providerCard);
            });
        }


        // Toggle dropdown function for McKinsey-style cards
        function toggleDropdown(id, event) {
            if (event) {
                event.stopPropagation();
                event.preventDefault();
            }
            const content = document.getElementById(id);
            const arrow = document.getElementById(id + '-arrow');
            if (!content || !arrow) return;
            if (content.style.display === 'none' || !content.style.display) {
                content.style.display = 'block';
                arrow.style.transform = 'rotate(180deg)';
            } else {
                content.style.display = 'none';
                arrow.style.transform = 'rotate(0deg)';
            }
        }

        // Initialize dashboard
        window.addEventListener('load', function() {
            // Show Ecosystem Moves by default
            showModule('ecosystem');
        });

        // Handle window resize
        window.addEventListener('resize', function() {
            const activeModules = Array.from(document.querySelectorAll('.dashboard-section.active')).map(s => s.id);
            if (activeModules.includes('module-ecosystem')) renderEcosystemModule();
            if (activeModules.includes('module-globalwatch')) renderGlobalWatchModule();
        });
    </script>
</body>
</html>
